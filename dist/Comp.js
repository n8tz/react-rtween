/*!
 * react-rtween
 * Copyright (C) 2019  Nathanael Braun
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 * 
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=15)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/objectSpread")},function(e,t){e.exports=require("rtween")},function(e,t){e.exports=require("@babel/runtime/helpers/get")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("is")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("taskflows")},function(e,t){e.exports=require("shortid")},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n.n(r),i=n(7),s=n.n(i),a=n(8),l=n.n(a),c=n(1),u=n.n(c),h=n(9),d=n.n(h),f=n(0),p=n.n(f),_=n(11),v=n.n(_),m=n(2),g=n.n(m),w=n(12),y=n.n(w),b=n(4),x=n.n(b),S=n(10),E=n.n(S),A=n(13),P=n.n(A),M=n(10),R=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},T=Math.min,k=Math.max,O="undefined"!=typeof window,C=O?{prefix:/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",dashedPrefix:/webkit/i.test(navigator.appVersion)?"-webkit-":/firefox/i.test(navigator.userAgent)?"-moz-":/trident/i.test(navigator.userAgent)?"-ms-":"opera"in window?"-o-":""}:{prefix:"",dashedPrefix:""},D={_x:!0,x:!0,_y:!0,y:!0,_z:!0,z:!0,transform:!0,perspective:!0,matrix:!0,rotate:!0,rotateX:!0,rotateY:!0,_width:!0,_height:!0},L={onPageHided:[],onPageShown:[],dragging:[],dragEnabled:[],dragEnabledDesc:[],fingers:{},nbFingers:0,dragstartAnywhere:function(e){var t,n,r,o=L,i=o.dragEnabled.indexOf(this),s=[];if(-1===i)return!0;o.nbFingers||C.addEvent(document,{touchmove:o.dragAnywhere,touchend:o.dropAnywhere}),e.changedTouches&&e.changedTouches.length?s=e.changedTouches:s.push(e);for(var a=0,l=s.length;a<l;a++)if(n=s[a],!(r=o.dragEnabledDesc[i]).nbFingers&&(o.nbFingers++,o.fingers[n.identifier]=r,r.nbFingers++,r._startPos.x="MS"==C.prefix?n.x:n.pageX,r._startPos.y="MS"==C.prefix?n.y:n.pageY,r))for(r._lastPos.x="MS"==C.prefix?n.x:n.pageX,r._lastPos.y="MS"==C.prefix?n.y:n.pageY,t=0;t<r.dragstart.length;t++)r.dragstart[t][0].call(r.dragstart[t][1]||this,e,n,r)},dragAnywhere:function(e){var t,n,r=L,o=[],i=L.dragging[0];e.changedTouches&&e.changedTouches.length?o=e.changedTouches:o.push(e);for(var s=0,a=o.length;s<a;s++)if(n=o[s],i=r.fingers[n.identifier])for(i._lastPos.x="MS"==C.prefix?n.x:n.pageX,i._lastPos.y="MS"==C.prefix?n.y:n.pageY,t=0;t<i.drag.length;t++)i.drag[t][0].call(i.drag[t][1]||this,e,n,i)},dropAnywhere:function(e){var t,n,r,o=L,i=[];e.changedTouches&&e.changedTouches.length?i=e.changedTouches:i.push(e);for(var s=0,a=i.length;s<a;s++)if(n=i[s],r=o.fingers[n.identifier],o.fingers[n.identifier]=null,r)for(o.nbFingers--,r.nbFingers--,r._lastPos.x="MS"==C.prefix?n.x:n.pageX,r._lastPos.y="MS"==C.prefix?n.y:n.pageY,t=0;t<r.dropped.length;t++)r.dropped[t][0].call(r.dropped[t][1]||this,e,n,r);o.nbFingers||C.removeEvent(document,{touchmove:o.dragAnywhere,mousemove:o.dragAnywhere,touchend:o.dropAnywhere,mouseup:o.dropAnywhere})},getDraggable:function(e){var t,n=this.dragEnabled.indexOf(e);return-1===n?(n=this.dragEnabled.length,this.dragEnabled.push(e),this.dragEnabledDesc.push(t={nbFingers:0,locks:0,_startPos:{x:0,y:0},_lastPos:{x:0,y:0},dragstart:[],drag:[],dragEnd:[],dropped:[]}),C.addEvent(e,{touchstart:this.dragstartAnywhere})):t=this.dragEnabledDesc[n],t},freeDraggable:function(e){var t=this.dragEnabled.indexOf(e);-1!==t&&(this.dragEnabled.splice(t,1),this.dragEnabledDesc.splice(t,1),C.removeEvent(e,{mousedown:this.dragstartAnywhere,touchstart:this.dragstartAnywhere}))},addOverflowEvent:function(e,t){e.addEventListener("OverflowEvent"in window?"overflowchanged":"overflow",function(e){if("overflow"==e.type||0==e.orient&&1==e.horizontalOverflow||1==e.orient&&1==e.verticalOverflow||2==e.orient&&1==e.horizontalOverflow&&1==e.verticalOverflow)return t.call(this,e)},!1)},addEvent:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n.related=function(t){return n.call(e,t)})},removeEvent:function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.attachEvent&&e.detachEvent("on"+t,n.related)},rmFnScopePair:function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(e[r][0]==t&&e[r][1]==n)return e.splice(r,1);console.warn("Rm event : Listener not found !!")},_createElement:function(e,t,n,r){var o,i,s,a,l=r||document.createElement(e);if(t)for(i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&!_createElementAttr.hasOwnProperty(i)&&((o=document.createAttribute(i)).value=t[i],l.setAttributeNode(o));if(n&&t.$id&&(n[t.$id]=l),t.style&&C.applyCss(l,t.style),t.cls&&C.addCls(l,t.cls),t.events)for(i in t.events)t.events.hasOwnProperty(i)&&"$scope"!==i&&C.addEvent(l,i,t.events[i],t.events.$scope);if(t.content)if("string"==typeof t.content||"number"==typeof t.content[i])l.innerHTML=t.content;else if(t.content instanceof Array)for(s=0,a=t.content.length;s<a;s++)l.appendChild("string"!=typeof t.content[s]&&"number"!=typeof t.content[s]&&t.content[s]?isElement(t.content[s])?t.content[s]:__createElement(t.content[s].tagName||"div",t.content[s],n):document.createTextNode(t.content[s]||""));else l.appendChild(t.content instanceof HTMLElement?t.content:__createElement(t.content.tagName||"div",t.content,n));return l}},B=C={addEvent:function(e,t,n,r,o){if(M.object(t))for(var i in t)t.hasOwnProperty(i)&&this.addEvent(e,i,t[i],n);else"dragstart"==t?L.getDraggable(e).dragstart.push([n,r]):"drag"==t?L.getDraggable(e).drag.push([n,r]):"dropped"==t?L.getDraggable(e).dropped.push([n,r]):e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,n.related=function(t){return n.call(e,t)})},removeEvent:function(e,t,n,r,o){var i;if(M.object(t))for(var s in t)t.hasOwnProperty(s)&&this.removeEvent(e,s,t[s],r);else/^(drag|drop)/.test(t)?(i=L.getDraggable(e),L.rmFnScopePair(i[t],n,r),i.dragstart.length||i.drag.length||i.dragEnd.length||i.dropped.length||L.freeDraggable(e)):e.removeEventListener?e.removeEventListener(t,n,o):e.attachEvent&&e.detachEvent("on"+t,n.related)},offset:function(e){for(var t={top:0,left:0,width:e.offsetWidth,height:e.offsetHeight};e;)t.top=t.top+parseInt(e.offsetTop),t.left=t.left+parseInt(e.offsetLeft),e=e.offsetParent;return t},addWheelEvent:O&&function(e,t){var n,r,o="";e.addEventListener?n="addEventListener":(n="attachEvent","detachEvent",o="on"),r="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll";var i=10,s=40,a=800;function l(e){var t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*i,o=n*i,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1==e.deltaMode?(r*=s,o*=s):(r*=a,o*=a)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o}}function c(t,i,s,a,c){t[n](o+i,s._wheelList=function(t){!t&&(t=e.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1},normalized:l(t)};return"mousewheel"==r?n.deltaY=-.025*t.wheelDelta:"wheel"==r&&"Moz"==C.prefix?n.deltaY=t.deltaY/3:n.deltaY="wheel"==r?t.deltaY/100:t.deltaY,s.call(a||this,n)},c||!1)}return function(e,t,n,o){c(e,r,t,n,o),"DOMMouseScroll"==r&&c(e,"MozMousePixelScroll",t,n,o)}}(window,document),rmWheelEvent:O&&function(e,t){var n,r,o="";addEventListener?n="removeEventListener":(n="detachEvent",o="on"),r="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll";function i(e,t,r,i,s){e[n](o+t,r._wheelList)}return function(e,t,n,o){i(e,r,t),"DOMMouseScroll"==r&&i(e,"MozMousePixelScroll",t)}}(window,document),mapInBoxCSS:function(e,t,n,r,o){var i="";(M.number(e._z)||M.number(e._x)||M.number(e._y)||M.number(e.z)||M.number(e.x)||M.number(e.y))&&(i="translate3d("+R((e._x||0)*(n.x||0)+(e.x||0)+(o&&o.x||0),2)+(r&&r.x||"px")+", "+R((e._y||0)*(n.y||0)+(e.y||0)+(o&&o.y||0),2)+(r&&r.y||"px")+", "+R((e._z||0)*(n.z||0)+(e.z||0)+(o&&o.z||0),2)+(r&&r.z||"px")+")"),e.rotate&&M.number(e.rotate)&&(i+=" rotate("+R((e.rotate||0)%360,2)+"deg)"),e.rotateX&&M.number(e.rotateX)&&(i+=" rotateX("+R((e.rotateX||0)%360,2)+"deg)"),e.rotateY&&M.number(e.rotateY)&&(i+=" rotateY("+R((e.rotateY||0)%360,2)+"deg)"),M.number(e.opacity)&&(t.opacity=T(1,k(0,R(e.opacity,2)))),e.perspective&&(i="perspective("+e.perspective+(r&&r.perspective||"px")+") "+i),i&&(t.transform=i),M.number(e._width)&&(t.width=e._width*(n.x||0)+"px"),M.number(e._height)&&(t.height=e._height*(n.y||0)+"px"),M.number(e.width)&&(t.width=e.width+(r&&r.x||"px")),M.number(e.height)&&(t.height=e.height+(r&&r.y||"px")),M.number(e.zIndex)&&(t.zIndex=e.zIndex),Object.keys(e).forEach(function(n){n in D||(t[n]=e[n]+(r&&r[n]||"px"))})}},Y=p.a.createContext({tweenerById:{}}),j=n(3),z=n.n(j),I=n(5),X=n.n(I),q=new Function("try {return this===window;}catch(e){ return false;}")(),F=E.a.array,N={},U=new RegExp("([+-]?(?:[0-9]*[.])?[0-9]+)\\s*("+["em","ex","%","px","cm","mm","in","pt","pc","ch","rem","vh","vw","vmin","vmax"].join("|")+")"),W=function(e){var t={};return Object.keys(e).map(function(n){U.test((e[n]+"").trim())&&(t[n]=(e[n]+"").trim().replace(U,"$2"),e[n]=parseFloat((e[n]+"").trim().replace(U,"$1")))}),t},H={}.constructor;function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(!t[0]||t[0].prototype instanceof p.a.Component||t[0]===p.a.Component)&&t.shift(),i=(!t[0]||t[0]instanceof H)&&t.shift()||{};return r&&(r.prototype instanceof p.a.Component||r===p.a.Component)?function(e){function t(){var e;o()(this,t);var n=(e=l()(this,u()(t).apply(this,arguments))).constructor;return e._={refs:{}},e._.box={x:100,y:100,z:800},e._.curMotionStateId=n.InitialMotionState||"stand",e._._rafLoop=e._rafLoop.bind(y()(e)),e}return d()(t,e),s()(t,[{key:"resetTweenable",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e._.tweenRefMaps[t]=g()({},e._.tweenRefOrigin[t])})}},{key:"tweenRef",value:function(e,t,n,r,o,i){var s=this;this.makeTweenable();var a=this.constructor,l=(this._,a.motionStates&&a.motionStates[this._.curMotionStateId]);return this._.tweenRefs[e]||this._.tweenRefTargets.push(e),l&&l.refs&&l.refs[e]?(t=t||g()({},l.refs[e][0]),n=n||g()({},l.refs[e][1])):(t=t||{},n=n||{}),this._.tweenRefs[e]=!0,F(n)&&(this._.tweenRefUnits[e]=n[1],n=n[0]),n.getPosAt?n=n.getPosAt(r,!i&&this._.tweenRefMaps[e]||Object.assign({},N,n.scope||{})):(i=o,o=r,this._.tweenRefUnits[e]=W(n)),this._.tweenRefOrigin[e]=n,!i&&this._.tweenRefCSS[e]?this._.tweenRefCSS[e]=g()({},t):this._.tweenRefCSS[e]=t&&g()({},t)||{},t=this._.tweenRefCSS[e],n=this._.tweenRefMaps[e]=!i&&this._.tweenRefMaps[e]||Object.assign({},N,n||{}),B.mapInBoxCSS(n,t,this._.box,this._.tweenRefUnits[e]),o?{style:g()({},this._.tweenRefCSS[e])}:{style:g()({},this._.tweenRefCSS[e]),ref:function(t){return s._.refs[e]=t}}}},{key:"pushAnim",value:function(e,t,n){var r,o,i=this;return F(e)?r=e:(r=e.anims,o=e.initial),r instanceof z.a||(r=new z.a(r,this._.tweenRefMaps)),this.makeTweenable(),!n&&o&&Object.keys(o).map(function(t){return i.applyTweenState(t,o[t],e.reset)}),r.run(this._.tweenRefMaps,function(){var e=i._.runningAnims.indexOf(r);-1!=e&&i._.runningAnims.splice(e,1),t&&t(r)}),this._.runningAnims.push(r),this._.live||(this._.live=!0,requestAnimationFrame(this._._rafLoop=this._._rafLoop||this._rafLoop.bind(this))),r}},{key:"addScrollableAnim",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"scrollY",r=(arguments.length>2&&arguments[2],this._);F(e)?t=e:(t=e.anims,e.length),t instanceof z.a||(t=new z.a(t,r.tweenRefMaps)),this.makeTweenable(),this.makeScrollable(),r.axes[n]=r.axes[n]||{scrollableAnims:[],scrollPos:i.initialScrollPos&&i.initialScrollPos[n]||0,scrollableArea:0},r.axes[n].scrollableAnims.push(t),r.axes[n].scrollPos=r.axes[n].scrollPos||0,r.axes[n].scrollableArea=r.axes[n].scrollableArea||0,r.axes[n].scrollableArea=Math.max(r.axes[n].scrollableArea,t.duration),r.axes[n].scrollPos&&t.goTo(r.axes[n].scrollPos,this._.tweenRefMaps)}},{key:"rmScrollableAnim",value:function(e){var t=this,n=this._;n.axes&&Object.keys(n.axes).forEach(function(r){var o=n.axes[r].scrollableAnims.indexOf(e);-1!=o&&(n.axes[r].scrollableAnims.splice(o),n.axes[r].scrollableArea=Math.max.apply(Math,v()(n.axes[r].scrollableAnims.map(function(e){return e.duration})).concat([0])),e.goTo(0,t._.tweenRefMaps))})}},{key:"scrollTo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"scrollY";if(this._.axes){var o=e,i=function(e){return t._.axes[r].scrollPos=e,t.componentDidScroll&&t.componentDidScroll(~~e),requestAnimationFrame(t._._rafLoop)};return e=Math.max(0,e),e=Math.min(e,this._.axes[r].scrollableArea),n?this._.axes[r].scrollableAnims.forEach(function(t){return t.runTo(e,n,void 0,i)}):(this._.axes[r].scrollableAnims.forEach(function(n){return n.goTo(e,t._.tweenRefMaps)}),i(e)),this._.live||(this._.live=!0,requestAnimationFrame(this._._rafLoop)),!(o-e)}}},{key:"goToMotionStateId",value:function(e){var t=this,n=this.constructor,r=n.motionStates[e],o=this._.curMotionStateId;if(!this._.rendered)return this._.delayedMotionTarget=e;(this.running&&(this.running=arguments),this.running||e==this._.curMotionStateId)||(this._.tweenRefCSS||this.makeTweenable(),this.running=!0,new P.a([n.motionStates[this._.curMotionStateId]&&function(e,t){return n.motionStates[o].leaving(e,t,o)},function(){t._.curMotionStateId=e,!0!==t.running&&setTimeout(function(){return t.goToMotionStateId.apply(t,v()(t.running))}),t.running=!1},r&&function(e,t){return r.entering(e,t,o)},function(){r.refs&&Object.keys(r.refs).map(function(e){t.updateRefStyle(e,r.refs[e][0]),t.applyTweenState(e,r.refs[e][1])})}],this).run())}},{key:"applyTweenState",value:function(e,t,n){var r=this;Object.keys(t).map(function(o){return r._tweenRefMaps[e][o]=(!n&&r._tweenRefMaps[e][o]||0)+t[o]})}},{key:"updateRefStyle",value:function(e,t,n){var r=this;if(F(e)&&F(t))return e.map(function(e,o){return r.updateRefStyle(e,t[o],n)});if(F(e))return e.map(function(e){return r.updateRefStyle(e,t,n)});if(this._.tweenRefCSS||this.makeTweenable(),!n&&this.refs[e]){var o=this.refs[e]instanceof Element?this.refs[e]:X.a.findDOMNode(this.refs[e]);o&&Object.assign(o.style,t)}this._.tweenRefCSS[e]=this._.tweenRefCSS[e]||{},Object.assign(this._.tweenRefCSS[e],t)}},{key:"makeScrollable",value:function(){this._.scrollEnabled||(this._.scrollEnabled=!0,this._.scrollHook=[],this._.axes={scrollX:{scrollableAnims:[],scrollPos:i.initialScrollPos&&i.initialScrollPos.scrollX||0,scrollableArea:0},scrollY:{scrollableAnims:[],scrollPos:i.initialScrollPos&&i.initialScrollPos.scrollY||0,scrollableArea:0}},this._registerScrollListeners())}},{key:"_registerScrollListeners",value:function(){var e=this;this._.rendered?(q&&B.addWheelEvent(X.a.findDOMNode(this),this._.onScroll=function(t){var n,r="scrollY",o=e._.axes[r].scrollPos,i=o+t.deltaY;if(o!==i){if(e.shouldApplyScroll&&!e.shouldApplyScroll(i,o,r))return;e.scrollTo(i,void 0,r)&&(n=!0)}if(r="scrollX",(o=e._.axes[r].scrollPos)!==(i=o+t.deltaX)){if(e.shouldApplyScroll&&!e.shouldApplyScroll(i,o,r))return;e.scrollTo(i,void 0,r)&&(n=!0)}n&&t.preventDefault()}),q&&B.addEvent(X.a.findDOMNode(this),"drag",function(t,n,r){var o="scrollY",i=e._.axes[o].scrollPos,s=i+(r._startPos.y-r._lastPos.y)/10;r._startPos.y=r._lastPos.y,e.shouldApplyScroll&&!e.shouldApplyScroll(s,i,o)||(e.scrollTo(s,void 0,o),o="scrollX",s=(i=e._.axes[o].scrollPos)+(r._startPos.x-r._lastPos.x)/10,r._startPos.x=r._lastPos.x,e.shouldApplyScroll&&!e.shouldApplyScroll(s,i,o)||e.scrollTo(s,void 0,o))})):this._.doRegister=!0}},{key:"makeTweenable",value:function(){var e=this;this._.tweenEnabled||(this._.rtweensByProp={},this._.rtweensByStateProp={},this._.tweenRefCSS={},this._.tweenRefs={},this._.tweenRefMaps={},this._.tweenRefUnits={},this._.tweenEnabled=!0,this._.tweenRefOrigin={},this._.tweenRefTargets=this._.tweenRefTargets||[],this._.runningAnims=this._.runningAnims||[],q&&window.addEventListener("resize",this._.onResize=function(){e._updateBox(),e._updateTweenRefs()}))}},{key:"_updateBox",value:function(){var e=X.a.findDOMNode(this);e&&(this._.box.inited=!0,this._.box.x=e.offsetWidth,this._.box.y=e.offsetHeight)}},{key:"getTweenableRef",value:function(e){return this._.refs[e]}},{key:"_rafLoop",value:function(){this._updateTweenRefs(),this._.runningAnims.length?requestAnimationFrame(this._._rafLoop):this._.live=!1}},{key:"_updateTweenRefs",value:function(){for(var e,t,n=0;n<this._.tweenRefTargets.length;n++)e=this._.tweenRefTargets[n],B.mapInBoxCSS(this._.tweenRefMaps[e],this._.tweenRefCSS[e],this._.box,this._.tweenRefUnits[e]),(t=this._.tweenEnabled&&"__root"==e?X.a.findDOMNode(this):this.getTweenableRef(e))&&Object.assign(t.style,this._.tweenRefCSS[e])}},{key:"componentWillUnmount",value:function(){this._.tweenEnabled&&(this._.tweenEnabled=!1,window.removeEventListener("resize",this._.onResize)),this._.scrollEnabled&&(this._.scrollEnabled=!1,this._.axes=void 0,B.rmWheelEvent(X.a.findDOMNode(this),this._.onScroll)),x()(u()(t.prototype),"componentWillUnmount",this)&&x()(u()(t.prototype),"componentWillUnmount",this).call(this)}},{key:"componentDidMount",value:function(){var e=this,n=this.constructor;this._.rendered=!0,this._.tweenEnabled&&(this._updateBox(),this._updateTweenRefs()),this._.delayedMotionTarget&&(this.goToMotionStateId(this._.delayedMotionTarget),delete this._.delayedMotionTarget),n.scrollableAnim&&(E.a.array(n.scrollableAnim)?this.addScrollableAnim(n.scrollableAnim):Object.keys(n.scrollableAnim).forEach(function(t){return e.addScrollableAnim(n.scrollableAnim[t],t)})),this._.doRegister&&(this._registerScrollListeners(),this._.doRegister=!1),x()(u()(t.prototype),"componentDidMount",this)&&x()(u()(t.prototype),"componentDidMount",this).call(this)}},{key:"componentDidUpdate",value:function(e,n){var r=this;this._.tweenEnabled&&(this._updateBox(),this._updateTweenRefs(),this._.rtweensByProp&&Object.keys(e).forEach(function(t){return r._.rtweensByProp[t]&&r.props[t]!==e[t]&&r._.rtweensByProp[t][r.props[t]]&&r.pushAnim(r._.rtweensByProp[t][r.props[t]])},this),this._.rtweensByStateProp&&n&&Object.keys(n).forEach(function(e){return r._.rtweensByStateProp[e]&&r.state[e]!==n[e]&&r._.rtweensByStateProp[e][r.state[e]]&&r.pushAnim(r._.rtweensByStateProp[e][r.state[e]])},this)),x()(u()(t.prototype),"componentDidUpdate",this)&&x()(u()(t.prototype),"componentDidUpdate",this).call(this)}},{key:"registerPropChangeAnim",value:function(e,t,n){this._.rtweensByProp=this._.rtweensByProp||{},this._.rtween=this._.rtween||new z.a,this._.rtweensByProp[e]=this._.rtweensByProp[e]||{},this._.rtweensByProp[e][t]=this._.rtweensByProp[e][t]||new z.a,this._.rtweensByProp[e][t].mount(n)}},{key:"registerStateChangeAnim",value:function(e,t,n){this._.rtweensByStateProp=this._.rtweensByStateProp||{},this._.rtween=this._.rtween||new z.a,this._.rtweensByStateProp[e]=this._.rtweensByStateProp[e]||{},this._.rtweensByStateProp[e][t]=this._.rtweensByStateProp[e][t]||new z.a,this._.rtweensByStateProp[e][t].mount(n)}},{key:"render",value:function(){return p.a.createElement(Y.Provider,{value:this},x()(u()(t.prototype),"render",this).call(this))}}]),t}(r):function(e){return $(e,i)}}var V=n(14),Z=n.n(V);function G(e,t){return e.map(function(e){return g()({},e,{target:t})})}var J=function(e){function t(){var e,n;o()(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i)))).state={},n.__tweenableId=Z.a.generate(),n}return d()(t,e),s()(t,[{key:"componentWillUnmount",value:function(){var e=this;this._scrollableAnims&&Object.keys(this._scrollableAnims).forEach(function(t){return e._previousTweener.rmScrollableAnim(e._scrollableAnims[t],t)}),delete this._previousTweener,delete this._previousScrollable}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.id,o=void 0===r?this.__tweenableId:r,i=t.style,s=t.initial,a=t.pos,l=t.noRef,c=t.reset,u=t.scrollableAnims,h=t.onClick,d=void 0===h?n&&n.props&&n.props.onClick:h,f=t.onDoubleClick,_=void 0===f?n&&n.props&&n.props.onDoubleClick:f;return p.a.createElement(Y.Consumer,null,function(t){return p.a.isValidElement(n)&&(n=p.a.cloneElement(n,g()({},t.tweenRef(o,i||n.props.style,s,a,l,c),{onDoubleClick:_&&function(e){return _(e,t)},onClick:d&&function(e){return d(e,t)}}))),e._previousTweener===t&&e._previousScrollable===u||(e._scrollableAnims&&Object.keys(e._scrollableAnims).forEach(function(t){return e._previousTweener.rmScrollableAnim(e._scrollableAnims[t],t)}),u&&E.a.array(u)?e._scrollableAnims={scrollY:t.addScrollableAnim(G(u,o))}:e._scrollableAnims=u&&Object.keys(u).reduce(function(e,n){return e[n]=t.addScrollableAnim(G(u[n],o),n),e},{}),e._previousTweener=t,e._previousScrollable=u),n})}}]),t}(p.a.Component);J.propTypes={},n.d(t,"Component",function(){return K}),n.d(t,"asTweener",function(){return $}),n.d(t,"TweenRef",function(){return J}),n.d(t,"TweenerContext",function(){return Y});var K=$({})(p.a.Component),Q=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"render",value:function(){return"Should have some render fn here in "+this.constructor.displayName}}]),t}(K);t.default=Q}]);