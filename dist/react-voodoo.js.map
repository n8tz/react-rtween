{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"is\"","webpack:///external \"react\"","webpack:///./src/utils/css/cssUtils.js","webpack:///./src/MapOf.react_voodoo_utils_css_demux_typed_____js.gen.js","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/inheritsLoose\"","webpack:///external \"prop-types\"","webpack:///external \"fast-deep-equal\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"react-dom\"","webpack:///external \"css-box-shadow\"","webpack:///./src/utils/css/demux/typed/shadow.js","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\"","webpack:///./src/utils/css/demux/typed/number.js","webpack:///./src/utils/css/demux/typed/color.js","webpack:///external \"d3-ease\"","webpack:///external \"layer-pack/etc/utils/indexUtils.js\"","webpack:///external \"@babel/runtime/helpers/objectWithoutPropertiesLoose\"","webpack:///external \"shortid\"","webpack:///external \"color-rgba\"","webpack:///external \"tween-axis\"","webpack:///./src/utils/css/demux/filter.js","webpack:///./src/utils/css/demux/boxShadow.js","webpack:///./src/utils/css/demux/typed/int.js","webpack:///./src/utils/css/demux/typed/bool.js","webpack:///./src/utils/css/demux/typed/multi.js","webpack:///./src/utils/css/demux/typed/ratio.js","webpack:///./src/utils/css/demux/typed/border.js","webpack:///./src/utils/css/demux/transform.js","webpack:///./src/utils/css/demux/textShadow.js","webpack:///./src/utils/css/demux/backgroundColor.js","webpack:///./src/comps/TweenerContext.js","webpack:///./src/comps/TweenAxis.js","webpack:///./src/comps/TweenRef.js","webpack:///./src/utils/dom.js","webpack:///./src/spells/withTweener.js","webpack:///./src/comps/Draggable.js","webpack:///./src/utils/tweenTools.js","webpack:///./src/MapOf.react_voodoo_utils_css_demux_____js.gen.js","webpack:///./src/utils/css/index.js","webpack:///./src/utils/CssTweenAxis.js","webpack:///./src/utils/inertia.js","webpack:///./src/spells/asTweener.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","props","units","unitsRe","RegExp","join","floatCut","v","Number","toFixed","expandShorthandProperty","target","type","childProps","properties","values","split","multiple","forEach","k","length","isShorthandProperty","isValidDeclaration","_exports","walknSetExport","bool","color","int","multi","number","ratio","defaultUnits","perspective","defaultBox","translateX","defaultMuxers","inset","release","twKey","tweenableMap","cssMap","dataMap","muxerMap","keepValues","tmpKey","path","pop","keys","console","log","demuxOne","unitIndex","dkey","twVal","baseKey","data","box","unit","x","y","z","demux","tweenable","shadowMap","fkey","iValue","shadows","tmpValue","ti","undefined","substr","push","cssShadowParser","stringify","muxOne","initials","noPropLock","seenUnits","match","is","string","unitKey","indexOf","realKey","parseFloat","mux","reOrder","array","tFnKey","baseData","fValue","u","parse","left","right","top","bottom","width","height","defaultValue","opacity","rKey","muxer","slice","vect","rgba","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","saturate","sepia","filters","filter","warn","alias","center","offset","count","nowhere","Math","min","max","translateY","translateZ","scale","scaleZ","scaleX","scaleY","rotate","skewX","skewY","rotateX","rotateY","rotateZ","tmap","transforms","transform","TweenerContext","React","createContext","TweenAxis","state","componentWillUnmount","this","_tweenLines","axe","_previousTweener","rmScrollableAnim","_previousScrollable","render","children","scrollFirst","bounds","scrollableWindow","inertia","size","defaultPosition","items","Consumer","tweener","_previousAxis","_previousInertia","initAxis","scrollableBounds","_previousTweens","deepEqual","_lastTL","addScrollableAnim","Fragment","Component","propTypes","PropTypes","isRequired","any","setTarget","anims","map","tween","TweenRef","__tweenableId","shortid","generate","_tweenAxisObj","_currentTweener","rmTweenRef","setRootRef","id","style","initial","pos","noRef","reset","tweenLines","isRoot","tweenAxis","onClick","onDoubleClick","parentTweener","error","axisItemsChange","twRef","tweenRef","_tweenAxis","scrollY","reduce","h","_updateTweenRef","refChild","Children","only","isValidElement","cloneElement","e","_lastRef","div","className","query","prefixes","isBrowser","window","_dom","DocumentTouch","document","matchMedia","matches","prefix","test","navigator","appVersion","userAgent","dashedPrefix","__","onPageHided","onPageShown","dragging","dragEnabled","dragEnabledDesc","fingers","nbFingers","dragstartAnywhere","finger","desc","me","Dom","addEvent","dragAnywhere","dropAnywhere","dropWithoutClick","changedTouches","ln","identifier","_startPos","pageX","pageY","_startTs","timeStamp","_lastPos","dragstart","stopped","drag","preventNextClick","preventDefault","stopPropagation","stopImmediatePropagation","removeEvent","prevent","mouseDrag","dropped","getDraggable","node","locks","dragEnd","freeDraggable","splice","addOverflowEvent","element","fn","addEventListener","orient","horizontalOverflow","verticalOverflow","bubble","attachEvent","related","removeEventListener","detachEvent","rmDragFn","arr","scope","passive","elem","dims","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","addWheelEvent","_addEventListener","support","createElement","onmousewheel","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","_addWheelListener","eventName","callback","useCapture","_wheelList","originalEvent","srcElement","delatZ","returnValue","normalized","rmWheelEvent","_rmEventListener","_EventListener","findReactParents","fiberNode","comps","startsWith","return","stateNode","includes","parentNode","SimpleObjectProto","constructor","withTweener","argz","BaseComponent","shift","opts","TweenerToProps","ref","forwardedRef","displayName","withRef","forwardRef","Draggable","_","root","createRef","current","scrollEnabled","dragList","domUtils","componentDidMount","_registerScrollListeners","getScrollableNodes","scrollable","refs","ReactDom","findDOMNode","getElementById","lastStartTm","cLock","dX","parents","dY","parentsState","rootNode","xAxis","yAxis","touch","descr","pTweener","Date","now","__isTweener","_getAxis","options","maxClickTm","abs","maxClickOffset","xDispatched","yDispatched","dragDirectionLock","scrollPos","startMove","inertiaFrame","applyInertia","scrollableArea","isInbound","componentShouldScroll","hold","cancelable","enableMouseDrag","doRegister","getProps","Comp","defaultProps","re_cssValueWithUnit","cssAdd","val1","val2","units1","units2","remap","result","cssMult","val","start","item","from","duration","withOffset","iDuration","inverseValues","reverse","apply","MultiCssProps","addCss","sources","source","addAllType","v1","v2","values1","values2","extractCss","inverse","css","shiftTransforms","unshift","cssDemux","cssDemuxers","marginTop","marginLeft","marginRight","marginBottom","paddingTop","paddingLeft","paddingRight","paddingBottom","borderRadius","transformOrigin","zIndex","clearTweenableValue","cssKey","muxToCss","demuxers","deMuxTween","deMuxedTween","fTween","excluded","deMuxLine","tweenLine","allPropsById","twAxis","line","demuxedTween","recyclableTweenAxis","CssTweenAxis","cfg","recyled","localLength","mount","arguments","destroy","__marks","__marksLength","__marksKeys","__processors","__config","__activeForks","__activeProcess","__outgoing","__incoming","__cPos","__cIndex","__cMaxKey","easingFn","signOf","NaN","floor","round","Inertia","opt","conf","config","active","refFPS","currentStop","lastInertiaPos","stops","disabled","wayPoints","inertiaFn","easePolyOut","targetWayPointIndex","_detectCurrentSnap","update","at","nextValue","loop","inertiaStartTm","targetDuration","targetDist","delta","targetWayPoint","currentWayPoint","currentWayPointIndex","onInertiaEnd","shouldLoop","setPos","setWayPoints","teleport","loopDist","dispatch","tm","inertiaLastTm","_doSnap","forceSnap","maxDuration","mid","maxJump","willSnap","infinite","setBounds","baseTS","startTS","lastVelocity","lastIVelocity","lastAccel","posDiff","holding","nextPos","lastHoldPos","sinceLastPos","iVel","velSign","loopsTarget","loopsVelSum","pow","snapToBounds","_live","lastTm","isBrowserSide","Function","isArray","_running","Runner","_tick","cpos","cb","setTimeout","TweenableComp","_updateNodeInertia","activeInertia","_inertiaRaf","cancelAnimationFrame","scrollLeft","scrollTop","requestAnimationFrame","_swap","muxByTarget","_rafLoop","rootRef","enableMouseScroll","tweenerOptions","tweenRefCSS","tweenRefs","tweenRefMaps","iMapOrigin","tweenRefInitialData","tweenEnabled","tweenRefOrigin","tweenRefOriginCss","axes","muxDataByTarget","tweenRefDemuxed","tweenRefTargets","runningAnims","onResize","_updateBox","_updateTweenRefs","windowDidResize","iStyle","iMap","noref","mapReset","assign","preInitRef","resetTweenable","targets","updateRefStyle","postPone","pureCss","getTweenableRef","getRootNode","pushAnim","anim","then","keepResults","sl","fail","Promise","resolve","run","rkey","live","applyTweenState","_inertia","_scrollableArea","_scrollableBounds","_scrollableWindow","makeScrollable","dim","targetPos","nextDescr","initialScrollPos","getAxisState","getScrollPos","scrollTo","newPos","ms","ease","reject","oldPos","componentDidScroll","_runScrollGoTo","goTo","found","tl","to","easing","tick","hookScrollableTargets","rendered","lastScrollEvt","scrollLoad","_parentTweener","onScroll","_doDispatch","elementFromPoint","clientX","clientY","getComputedStyle","getPropertyValue","scrollX","cState","scrollHeight","clientHeight","scrollWidth","clientWidth","isInertiaActive","dispatchScroll","isAxisOut","dx","dy","Comps","headTarget","_activateNodeInertia","findIndex","scrollHook","inited","force","swap","clearTimeout","_static","scrollableAnim","__isFirst","componentDidUpdate","prevProps","prevState","oProps","Provider","asTweener","wheelRatio","String","fromCharCode","Tweenable"],"mappings":"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","file":"react-voodoo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","module.exports = require(\"is\");","module.exports = require(\"react\");","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst props = {\n\t\"margin\"                     : { \"properties\": [\"marginTop\", \"marginRight\", \"marginBottom\", \"marginLeft\"] },\n\t\"marginBottom\"               : { \"types\": [\"length\"] },\n\t\"marginLeft\"                 : { \"types\": [\"length\"] },\n\t\"marginRight\"                : { \"types\": [\"length\"] },\n\t\"marginTop\"                  : { \"types\": [\"length\"] },\n\t\"padding\"                    : { \"properties\": [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\"] },\n\t\"paddingBottom\"              : { \"types\": [\"length\"] },\n\t\"paddingLeft\"                : { \"types\": [\"length\"] },\n\t\"paddingRight\"               : { \"types\": [\"length\"] },\n\t\"paddingTop\"                 : { \"types\": [\"length\"] },\n\t\"bottom\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"left\"                       : { \"types\": [\"length-percentage-calc\"] },\n\t\"right\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"top\"                        : { \"types\": [\"length-percentage-calc\"] },\n\t\"zIndex\"                     : { \"types\": [\"integer\"] },\n\t\"width\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"minWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"height\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"minHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"lineHeight\"                 : { \"types\": [\"number\", \"length\"] },\n\t\"verticalAlign\"              : { \"types\": [\"length\"] },\n\t\"visibility\"                 : { \"types\": [\"visibility\"] },\n\t\"borderSpacing\"              : { \"types\": [\"length\"], \"multiple\": true },\n\t\"color\"                      : { \"types\": [\"color\"] },\n\t\"opacity\"                    : { \"types\": [\"number\"] },\n\t\"background\"                 : { \"properties\": [\"backgroundColor\", \"backgroundPosition\", \"backgroundSize\"] },\n\t\"backgroundColor\"            : { \"types\": [\"color\"] },\n\t\"backgroundPosition\"         : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"backgroundSize\"             : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"border\"                     : { \"properties\": [\"borderColor\", \"borderWidth\"] },\n\t\"borderBottom\"               : { \"properties\": [\"borderBottomColor\", \"borderBottomWidth\"] },\n\t\"borderLeft\"                 : { \"properties\": [\"borderLeftColor\", \"borderLeftWidth\"] },\n\t\"borderRight\"                : { \"properties\": [\"borderRightColor\", \"borderRightWidth\"] },\n\t\"borderTop\"                  : { \"properties\": [\"borderTopColor\", \"borderTopWidth\"] },\n\t\"borderColor\"                : { \"properties\": [\"borderTopColor\", \"borderRightColor\", \"borderBottomColor\", \"borderLeftColor\"] },\n\t\"borderWidth\"                : { \"properties\": [\"borderTopWidth\", \"borderRightWidth\", \"borderBottomWidth\", \"borderLeftWidth\"] },\n\t\"borderBottomColor\"          : { \"types\": [\"color\"] },\n\t\"borderLeftColor\"            : { \"types\": [\"color\"] },\n\t\"borderRightColor\"           : { \"types\": [\"color\"] },\n\t\"borderTopColor\"             : { \"types\": [\"color\"] },\n\t\"borderBottomWidth\"          : { \"types\": [\"length\"] },\n\t\"borderLeftWidth\"            : { \"types\": [\"length\"] },\n\t\"borderRightWidth\"           : { \"types\": [\"length\"] },\n\t\"borderTopWidth\"             : { \"types\": [\"length\"] },\n\t\"borderRadius\"               : { \"properties\": [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomRightRadius\", \"borderBottomLeftRadius\"] },\n\t\"borderTopLeftRadius\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderTopRightRadius\"       : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomRightRadius\"    : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomLeftRadius\"     : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"boxShadow\"                  : { \"types\": [\"shadow-list\"] },\n\t\"caretColor\"                 : { \"types\": [\"color\"] },\n\t\"outline\"                    : { \"properties\": [\"outlineColor\", \"outlineWidth\"] },\n\t\"outlineColor\"               : { \"types\": [\"color\"] },\n\t\"outlineWidth\"               : { \"types\": [\"length\"] },\n\t\"outlineOffset\"              : { \"types\": [\"length\"] },\n\t\"flex\"                       : { \"properties\": [\"flexGrow\", \"flexShrink\", \"flexBasis\"] },\n\t\"flexGrow\"                   : { \"types\": [\"number\"] },\n\t\"flexShrink\"                 : { \"types\": [\"number\"] },\n\t\"flexBasis\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"order\"                      : { \"types\": [\"integer\"] },\n\t\"font\"                       : { \"properties\": [\"fontWeight\", \"fontStretch\", \"fontSize\", \"lineHeight\"] },\n\t\"fontWeight\"                 : { \"types\": [\"font-weight\"] },\n\t\"fontStretch\"                : { \"types\": [\"font-stretch\"] },\n\t\"fontSize\"                   : { \"types\": [\"length\"] },\n\t\"fontSizeAdjust\"             : { \"types\": [\"number\"] },\n\t\"gridTemplateColumns\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplateRows\"           : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplate\"               : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"grid\"                       : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"gridRowGap\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridColumnGap\"              : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridGap\"                    : { \"properties\": [\"gridRowGap\", \"gridColumnGap\"] },\n\t\"clip\"                       : { \"types\": [\"rectangle\"] },\n\t\"clipPath\"                   : { \"types\": [\"basic-shape\"] },\n\t\"mask\"                       : { \"properties\": [\"maskPosition\", \"maskSize\"] },\n\t\"maskPosition\"               : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"maskSize\"                   : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"shapeOutside\"               : { \"types\": [\"basic-shape\"] },\n\t\"shapeMargin\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"shapeImageThreshold\"        : { \"types\": [\"number\"] },\n\t\"scrollPadding\"              : { \"properties\": [\"scrollPaddingTop\", \"scrollPaddingRight\", \"scrollPaddingBottom\", \"scrollPaddingLeft\"] },\n\t\"scrollPaddingTop\"           : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingRight\"         : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBottom\"        : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingLeft\"          : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlock\"         : { \"properties\": [\"scrollPaddingBlockStart\", \"scrollPaddingBlockEnd\"] },\n\t\"scrollPaddingBlockStart\"    : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlockEnd\"      : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInline\"        : { \"properties\": [\"scrollPaddingInlineStart\", \"scrollPaddingInlineEnd\"] },\n\t\"scrollPaddingInlineStart\"   : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInlineEnd\"     : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollSnapMargin\"           : { \"properties\": [\"scrollSnapMarginTop\", \"scrollSnapMarginRight\", \"scrollSnapMarginBottom\", \"scrollSnapMarginLeft\"] },\n\t\"scrollSnapMarginTop\"        : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginRight\"      : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBottom\"     : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginLeft\"       : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlock\"      : { \"properties\": [\"scrollSnapMarginBlockStart\", \"scrollSnapMarginBlockEnd\"] },\n\t\"scrollSnapMarginBlockStart\" : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlockEnd\"   : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInline\"     : { \"properties\": [\"scrollSnapMarginInlineStart\", \"scrollSnapMarginInlineEnd\"] },\n\t\"scrollSnapMarginInlineStart\": { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInlineEnd\"  : { \"types\": [\"length\"] },\n\t\"textDecoration\"             : { \"properties\": [\"textDecorationColor\"] },\n\t\"textDecorationColor\"        : { \"types\": [\"color\"] },\n\t\"textEmphasis\"               : { \"properties\": [\"textEmphasisColor\"] },\n\t\"textEmphasisColor\"          : { \"types\": [\"color\"] },\n\t\"textShadow\"                 : { \"types\": [\"shadow-list\"] },\n\t\"columns\"                    : { \"properties\": [\"columnWidth\", \"columnCount\"] },\n\t\"columnWidth\"                : { \"types\": [\"length\"] },\n\t\"columnCount\"                : { \"types\": [\"integer\"] },\n\t\"columnGap\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"columnRule\"                 : { \"properties\": [\"columnRuleColor\", \"columnRuleWidth\"] },\n\t\"columnRuleColor\"            : { \"types\": [\"color\"] },\n\t\"columnRuleWidth\"            : { \"types\": [\"length\"] },\n\t\"letterSpacing\"              : { \"types\": [\"length\"] },\n\t\"tabSize\"                    : { \"types\": [\"length\"] },\n\t\"textIndent\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"wordSpacing\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"transform\"                  : { \"types\": [\"transform\"] },\n\t\"transformOrigin\"            : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"perspective\"                : { \"types\": [\"length\"] },\n\t\"perspectiveOrigin\"          : { \"types\": [\"length-percentage-calc\"], \"multiple\": true }\n}\n\n//\n///**\n// * List of animatable types used by properties, with descriptions of how to interpolate each type.\n// * Data taken from https://www.w3.org/TR/css3-transitions/#animatable-types and some other W3C specs.\n// *\n// * @type {Object}\n// */\n//exports.types = {\n//\t'color'                 : {\n//\t\tname: 'color',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-color'\n//\t},\n//\t'length'                : {\n//\t\tname: 'length',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-length'\n//\t},\n//\t'percentage'            : {\n//\t\tname: 'percentage',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-percentage'\n//\t},\n//\t'length-percentage-calc': {\n//\t\tname: 'length, percentage, or calc',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-lpcalc'\n//\t},\n//\t'integer'               : {\n//\t\tname: 'integer',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-integer'\n//\t},\n//\t'font-weight'           : {\n//\t\tname: 'font weight',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-font-weight'\n//\t},\n//\t'number'                : {\n//\t\tname: 'number',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-number'\n//\t},\n//\t'rectangle'             : {\n//\t\tname: 'rectangle',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-rect'\n//\t},\n//\t'visibility'            : {\n//\t\tname: 'visibility',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-visibility'\n//\t},\n//\t'shadow-list'           : {\n//\t\tname: 'shadow list',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-shadow-list'\n//\t},\n//\t// Other specs\n//\t'transform'             : {\n//\t\tname: 'transform',\n//\t\thref: 'https://www.w3.org/TR/css3-transforms/#interpolation-of-transforms'\n//\t},\n//\t'font-stretch'          : {\n//\t\tname: 'font stretch',\n//\t\thref: 'https://www.w3.org/TR/css3-fonts/#font-stretch-animation'\n//\t},\n//\t'basic-shape'           : {\n//\t\tname: 'basic shape',\n//\t\thref: 'https://www.w3.org/TR/css-shapes-1/#basic-shape-interpolation'\n//\t},\n//};\n//\n\nexport const units    = ['', 'deg', 'box', 'bz', 'bh', 'bw', 'deg', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'];\nexport const unitsRe  = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['\\\\w+', 'deg', 'bz', 'bh', 'bw', 'cap', 'ch', 'deg', 'em', 'ic', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\nexport const floatCut = ( v = 0 ) => Number(v.toFixed(3));\n\nexport function expandShorthandProperty( property, value, target = {} ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties,\n\t    values     = value.split(' ');\n\t\n\tif ( type.multiple )\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\ttarget[k] = values[i % values.length];\n\t\t\t}\n\t\t)\n\telse\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\tif ( values[i] )\n\t\t\t\t\ttarget[k] = values[i];\n\t\t\t}\n\t\t)\n\treturn target;\n};\n\nexport function isShorthandProperty( property ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties;\n\treturn childProps && !!childProps.length;\n};\n\n\nexport function isValidDeclaration( property, value ) {\n\treturn !!props[property];\n};\n\n/**\n * Check if a CSS property can be animated\n * @param  {string} property CSS property name\n * @return {boolean}         True if the property can be animated\n */\nexport function canAnimate( property ) {\n\treturn props.hasOwnProperty(property);\n};\n\n/**\n * Get a definition of how a CSS property can be animated\n * @param  {string} property CSS property name\n * @param  {boolean} expand  Expand definitions for sub-properties, when available\n * @return {object}          Property definition, or null if it can't be animated\n */\nexport function getProperty( property, expand ) {\n\tif ( !exports.canAnimate(property) ) {\n\t\treturn null;\n\t}\n\tvar prop = props[property];\n\tvar ret  = { name: property };\n\tObject.keys(prop).forEach(function ( key ) {\n\t\tvar value = prop[key];\n\t\tif ( Array.isArray(value) ) {\n\t\t\tif ( key === 'properties' && expand ) {\n\t\t\t\tvalue = value.map(function ( subProp ) {\n\t\t\t\t\treturn exports.getProperty(subProp, expand);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = value.slice(); // clone\n\t\t\t}\n\t\t}\n\t\tret[key] = value;\n\t});\n\treturn ret;\n};\n","/* This is a virtual file generated by layer-pack */\nlet req, _exports = {}, walknSetExport=require('layer-pack/etc/utils/indexUtils.js').walknSetExport;\nconst _react_voodoo_utils_css_demux_typed_int_js = require(\"react-voodoo/utils/css/demux/typed/int.js\");\nwalknSetExport(_exports, \"int\", _react_voodoo_utils_css_demux_typed_int_js);\nconst _react_voodoo_utils_css_demux_typed_bool_js = require(\"react-voodoo/utils/css/demux/typed/bool.js\");\nwalknSetExport(_exports, \"bool\", _react_voodoo_utils_css_demux_typed_bool_js);\nconst _react_voodoo_utils_css_demux_typed_color_js = require(\"react-voodoo/utils/css/demux/typed/color.js\");\nwalknSetExport(_exports, \"color\", _react_voodoo_utils_css_demux_typed_color_js);\nconst _react_voodoo_utils_css_demux_typed_multi_js = require(\"react-voodoo/utils/css/demux/typed/multi.js\");\nwalknSetExport(_exports, \"multi\", _react_voodoo_utils_css_demux_typed_multi_js);\nconst _react_voodoo_utils_css_demux_typed_ratio_js = require(\"react-voodoo/utils/css/demux/typed/ratio.js\");\nwalknSetExport(_exports, \"ratio\", _react_voodoo_utils_css_demux_typed_ratio_js);\nconst _react_voodoo_utils_css_demux_typed_border_js = require(\"react-voodoo/utils/css/demux/typed/border.js\");\nwalknSetExport(_exports, \"border\", _react_voodoo_utils_css_demux_typed_border_js);\nconst _react_voodoo_utils_css_demux_typed_number_js = require(\"react-voodoo/utils/css/demux/typed/number.js\");\nwalknSetExport(_exports, \"number\", _react_voodoo_utils_css_demux_typed_number_js);\nconst _react_voodoo_utils_css_demux_typed_shadow_js = require(\"react-voodoo/utils/css/demux/typed/shadow.js\");\nwalknSetExport(_exports, \"shadow\", _react_voodoo_utils_css_demux_typed_shadow_js);\n\nexport const bool = _exports.bool;\n\nexport const border = _exports.border;\n\nexport const color = _exports.color;\n\nexport const int = _exports.int;\n\nexport const multi = _exports.multi;\n\nexport const number = _exports.number;\n\nexport const ratio = _exports.ratio;\n\nexport const shadow = _exports.shadow;\nexport default _exports;","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/inheritsLoose\");","module.exports = require(\"prop-types\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"react-dom\");","module.exports = require(\"css-box-shadow\");","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport cssShadowParser            from \"css-box-shadow\";\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../../cssUtils\";\nimport {bool, color}              from \"./(*).js\";\n\nconst defaultUnits  = {\n\t      perspective: 'px',\n      },\n      defaultBox    = {\n\t      translateX: 'x',\n      },\n      defaultMuxers = {\n\t      //blurRadius  : number,\n\t      inset: bool,\n\t      //offsetX     : number,\n\t      //offsetY     : number,\n\t      //spreadRadius: number,\n\t      color: color\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length > 2 ) {\n\t\t// dec count on transform\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\tif ( defaultMuxers[path[2]] ) {\n\t\t\tdefaultMuxers[path[2]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n\t\t\tif ( !dataMap[tmpKey] ) {\n\t\t\t\t//console.log(\"dec\", tmpKey, dataMap[path[0]][path[1]][path[2]])\n\t\t\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\t\tdelete dataMap[path[0]];\n\t\t\t\tdelete muxerMap[path[0]];\n\t\t\t\tdelete cssMap[path[0]];\n\t\t\t\t//console.log(\"delete color\", twKey)\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]])\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\t//tmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t// units\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", tmpKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !Object.keys(dataMap[path[0]][dataMap[path[0]].length - 1]).length )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet shadows                                                         = [],\n\t    tmpValue                                                        = {};\n\tlet ti = 0, shadowMap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\tshadowMap = data[key][ti];\n\t\ttmpValue  = {};\n\t\tfor ( fkey in shadowMap )\n\t\t\tif ( shadowMap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey = key + '_' + ti + '_' + fkey;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( defaultMuxers[fkey] ) {\n\t\t\t\t\tvalue = defaultMuxers[fkey].demux(dkey, tweenable, undefined, data, box);\n\t\t\t\t\t//continue;\n\t\t\t\t\t//console.log(dkey, tweenable[dkey])\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t\ty     = 0;\n\t\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t\tiValue  = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\t\ty++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( y > 1 )\n\t\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\ttmpValue[fkey] = (value || 0);\n\t\t\t}\n\t\tshadows.push(tmpValue);\n\t}\n\t\n\ttarget[key] = cssShadowParser.stringify(shadows);\n\t//console.log(key, shadows, target[key]);\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\t\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, shadowMap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\tshadowMap = value[ti];\n\t\tif ( is.string(shadowMap) )\n\t\t\tshadowMap = cssShadowParser.parse(shadowMap)[0];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in shadowMap ) {\n\t\t\tif ( shadowMap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue = shadowMap[tFnKey];\n\t\t\t\tdkey   = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\tif ( defaultMuxers[tFnKey] ) {\n\t\t\t\t\tdefaultMuxers[tFnKey].mux(dkey, fValue, target, data, initials, noPropLock, reOrder);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\tseenUnits = {};\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../../cssUtils\";\n\nconst defaultUnits    = {\n\t      left       : 'px',\n\t      right      : 'px',\n\t      top        : 'px',\n\t      bottom     : 'px',\n\t      width      : 'px',\n\t      height     : 'px',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      left  : 'x',\n\t      right : 'x',\n\t      top   : 'y',\n\t      bottom: 'y',\n\t      width : 'x',\n\t      height: 'y',\n      }, defaultValue = {\n\t      opacity: 0\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\tif ( path.length === 2 ) {\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]][path[1]], keepValues)\n\t\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//dataMap[path[0]][path[1]] = undefined;\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tif ( cssMap ) delete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitKey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitKey] || defaultUnits[baseKey] || \"px\";\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t\t\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box, baseKey ) {\n\tlet value, i = 0, y, rKey;\n\t\n\tvalue = \"\";\n\t\n\t//if ( key==\"height\" )\n\t//\tdebugger;\n\t\n\tfor ( y = 0; y < data[key].length; y++ )\n\t\tif ( data[key][y] ) {\n\t\t\trKey = key + \"_\" + y;\n\t\t\tif ( tweenable[rKey] < 0 )\n\t\t\t\tvalue += (i ? \" - \" : \"-\") + demuxOne(y, -tweenable[rKey], baseKey || key, data, box);\n\t\t\telse\n\t\t\t\tvalue += (i ? \" + \" : \"\") + demuxOne(y, tweenable[rKey], baseKey || key, data, box);\n\t\t\ti++;\n\t\t}\n\tif ( i > 1 )\n\t\tvalue = \"calc(\" + value + \")\";\n\t\n\t//console.log(key, ':', value)\n\treturn target ? target[key] = value : value;\n}\n\nexport function muxer( key, value, target, data, initials, noPropLock ) {\n\t\n\tdata[key]     = data[key] || [];\n\tlet seenUnits = [];\n\tif ( is.array(value) ) {\n\t\tfor ( let i = 0; i < value.length; i++ ) {\n\t\t\tmuxOne(key, value[i] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t}\n\t}\n\telse {\n\t\tmuxOne(key, value || 0, target, data, initials, noPropLock)\n\t}\n\t\n\treturn demux;\n}\n\nexport function muxOne( key, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[key] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = defaultValue[key] || 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\n\nexport const mux = muxer;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport rgba from \"color-rgba\";\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path   = twKey.split('_'),\n\t    tmpKey = path.slice(0, path.length - 1).join('_');\n\t\n\t//console.log(\"dec\", tmpKey, path, dataMap[twKey])\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\t//delete muxerMap[twKey];\n\t\t//delete cssMap[twKey];\n\t\t//console.log(\"delete\", twKey, path)\n\t}\n\tif ( !--dataMap[tmpKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\t//delete muxerMap[twKey];\n\t\t//delete cssMap[twKey];\n\t\t//console.log(\"delete\", tmpKey)\n\t}\n\t//}\n}\n\nexport function demux( key, tweenable, target, data ) {\n\tlet value = \"rgba(\" + tweenable[key + '_r'] + \", \" + tweenable[key + '_g'] + \", \" + tweenable[key + '_b'] + \", \" + tweenable[key + '_a'] + \")\";\n\treturn target ?\n\t       target[key] = value : value;\n}\n\nexport function mux( key, value, target, data, initials, noPropLock ) {\n\tlet vect = rgba(value);\n\t\n\tdata[key]        = data[key] || 0;\n\tdata[key + '_r'] = data[key + '_r'] || 0;\n\tdata[key + '_g'] = data[key + '_g'] || 0;\n\tdata[key + '_b'] = data[key + '_b'] || 0;\n\tdata[key + '_a'] = data[key + '_a'] || 0;\n\tif ( !noPropLock ) {\n\t\tdata[key] += 4;\n\t\tdata[key + '_r']++;\n\t\tdata[key + '_g']++;\n\t\tdata[key + '_b']++;\n\t\tdata[key + '_a']++;\n\t}\n\t\n\ttarget[key + '_r'] = vect[0];\n\ttarget[key + '_g'] = vect[1];\n\ttarget[key + '_b'] = vect[2];\n\ttarget[key + '_a'] = vect[3];\n\t\n\tinitials[key] = 0;\n\t\n\tinitials[key + '_r'] = 0;\n\tinitials[key + '_g'] = 0;\n\tinitials[key + '_b'] = 0;\n\tinitials[key + '_a'] = 1;\n\t\n\treturn demux;\n}\n","module.exports = require(\"d3-ease\");","module.exports = require(\"layer-pack/etc/utils/indexUtils.js\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");","module.exports = require(\"shortid\");","module.exports = require(\"color-rgba\");","module.exports = require(\"tween-axis\");","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                  from \"is\";\nimport {floatCut, unitsRe} from \"../cssUtils\";\n\nconst\n\tdefaultUnits = {\n\t\tblur      : 'px',\n\t\tbrightness: '%',\n\t\tcontrast  : '%',\n\t\tdropShadow: true,\n\t\tgrayscale : '%',\n\t\thueRotate : 'deg',\n\t\tinvert    : \"%\",\n\t\topacity   : \"%\",\n\t\tsaturate  : \"%\",\n\t\tsepia     : \"%\"\n\t};\nconst filters    = {};\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tconsole.log(\"dec\", twKey, path)\n\tif ( path.length === 4 ) {\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t\n\t\tif ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t//console.warn(\"free\", dataMap, path, tweenableMap[twKey])\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\tdelete tweenableMap[twKey];\n\t\t\tconsole.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]].length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t\n\tif ( data[\"filter_head\"] === key ) {\n\t\tlet filters = \"\";\n\t\tObject.keys(data[key]).forEach(\n\t\t\tfkey => {\n\t\t\t\tlet dkey        = key + '_' + fkey;\n\t\t\t\tdata[key][fkey] = true;\n\t\t\t\tfilters += fkey + \"(\" + floatCut(tweenable[dkey], 2) + data[dkey] + \") \";\n\t\t\t}\n\t\t)\n\t\ttarget.filter = filters;\n\t}\n\t\n}\n\n\nexport const mux = ( key, value, target, data, initials ) => {\n\t\n\tdata[\"filter_head\"] = data[\"filter_head\"] || key;\n\tdata[key]           = data[key] || {};\n\t//initials[key]       = 0;\n\t\n\tObject.keys(value).forEach(\n\t\tfkey => {\n\t\t\tlet fValue      = value[fkey],\n\t\t\t    dkey        = key + '_' + fkey,\n\t\t\t    match       = is.string(fValue) ? fValue.match(unitsRe) : false;\n\t\t\tdata[key][fkey] = true;\n\t\t\tinitials[dkey]  = 0;\n\t\t\tif ( match ) {\n\t\t\t\tif ( data[dkey] && data[dkey] !== match[2] ) {\n\t\t\t\t\tconsole.warn(\"Have != units on prop ! Ignore \", dkey, \"present:\" + data[dkey], \"new:\" + match[2]);\n\t\t\t\t\ttarget[dkey] = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdata[dkey]   = match[2];\n\t\t\t\t\ttarget[dkey] = parseFloat(match[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[dkey] = fValue;\n\t\t\t\tif ( !data[dkey] && fkey in defaultUnits )\n\t\t\t\t\tdata[dkey] = defaultUnits[fkey];\n\t\t\t}\n\t\t}\n\t)\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\ttarget[key] = ~~(tweenable[key]);// + defaultUnits[key];\n\t\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\t\n\tinitials[key] = 0;\n\ttarget[key]   = ~~value;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\tlet value = !!(tweenable[key]);\n\treturn target ? target[key] = value : value;\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\tinitials[key] = defaultUnits[key] || 0;\n\ttarget[key]   = value === false ? 0 : 1;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is          from \"is\";\nimport * as number from \"./number\";\n\nconst\n\talias = {\n\t\ttop   : '0%',\n\t\tbottom: '100%',\n\t\tcenter: '50%',\n\t\tleft  : '0%',\n\t\tright : '100%'\n\t};\n\nfunction demux( key, tweenable, target, data, box, offset ) {\n\t\n\tlet count = data[\"_\" + key], v = '', nowhere = {};\n\t\n\tfor ( let i = 0; i < count; i++ ) {\n\t\tnumber.demux(key + '_' + i, tweenable, nowhere, data, box, offset);\n\t\tv += nowhere[key + '_' + i] + ' ';\n\t}\n\t\n\ttarget[key] = v;\n}\n\n\nfunction release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\t//if ( path.length === 2 ) {\n\t//\tconsole.log(\"dec\", twKey, dataMap[path[0]][path[1]])\n\t//\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t//\t\tdelete tweenableMap[twKey];\n\t//\t\tdelete dataMap[path[0]][path[1]];\n\t//\t}\n\t//\n\t//\tif ( !keepValues )\n\t//\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t//\t\t\tdataMap[path[0]].pop();\n\t//\n\t//\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t//\t\tdelete dataMap[path[0]];\n\t//\t\tdelete muxerMap[path[0]];\n\t//\t\tdelete cssMap[path[0]];\n\t//\t\tconsole.log(\"delete\", path[0])\n\t//\t}\n\t//}\n\t//else {\n\t//console.log(\"wtf\", path)\n\t//}\n}\n\nexport default ( count ) => ({\n\tmux: ( key, value, target, data, initials, noPropLock ) => {\n\t\tlet values = value.split(' '), v;\n\t\t\n\t\tdata[key] = data[key] || 0;\n\t\tnoPropLock && data[key]++;\n\t\tdata[\"_\" + key] = count;\n\t\t\n\t\tfor ( let i = 0; i < count; i++ ) {\n\t\t\tv = values[i % values.length];\n\t\t\tv = is.string(v) && alias[v] || v;\n\t\t\tnumber.mux(key + '_' + i, v, target, data, initials, noPropLock)\n\t\t}\n\t\t\n\t\treturn demux;\n\t}, demux, release\n})","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\nimport {floatCut} from \"../../cssUtils\";\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\ttarget[key] = Math.min(1, Math.max(0, floatCut(tweenable[key])));\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\t\n\tinitials[key] = defaultUnits[key] || 0;\n\ttarget[key]   = value;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport cssShadowParser            from \"css-box-shadow\";\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe, expandShorthandProperty} from \"../../cssUtils\";\nimport {bool, color}              from \"./(*).js\";\n\nconst defaultUnits  = {\n\t      perspective: 'px',\n      },\n      defaultBox    = {\n\t      translateX: 'x',\n      },\n      defaultMuxers = {\n\t      //blurRadius  : number,\n\t      inset: bool,\n\t      //offsetX     : number,\n\t      //offsetY     : number,\n\t      //spreadRadius: number,\n\t      color: color\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length > 2 ) {\n\t\t// dec count on transform\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\tif ( defaultMuxers[path[2]] ) {\n\t\t\tdefaultMuxers[path[2]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n\t\t\tif ( !dataMap[tmpKey] ) {\n\t\t\t\t//console.log(\"dec\", tmpKey, dataMap[path[0]][path[1]][path[2]])\n\t\t\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\t\tdelete dataMap[path[0]];\n\t\t\t\tdelete muxerMap[path[0]];\n\t\t\t\tdelete cssMap[path[0]];\n\t\t\t\t//console.log(\"delete color\", twKey)\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]])\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\t//tmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t// units\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", tmpKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !Object.keys(dataMap[path[0]][dataMap[path[0]].length - 1]).length )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet shadows                                                         = [],\n\t    tmpValue                                                        = {};\n\tlet ti = 0, shadowMap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\tshadowMap = data[key][ti];\n\t\ttmpValue  = {};\n\t\tfor ( fkey in shadowMap )\n\t\t\tif ( shadowMap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey = key + '_' + ti + '_' + fkey;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( defaultMuxers[fkey] ) {\n\t\t\t\t\tvalue = defaultMuxers[fkey].demux(dkey, tweenable, undefined, data, box);\n\t\t\t\t\t//continue;\n\t\t\t\t\t//console.log(dkey, tweenable[dkey])\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t\ty     = 0;\n\t\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t\tiValue  = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\t\ty++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( y > 1 )\n\t\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\ttmpValue[fkey] = (value || 0);\n\t\t\t}\n\t\tshadows.push(tmpValue);\n\t}\n\t\n\ttarget[key] = cssShadowParser.stringify(shadows);\n\t//console.log(key, shadows, target[key]);\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\tdebugger\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, shadowMap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\tshadowMap = value[ti];\n\t\tif ( is.string(shadowMap) )\n\t\t\tshadowMap = cssShadowParser.parse(shadowMap)[0];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in shadowMap ) {\n\t\t\tif ( shadowMap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue = shadowMap[tFnKey];\n\t\t\t\tdkey   = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\tif ( defaultMuxers[tFnKey] ) {\n\t\t\t\t\tdefaultMuxers[tFnKey].mux(dkey, fValue, target, data, initials, noPropLock, reOrder);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\tseenUnits = {};\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../cssUtils\";\n\nconst defaultUnits    = {\n\t      //matrix     : true,\n\t      //translate  : 'px',\n\t      translateX : 'px',\n\t      translateY : 'px',\n\t      translateZ : 'px',\n\t      scale      : '',\n\t      scaleZ     : '',\n\t      scaleX     : '',\n\t      scaleY     : '',\n\t      rotate     : 'deg',\n\t      //skew       : 'deg',\n\t      skewX      : 'deg',\n\t      skewY      : 'deg',\n\t      //matrix3d   : true,\n\t      //translate3d: true,\n\t      //scale3d    : true,\n\t      //rotate3d   : true,\n\t      rotateX    : 'deg',\n\t      rotateY    : 'deg',\n\t      rotateZ    : 'deg',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      translateX: 'x',\n\t      translateY: 'y',\n\t      translateZ: 'z',\n\t      rotateX   : 'x',\n\t      rotateY   : 'y',\n\t      rotateZ   : 'z',\n\t      left      : 'x',\n\t      right     : 'x',\n\t      top       : 'y',\n\t      bottom    : 'y',\n\t      width     : 'x',\n\t      height    : 'y',\n      }, defaultValue = {\n\t      //skew  : 1,\n\t      //skewX : 1,\n\t      //skewY : 1,\n\t      scale : 1,\n\t      scaleX: 1,\n\t      scaleY: 1,\n\t      scaleZ: 1\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length === 4 ) {\n\t\t//console.warn(\"dec\", twKey, dataMap[path[0]][path[1]][path[2]])\n\t\t// dec count on transform\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet transforms                                                 = \"\",\n\t    tmpValue                                                   = {};\n\tlet ti = 0, tmap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\ttmap = data[key][ti];\n\t\tfor ( fkey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey  = key + '_' + ti + '_' + fkey;\n\t\t\t\tvalue = \"\";\n\t\t\t\ty     = 0;\n\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t//console.log(\"mux \", key, dkey, unitKey)\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if ( !tweenable[unitKey] )\n\t\t\t\t\t\t//\tcontinue;\n\t\t\t\t\t\tiValue = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t//console.log(unitKey, tweenable[unitKey], iValue)\n\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\ty++;\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( y > 1 )\n\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\n\t\t\t\tif ( y > 0 )\n\t\t\t\t\ttransforms += fkey + \"(\" + (value || \"0\") + \") \";\n\t\t\t}\n\t}\n\ttarget.transform = transforms;\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey],\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = defaultValue[baseKey] || 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', realKey, data[key][unitKey], initials[realKey], noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\t\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, tmap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\ttmap     = value[ti];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue    = tmap[tFnKey];\n\t\t\t\tseenUnits = {};\n\t\t\t\tdkey      = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\t\n\t\t\t\t//console.warn(\"set \", key, dkey, noPropLock, baseData[tFnKey])\n\t\t\t\t\n\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t}\n\t\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/color\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nconst TweenerContext = React.createContext(null);\nexport default TweenerContext","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport PropTypes from \"prop-types\";\nimport React     from 'react';\n\nimport TweenerContext from \"./TweenerContext\";\n\nexport default class TweenAxis extends React.Component {\n\tstatic propTypes = {\n\t\taxe            : PropTypes.string.isRequired,\n\t\titems          : PropTypes.array,\n\t\tbounds         : PropTypes.object,\n\t\tinertia        : PropTypes.any,\n\t\tdefaultPosition: PropTypes.number,\n\t\tsize           : PropTypes.any\n\t};\n\tstate            = {};\n\t\n\tcomponentWillUnmount() {\n\t\t\n\t\tif ( this._tweenLines ) {\n\t\t\tObject.keys(this._tweenLines)\n\t\t\t      .forEach(axe => this._previousTweener.rmScrollableAnim(this._tweenLines[axe], axe));\n\t\t\t\n\t\t}\n\t\tdelete this._previousTweener;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    axe, scrollFirst, bounds,\n\t\t\t    scrollableWindow, inertia, size, defaultPosition,\n\t\t\t    items = [],\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\ttweener => {\n\t\t\t\t\tif ( !this._previousAxis || this._previousAxis !== axe ) {//....\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t\telse if ( !this._previousInertia || this._previousInertia !== inertia ) {//....\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif ( !this._previousTweener || this._previousTweener !== tweener ) {// mk axe not modifiable\n\t\t\t\t\t\tthis._previousTweener && this._lastTL && this._previousTweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweener = tweener;\n\t\t\t\t\t\tthis._previousTweens  = items;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( this._previousTweens !== items && !(this._previousTweens && deepEqual(items, this._previousTweens)) ) {\n\t\t\t\t\t\tthis._lastTL && this._previousTweener && this._previousTweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tthis._lastTL = null;\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweens = items;\n\t\t\t\t\t}\n\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport is        from \"is\";\nimport React     from 'react';\nimport shortid   from 'shortid';\n\nimport TweenerContext from \"./TweenerContext\";\n\nfunction setTarget( anims, target ) {\n\treturn anims.map(\n\t\ttween => ({\n\t\t\t...tween,\n\t\t\ttarget\n\t\t})\n\t)\n}\n\nexport default class TweenRef extends React.Component {\n\t\n\tstatic propTypes = {};\n\tstate            = {};\n\t__tweenableId    = shortid.generate();\n\t\n\tcomponentWillUnmount() {\n\t\tif ( this._tweenAxisObj ) {\n\t\t\tObject.keys(this._tweenAxisObj)\n\t\t\t      .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\n\t\t}\n\t\tif ( this._currentTweener ) {\n\t\t\tthis._currentTweener.rmTweenRef(this.__tweenableId)\n\t\t\tthis._currentTweener.setRootRef(undefined);\n\t\t}\n\t\tdelete this._currentTweener;\n\t\tdelete this._tweenAxisObj;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    id            = this.__tweenableId,\n\t\t\t    style, initial, pos, noRef, reset, tweener,\n\t\t\t    isRoot,\n\t\t\t    tweenLines,\n\t\t\t    tweenAxis     = tweenLines,\n\t\t\t    onClick       = children && children.props && children.props.onClick,\n\t\t\t    onDoubleClick = children && children.props && children.props.onDoubleClick\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\tparentTweener => {//@todo : must be better method\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tparentTweener = tweener || parentTweener;\n\t\t\t\t\t\n\t\t\t\t\tif ( !parentTweener ) {\n\t\t\t\t\t\tconsole.error(\"No voodoo tweener found in the context, is there any parent with asTweener ?\")\n\t\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t\t}\n\t\t\t\t\t//console.warn(\"render : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\tlet twRef = parentTweener.tweenRef(id, children.props && children.props.style, style || initial,\n\t\t\t\t\t                                   pos, noRef),\n\t\t\t\t\t    axisItemsChange;\n\t\t\t\t\t\n\t\t\t\t\t//console.warn(\"render2 : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( this._currentTweener !== parentTweener || this._previousScrollable !== tweenAxis ) {\n\t\t\t\t\t\taxisItemsChange = this._tweenAxis !== tweenAxis && !(this._tweenAxis && deepEqual(tweenAxis, this._tweenAxis));\n\t\t\t\t\t\tif ( this._currentTweener && axisItemsChange ) {\n\t\t\t\t\t\t\tthis._tweenAxisObj && Object.keys(this._tweenAxisObj)\n\t\t\t\t\t\t\t                            .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(twRef, axisItemsChange, this._tweenAxis, tweenAxis)\n\t\t\t\t\t\tif ( this._currentTweener && this._currentTweener !== parentTweener ) {\n\t\t\t\t\t\t\tthis._currentTweener.rmTweenRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( axisItemsChange ) {\n\t\t\t\t\t\t\tthis._tweenAxis = tweenAxis;\n\t\t\t\t\t\t\tif ( tweenAxis && is.array(tweenAxis) )\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = { scrollY: parentTweener.addScrollableAnim(setTarget(tweenAxis, id)) };\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = tweenAxis && Object.keys(tweenAxis)\n\t\t\t\t\t\t\t\t                                        .reduce(( h, axe ) => (h[axe] = parentTweener.addScrollableAnim(setTarget(tweenAxis[axe], id), axe), h), {});\n\t\t\t\t\t\t\ttwRef = parentTweener.tweenRef(id, children.props && children.props.style, style || initial,\n\t\t\t\t\t\t\t                               pos, noRef)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id, true) };\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( this.props.hasOwnProperty(\"isRoot\") ) {\n\t\t\t\t\t\t\tthis._currentTweener && this._currentTweener.setRootRef(undefined);\n\t\t\t\t\t\t\ttweener.setRootRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._currentTweener     = parentTweener;\n\t\t\t\t\t\tthis._previousScrollable = tweenAxis;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if ( twRef ) {\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id, true) };\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet refChild = React.Children.only(children);\n\t\t\t\t\t\n\t\t\t\t\tif ( refChild && React.isValidElement(refChild) ) {\n\t\t\t\t\t\trefChild      = React.cloneElement(\n\t\t\t\t\t\t\trefChild,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...twRef,\n\t\t\t\t\t\t\t\tonDoubleClick: onDoubleClick && (e => onDoubleClick(e, parentTweener)),\n\t\t\t\t\t\t\t\tonClick      : onClick && (e => onClick(e, parentTweener))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._lastRef = twRef;\n\t\t\t\t\t\treturn refChild;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.error(\"Invalid voodoo TweenRef child : \", id)\n\t\t\t\t\t}\n\t\t\t\t\treturn <div>Invalid</div>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}\n\nTweenRef.div = ( { children, className, ...props } ) => {\n\treturn <TweenRef {...props}>\n\t\t<div className={className}>{children}</div>\n\t</TweenRef>;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nlet\n\tis        = require('is'),\n\tisBrowser = typeof window !== 'undefined',\n\tisTouch   = isBrowser && (function is_touch_device() {\n\t\tvar prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n\t\tvar mq       = function ( query ) {\n\t\t\treturn window.matchMedia&&window.matchMedia(query).matches;\n\t\t}\n\t\t\n\t\tif ( ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch ) {\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t// include the 'heartz' as a way to have a non matching MQ to help terminate the join\n\t\t// https://git.io/vznFH\n\t\tvar query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n\t\treturn mq(query);\n\t}()),\n\t_dom      = isBrowser ? {\n\t\tprefix      : (/webkit/i).test(navigator.appVersion) ? 'webkit' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? 'Moz' :\n\t\t              (/trident/i).test(navigator.userAgent) ? 'ms' :\n\t\t              'opera' in window ? 'O' : '',\n\t\tdashedPrefix: (/webkit/i).test(navigator.appVersion) ? '-webkit-' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? '-moz-' :\n\t\t              (/trident/i).test(navigator.userAgent) ? '-ms-' :\n\t\t              'opera' in window ? '-o-' : ''\n\t} : {\n\t\tprefix      : '',\n\t\tdashedPrefix: ''\n\t},\n\t__        = {\n\t\tonPageHided      : [],\n\t\tonPageShown      : [],\n\t\tdragging         : [],\n\t\tdragEnabled      : [],\n\t\tdragEnabledDesc  : [],\n\t\tfingers          : {},\n\t\tnbFingers        : 0,\n\t\tdragstartAnywhere: function ( e ) {\n\t\t\tlet o,\n\t\t\t    me            = __,\n\t\t\t    i             = me.dragEnabled.indexOf(this),\n\t\t\t    finger,\n\t\t\t    desc, fingers = [];\n\t\t\t\n\t\t\tif ( i === -1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//e.preventDefault();\n\t\t\t//e.stopPropagation();\n\t\t\t\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.addEvent(document,\n\t\t\t\t             {\n\t\t\t\t\t             'touchmove': me.dragAnywhere,\n\t\t\t\t\t             'mousemove': me.dragAnywhere,\n\t\t\t\t\t             'touchend' : me.dropAnywhere,\n\t\t\t\t\t             'mouseup'  : me.dropAnywhere,\n\t\t\t\t             });\n\t\t\t\tDom.addEvent(this,\n\t\t\t\t             {\n\t\t\t\t\t             'click': me.dropWithoutClick\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let t = 0, ln = fingers.length; t < ln; t++ ) {\n\t\t\t\tfinger = fingers[t];\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc = me.dragEnabledDesc[i];\n\t\t\t\t\n\t\t\t\tif ( desc.nbFingers ) continue;\n\t\t\t\t\n\t\t\t\tme.nbFingers++;\n\t\t\t\t\n\t\t\t\tme.fingers[finger.identifier] = me.fingers[finger.identifier] || [];\n\t\t\t\tme.fingers[finger.identifier].push(desc);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc.nbFingers++;\n\t\t\t\t\n\t\t\t\tdesc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\tdesc._startTs    = e.timeStamp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\n\t\t\t\tfor ( o = 0; o < desc.dragstart.length; o++ )\n\t\t\t\t\tdesc.dragstart[o][0].call(desc.dragstart[o][1] ||\n\t\t\t\t\t\t                          this, e, finger, desc);\n\t\t\t}\n\t\t},\n\t\tdragAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me              = __,\n\t\t\t    finger, fingers = [], stopped,\n\t\t\t    desc            = __.dragging[0];\n\t\t\t\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tdesc   = me.fingers[finger.identifier];\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\tif ( stopped ) {\n\t\t\t\t\t\t\tdesc._lastPos.x = desc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\t\tdesc._lastPos.y = desc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.drag.length; o++ )\n\t\t\t\t\t\t\tstopped = desc.drag[o][0].call(desc.drag[o][1] || this, e,\n\t\t\t\t\t\t\t                               finger,\n\t\t\t\t\t\t\t                               desc) === false;\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tdropWithoutClick : function ( e ) {\n\t\t\tif ( __.preventNextClick ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t__.preventNextClick = false;\n\t\t\t}\n\t\t\tDom.removeEvent(this,\n\t\t\t                {\n\t\t\t\t                'click': this.dropWithoutClick\n\t\t\t                });\n\t\t},\n\t\tdropAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me = __, finger, fingers = [],\n\t\t\t    prevent;\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tme.nbFingers--;\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tdesc.nbFingers--;\n\t\t\t\t\t\tprevent         = prevent || desc.mouseDrag && (e.timeStamp - desc._startTs > 250);\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.dropped.length; o++ )\n\t\t\t\t\t\t\tdesc.dropped[o][0].call(desc.dropped[o][1] ||\n\t\t\t\t\t\t\t\t                        this, e,\n\t\t\t\t\t\t\t                        finger, desc);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tme.fingers[finger.identifier] = null;\n\t\t\t}\n\t\t\tif ( prevent ) {\n\t\t\t\tme.preventNextClick = true;\n\t\t\t}\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.removeEvent(document,\n\t\t\t\t                {\n\t\t\t\t\t                'touchmove': me.dragAnywhere,\n\t\t\t\t\t                'mousemove': me.dragAnywhere,\n\t\t\t\t\t                'touchend' : me.dropAnywhere,\n\t\t\t\t\t                'mouseup'  : me.dropAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\tgetDraggable     : function ( node, mouseDrag ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i === -1 ) {\n\t\t\t\tthis.dragEnabled.push(node);\n\t\t\t\tthis.dragEnabledDesc.push(\n\t\t\t\t\tdesc = {\n\t\t\t\t\t\tmouseDrag,\n\t\t\t\t\t\tnbFingers: 0,\n\t\t\t\t\t\tlocks    : 0,\n\t\t\t\t\t\t_startPos: {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\t_lastPos : {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdragstart: [],\n\t\t\t\t\t\tdrag     : [],\n\t\t\t\t\t\tdragEnd  : [],\n\t\t\t\t\t\tdropped  : []\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t//debugger;\n\t\t\t\tDom.addEvent(node,\n\t\t\t\t             {\n\t\t\t\t\t             'mousedown' : mouseDrag && this.dragstartAnywhere,\n\t\t\t\t\t             'touchstart': this.dragstartAnywhere\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\telse desc = this.dragEnabledDesc[i];\n\t\t\treturn desc;\n\t\t},\n\t\tfreeDraggable    : function ( node ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i !== -1 ) {\n\t\t\t\tthis.dragEnabled.splice(i, 1);\n\t\t\t\tthis.dragEnabledDesc.splice(i, 1);\n\t\t\t\t\n\t\t\t\tDom.removeEvent(node,\n\t\t\t\t                {\n\t\t\t\t\t                'mousedown' : this.dragstartAnywhere,\n\t\t\t\t\t                'touchstart': this.dragstartAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\taddOverflowEvent : function addFlowListener( element, fn ) {\n\t\t\t\n\t\t\tlet type = 'over', flow = type == 'over';\n\t\t\t\n\t\t\telement.addEventListener('OverflowEvent' in window ? 'overflowchanged' : type + 'flow',\n\t\t\t                         function ( e ) {\n\t\t\t\t                         if ( e.type == (type + 'flow') ||\n\t\t\t\t\t                         ((e.orient == 0 && e.horizontalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 1 && e.verticalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 2 && e.horizontalOverflow == flow &&\n\t\t\t\t\t\t\t                         e.verticalOverflow == flow)) ) {\n\t\t\t\t\t                         return fn.call(this, e);\n\t\t\t\t                         }\n\t\t\t                         }, false);\n\t\t\t\n\t\t},\n\t\taddEvent         : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.addEventListener ) {\n\t\t\t\tnode.addEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t                 });\n\t\t\t}\n\t\t},\n\t\tremoveEvent      : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.removeEventListener ) {\n\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t}\n\t\t},\n\t\trmDragFn         : function ( arr, fn, scope ) {\n\t\t\tfor ( let i = 0, ln = arr.length; i < ln; i++ ) {\n\t\t\t\tif ( arr[i][0] === fn )\n\t\t\t\t\treturn arr.splice(i, 1);\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Rm event : Listener not found !!\");\n\t\t},\n\t},\n\tDom       = {\n\t\taddEvent     : function ( node, type, fn, mouseDrag, bubble ) {\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) && type[o] )\n\t\t\t\t\t\tthis.addEvent(node, o, type[o], mouseDrag, bubble);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if ( type == 'dragstart' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dragstart.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'drag' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).drag.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'dropped' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dropped.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.addEventListener ) {\n\t\t\t\t\tnode.addEventListener(type, fn, { passive: false });\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t\t                 });\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tremoveEvent  : function ( node, type, fn, scope, bubble ) {\n\t\t\tlet i, desc;\n\t\t\t\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) )\n\t\t\t\t\t\tthis.removeEvent(node, o, type[o], scope);\n\t\t\t\t\n\t\t\t}\n\t\t\telse if ( /^(drag|drop)/.test(type) ) {\n\t\t\t\tdesc = __.getDraggable(node);\n\t\t\t\t__.rmDragFn(desc[type], fn, scope);\n\t\t\t\tif ( !desc.dragstart.length\n\t\t\t\t\t&& !desc.drag.length\n\t\t\t\t\t&& !desc.dragEnd.length\n\t\t\t\t\t&& !desc.dropped.length )\n\t\t\t\t\t__.freeDraggable(node);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.removeEventListener ) {\n\t\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\toffset       : function ( elem ) {// @todo\n\t\t\tlet dims = { top: 0, left: 0, width: elem.offsetWidth, height: elem.offsetHeight };\n\t\t\twhile ( elem ) {\n\t\t\t\tdims.top  = dims.top + parseInt(elem.offsetTop);\n\t\t\t\tdims.left = dims.left + parseInt(elem.offsetLeft);\n\t\t\t\telem      = elem.offsetParent;\n\t\t\t}\n\t\t\treturn dims;\n\t\t},\n\t\taddWheelEvent: isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _addEventListener, _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( window.addEventListener ) {\n\t\t\t\t_addEventListener = \"addEventListener\";\n\t\t\t\t_rmEventListener  = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_addEventListener = \"attachEvent\";\n\t\t\t\t_rmEventListener  = \"detachEvent\";\n\t\t\t\tprefix            = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tconst addWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_addWheelListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_addWheelListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// Reasonable defaults\n\t\t\tlet PIXEL_STEP         = 10;\n\t\t\tlet LINE_HEIGHT        = 40;\n\t\t\tlet PAGE_HEIGHT        = 800;\n\t\t\t\n\t\t\tfunction normalizeWheel( /*object*/ event ) /*object*/ {\n\t\t\t\tlet sX = 0, sY = 0,       // spinX, spinY\n\t\t\t\t    pX         = 0, pY = 0;       // pixelX, pixelY\n\t\t\t\t\n\t\t\t\t// Legacy\n\t\t\t\tif ( 'detail' in event ) {\n\t\t\t\t\tsY = event.detail;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDelta' in event ) {\n\t\t\t\t\tsY = -event.wheelDelta / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaY' in event ) {\n\t\t\t\t\tsY = -event.wheelDeltaY / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaX' in event ) {\n\t\t\t\t\tsX = -event.wheelDeltaX / 120;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// side scrolling on FF with DOMMouseScroll\n\t\t\t\tif ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n\t\t\t\t\tsX = sY;\n\t\t\t\t\tsY = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpX = sX * PIXEL_STEP;\n\t\t\t\tpY = sY * PIXEL_STEP;\n\t\t\t\t\n\t\t\t\tif ( 'deltaY' in event ) {\n\t\t\t\t\tpY = event.deltaY;\n\t\t\t\t}\n\t\t\t\tif ( 'deltaX' in event ) {\n\t\t\t\t\tpX = event.deltaX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( (pX || pY) && event.deltaMode ) {\n\t\t\t\t\tif ( event.deltaMode == 1 ) {          // delta in LINE units\n\t\t\t\t\t\tpX *= LINE_HEIGHT;\n\t\t\t\t\t\tpY *= LINE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t\telse {                             // delta in PAGE units\n\t\t\t\t\t\tpX *= PAGE_HEIGHT;\n\t\t\t\t\t\tpY *= PAGE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Fall-back if spin cannot be determined\n\t\t\t\tif ( pX && !sX ) {\n\t\t\t\t\tsX = (pX < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\tif ( pY && !sY ) {\n\t\t\t\t\tsY = (pY < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tspinX : sX,\n\t\t\t\t\tspinY : sY,\n\t\t\t\t\tpixelX: pX,\n\t\t\t\t\tpixelY: pY\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tfunction _addWheelListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_addEventListener](prefix + eventName, callback._wheelList = function ( originalEvent ) {\n\t\t\t\t\t!originalEvent && (originalEvent = window.event);\n\t\t\t\t\t\n\t\t\t\t\t// create a normalized event object\n\t\t\t\t\tlet event = {\n\t\t\t\t\t\t// keep a ref to the original event object\n\t\t\t\t\t\toriginalEvent : originalEvent,\n\t\t\t\t\t\ttarget        : originalEvent.target || originalEvent.srcElement,\n\t\t\t\t\t\ttype          : \"wheel\",\n\t\t\t\t\t\tdeltaMode     : originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n\t\t\t\t\t\tdeltaX        : 0,\n\t\t\t\t\t\tdelatZ        : 0,\n\t\t\t\t\t\tpreventDefault: function () {\n\t\t\t\t\t\t\toriginalEvent.preventDefault ?\n\t\t\t\t\t\t\toriginalEvent.preventDefault() :\n\t\t\t\t\t\t\toriginalEvent.returnValue = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnormalized    : normalizeWheel(originalEvent)\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// calculate deltaY (and deltaX) according to the event\n\t\t\t\t\tif ( support == \"mousewheel\" ) {\n\t\t\t\t\t\tevent.deltaY = -1 / 40 * originalEvent.wheelDelta;\n\t\t\t\t\t\t// Webkit also support wheelDeltaX\n\t\t\t\t\t\t//                            originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 *\n\t\t\t\t\t\t// originalEvent.wheelDeltaX );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" && _dom.prefix == \"Moz\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 3;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 100;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY;\n\t\t\t\t\t}\n\t\t\t\t\t//                        if (typeof originalEvent.wheelDeltaY !== 'number')\n\t\t\t\t\t//                            event.wheelDeltaY = originalEvent.deltaY/100;\n\t\t\t\t\t\n\t\t\t\t\t//                        event.wheelDelta = deltaY*120;\n\t\t\t\t\t\n\t\t\t\t\t// it's time to fire the callback\n\t\t\t\t\treturn callback.call(scope || this, event);\n\t\t\t\t\t\n\t\t\t\t}, useCapture || false);\n\t\t\t}\n\t\t\t\n\t\t\treturn addWheelListener;\n\t\t})(window, document),\n\t\trmWheelEvent : isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( addEventListener ) {\n\t\t\t\t_rmEventListener = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_rmEventListener = \"detachEvent\";\n\t\t\t\tprefix           = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tlet rmWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_EventListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_EventListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tfunction _EventListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_rmEventListener](prefix + eventName, callback._wheelList);\n\t\t\t}\n\t\t\t\n\t\t\treturn rmWheelListener;\n\t\t})(window, document),\n\t\t\n\t\t\n\t\t/**\n\t\t * Find the react component that generate element dom node\n\t\t * @param element\n\t\t * @returns {[React.Component]}\n\t\t */\n\t\tfindReactParents( element ) {\n\t\t\tlet fiberNode, comps = [element];\n\t\t\tfor ( const key in element ) {\n\t\t\t\t\n\t\t\t\tif ( key.startsWith('__reactInternalInstance$') ) {\n\t\t\t\t\tfiberNode = element[key];\n\t\t\t\t\twhile ( fiberNode.return ) {\n\t\t\t\t\t\tif ( fiberNode.stateNode && !comps.includes(fiberNode.stateNode) )\n\t\t\t\t\t\t\tcomps.push(fiberNode.stateNode)\n\t\t\t\t\t\tfiberNode = fiberNode.return;\n\t\t\t\t\t}\n\t\t\t\t\treturn comps;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn element.parentNode && this.findReactParents(element.parentNode);\n\t\t}\n\t\t\n\t};\nexport default Dom;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from \"react\";\nimport is    from \"is\";\n\nimport TweenerContext from \"../comps/TweenerContext\";\n\n\nconst SimpleObjectProto = ({}).constructor;\n\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function withTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    opts          = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !(BaseComponent && (BaseComponent.prototype instanceof React.Component || BaseComponent === React.Component)) ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn withTweener(BaseComponent, opts)\n\t\t}\n\t}\n\t\n\tclass TweenerToProps extends React.Component {\n\t\tstatic displayName = (BaseComponent.displayName || BaseComponent.name);\n\t\t\n\t\trender() {\n\t\t\treturn <TweenerContext.Consumer>\n\t\t\t\t{\n\t\t\t\t\ttweener => {\n\t\t\t\t\t\treturn <BaseComponent { ...this.props } tweener={ tweener } ref={ this.props.forwardedRef }/>;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</TweenerContext.Consumer>;\n\t\t}\n\t}\n\t\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenerToProps { ...props } forwardedRef={ ref }/>;\n\t});\n\twithRef.displayName = TweenerToProps.displayName;\n\treturn withRef;\n}\n","/*\n *   The MIT License (MIT)\n *   Copyright (c) 2019. Wise Wild Web\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n *\n *   @author : Nathanael Braun\n *   @contact : n8tz.js@gmail.com\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport is        from \"is\";\nimport PropTypes from \"prop-types\";\nimport React     from 'react';\nimport ReactDom  from \"react-dom\";\nimport domUtils  from \"../utils/dom\";\n\nimport withTweener from \"../spells/withTweener\";\nimport TweenRef    from \"./TweenRef\";\n\n@withTweener\nexport default class Draggable extends React.Component {\n\tstatic propTypes    = {\n\t\txAxis: PropTypes.string,\n\t\tyAxis: PropTypes.string,\n\t};\n\tstatic defaultProps = {\n\t\tComp: 'div',\n\t};\n\tstate               = {};\n\t_                   = {};\n\troot                = React.createRef();\n\t\n\tcomponentWillUnmount() {\n\t\tlet node = this.root?.current;\n\t\tif ( this._.scrollEnabled ) {\n\t\t\tthis._.scrollEnabled = false;\n\t\t\t\n\t\t\t//this._.axes          = undefined;\n\t\t\tnode && this._.dragList && domUtils.removeEvent(node\n\t\t\t\t, this._.dragList)\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis._registerScrollListeners();\n\t}\n\t\n\t/**\n\t * Return scrollable parent node list basing a dom node\n\t * @param node\n\t * @returns {T[]}\n\t */\n\tgetScrollableNodes( node ) {\n\t\tlet scrollable = domUtils.findReactParents(node), _ = this._;\n\t\t\n\t\treturn scrollable.map(\n\t\t\tid => (is.string(id)\n\t\t\t       ? this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]) || this.refs[id] || document.getElementById(id)\n\t\t\t       : id));\n\t}\n\t\n\t/**\n\t * todo rewrite or use lib\n\t * Init touch & scroll listeners\n\t * Drive scroll & drag values updates\n\t * @private\n\t */\n\t_registerScrollListeners() {\n\t\tlet rootNode                  = this.root?.current,\n\t\t    { xAxis, yAxis, tweener } = this.props,\n\t\t    lastStartTm,\n\t\t    cLock, dX,\n\t\t    parents,\n\t\t    dY, parentsState,\n\t\t    _                         = tweener._;\n\t\tif ( rootNode ) {\n\t\t\tdomUtils.addEvent(\n\t\t\t\trootNode, this._.dragList = {\n\t\t\t\t\t'dragstart': ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tlet pTweener,\n\t\t\t\t\t\t    x,\n\t\t\t\t\t\t    y, i, style;\n\t\t\t\t\t\t\n\t\t\t\t\t\tparents      = this.getScrollableNodes(e.target);\n\t\t\t\t\t\t//console.log(\"start\")\n\t\t\t\t\t\tlastStartTm  = Date.now();\n\t\t\t\t\t\tdX           = 0;\n\t\t\t\t\t\tdY           = 0;\n\t\t\t\t\t\tparentsState = [];\n\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\tpTweener = parents[i];\n\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\tif ( pTweener.__isTweener && pTweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\tx = xAxis && pTweener._getAxis(xAxis);\n\t\t\t\t\t\t\t\ty = yAxis && pTweener._getAxis(yAxis);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this._updateNodeInertia()\n\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t//e.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t\t'click'    : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tif ( lastStartTm &&\n\t\t\t\t\t\t\t!((lastStartTm > Date.now() - _.options.maxClickTm) &&\n\t\t\t\t\t\t\t\tMath.abs(dY) < _.options.maxClickOffset &&\n\t\t\t\t\t\t\t\tMath.abs(dX) < _.options.maxClickOffset)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t//console.log(\"prevented click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t//console.log(':o ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//else console.log(\"click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'drag'     : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\n\t\t\t\t\t\tdX = -(descr._lastPos.x - descr._startPos.x);\n\t\t\t\t\t\tdY = -(descr._lastPos.y - descr._startPos.y);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( lastStartTm && ((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY) < _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//console.log(':u ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\txDispatched = !dX;\n\t\t\t\t\t\t\tyDispatched = !dY;\n\t\t\t\t\t\t\tif ( _.options.dragDirectionLock ) {\n\t\t\t\t\t\t\t\tif ( cLock === \"Y\" || !cLock && Math.abs(dY * .5) > Math.abs(dX) ) {\n\t\t\t\t\t\t\t\t\tcLock = \"Y\";\n\t\t\t\t\t\t\t\t\tdX    = 0;\n\t\t\t\t\t\t\t\t\t//xDispatched = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if ( cLock === \"X\" || !cLock && Math.abs(dX * .5) > Math.abs(dY) ) {\n\t\t\t\t\t\t\t\t\tcLock = \"X\";\n\t\t\t\t\t\t\t\t\tdY    = 0;\n\t\t\t\t\t\t\t\t\t//yDispatched = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//console.log(\"drag\", dX, dY, cLock, _.options.dragDirectionLock);\n\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tx = xAxis && tweener._getAxis(xAxis);\n\t\t\t\t\t\t\t\t\ty = yAxis && tweener._getAxis(yAxis);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( !parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\tparentsState[i] = { x: x?.scrollPos, y: y?.scrollPos };\n\t\t\t\t\t\t\t\t\t\tx?.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\ty?.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\txAxis && !x.inertiaFrame && tweener.applyInertia(x, xAxis);\n\t\t\t\t\t\t\t\t\t\tyAxis && !y.inertiaFrame && tweener.applyInertia(y, yAxis);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( x )\n\t\t\t\t\t\t\t\t\t\tdeltaX = dX && (dX / tweener._.box.x) * (x.scrollableWindow || x.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\tif ( y )\n\t\t\t\t\t\t\t\t\t\tdeltaY = dY && (dY / tweener._.box.y) * (y.scrollableWindow || y.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( !xDispatched && deltaX && x?.inertia?.isInbound(parentsState[i].x + deltaX)\n\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(xAxis, deltaX)) ) {\n\t\t\t\t\t\t\t\t\t\tx.inertia.hold(parentsState[i].x + deltaX);\n\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//console.log(\"scrollY\", tweener.isAxisOut(\"scrollY\", parentsState[i].y\n\t\t\t\t\t\t\t\t\t// + deltaY, true));\n\t\t\t\t\t\t\t\t\tif ( !yDispatched && deltaY && y?.inertia?.isInbound(parentsState[i].y + deltaY)\n\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(yAxis, deltaY)) ) {\n\t\t\t\t\t\t\t\t\t\ty.inertia.hold(parentsState[i].y + deltaY);\n\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( yDispatched && xDispatched ) {\n\t\t\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t\t\t//e.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//dX = 0;\n\t\t\t\t\t\t\t//dY = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t,\n\t\t\t\t\t'dropped': ( e, touch, descr ) => {\n\t\t\t\t\t\tlet pTweener,\n\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcLock = undefined;\n\t\t\t\t\t\t//lastStartTm                     = undefined;\n\t\t\t\t\t\t//document.body.style.userSelect  = '';\n\t\t\t\t\t\t//document.body.style.touchAction = '';\n\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\tpTweener = parents[i];\n\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\tif ( pTweener.__isTweener && pTweener._.scrollEnabled && parentsState[i] ) {\n\t\t\t\t\t\t\t\tpTweener._getAxis(xAxis)?.inertia?.release();\n\t\t\t\t\t\t\t\tpTweener._getAxis(yAxis)?.inertia?.release();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//else if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t//\tcState = parentsState[i];\n\t\t\t\t\t\t\t//\tif ( cState ) {\n\t\t\t\t\t\t\t//\t\tcState.inertia.x.release();\n\t\t\t\t\t\t\t//\t\tcState.inertia.y.release();\n\t\t\t\t\t\t\t//\t}\n\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY)\n\t\t\t\t\t\t\t< _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap\n\t\t\t\t\t\t// &\n\t\t\t\t\t\t// click\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t//console.log(\"prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//else {\n\t\t\t\t\t\t//console.log(\"not prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t//}\n\t\t\t\t\t\t//lastStartTm = 0;\n\t\t\t\t\t\tparents = parentsState = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnull,\n\t\t\t\t_.options.enableMouseDrag\n\t\t\t)\n\t\t\tthis._.doRegister = !!rootNode;\n\t\t}\n\t\telse {\n\t\t\tthis._.doRegister = true;\n\t\t}\n\t}\n\t\n\tgetProps() {\n\t\tlet props = this.props;\n\t\tprops     = { ...props };\n\t\tdelete props.Comp;\n\t\tdelete props.xAxis;\n\t\tdelete props.yAxis;\n\t\tdelete props.tweener;\n\t\tdelete props.forwardedRef;\n\t\treturn props;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    Comp,\n\t\t\t    forwardedRef,\n\t\t\t    items = [],\n\t\t    } = this.props;\n\t\tif ( forwardedRef ) {\n\t\t\t//this.root =  forwardedRef;\n\t\t}\n\t\treturn <Comp {...this.getProps()} ref={this.root}>{children}</Comp>;\n\t}\n}\nDraggable.div = ( props ) => {\n\treturn <Draggable {...props}/>;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is from \"is\";\n\nexport const re_cssValueWithUnit = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['box', 'bz', 'bh', 'bw', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\n\n/**\n * add any css val with it unit ( todo: optims&use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssAdd( val1, val2, ...argz ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\tif ( !is.array(val2) )\n\t\tval2 = [val2];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    units2             = val2.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 0;\n\t\tremap[units1[i][2]] += parseFloat(units1[i][1]);\n\t\ti++;\n\t}\n\ti = 0;\n\twhile ( i < units2.length ) {\n\t\tremap[units2[i][2]] = remap[units2[i][2]] || 0;\n\t\tremap[units2[i][2]] += parseFloat(units2[i][1]);\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn argz.length ? cssAdd(result, ...argz) : result;\n}\n\n/**\n * Multiply any css val with it unit ( todo: optims & use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssMult( val1, val ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 1;\n\t\tremap[units1[i][2]] = parseFloat(units1[i][1]) * val;\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn result;\n}\n\nexport function offset( items, start = 0 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom: item.from + start\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function scale( items, duration = 0, withOffset ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\t\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\titems = items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom    : (item.from / iDuration) * duration,\n\t\t\t\tduration: (item.duration / iDuration) * duration\n\t\t\t}\n\t\t)\n\t)\n\treturn withOffset ? offset(items, withOffset) : items\n}\n\nfunction inverseValues( v ) {\n\tif ( is.number(v) )\n\t\treturn -v;\n\tif ( is.object(v) )\n\t\treturn Object.keys(v).reduce(( h, key ) => (h[key] = inverseValues(v[key]), h), {});\n\tif ( is.array(v) )\n\t\treturn v.map(( item ) => (inverseValues(item)));\n\t\n\tlet values = v.split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig);\n\t\n\treturn values.map(\n\t\t( val, i ) => (i % 2 ? -parseFloat(val) : val)\n\t).join(\"\");\n}\n\nexport function reverse( items ) {\n\titems         = is.array(items) ? items : items && [items] || items;\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\treturn items.map(\n\t\titem => {\n\t\t\titem =\n\t\t\t\t{\n\t\t\t\t\t...item,\n\t\t\t\t\tfrom: iDuration - (item.from + item.duration),\n\t\t\t\t\t...(item.apply ? { apply: inverseValues(item.apply) } : undefined)\n\t\t\t\t};\n\t\t\treturn item;\n\t\t}\n\t)\n}\n\nconst MultiCssProps = { \"transform\": true, \"filter\": true, \"textShadow\": true, \"boxShadow\": true }\n\nexport function addCss( target, ...sources ) {\n\tlet source = sources.shift();\n\t\n\tfor ( const key in source ) {\n\t\tif ( !source.hasOwnProperty(key) )\n\t\t\tcontinue;\n\t\t\n\t\tif ( MultiCssProps[key] ) {\n\t\t\tif ( !target[key] ) {\n\t\t\t\ttarget[key] = [];\n\t\t\t}\n\t\t\tif ( !is.array(source[key]) ) {\n\t\t\t\taddCss(target[key], [source[key]]);\n\t\t\t}\n\t\t\telse addCss(target[key], source[key]);\n\t\t}\n\t\telse {\n\t\t\t// adding units\n\t\t\tif ( is.array(source[key]) ) {\n\t\t\t\tif ( !target[key] ) {\n\t\t\t\t\ttarget[key] = [];\n\t\t\t\t}\n\t\t\t\tif ( !is.array(target[key]) ) {\n\t\t\t\t\ttarget[key] = [...source[key], target[key]];\n\t\t\t\t}\n\t\t\t\telse target[key].push(...source[key]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( !target[key] ) {\n\t\t\t\t\tif ( !is.object(source[key]) ) {\n\t\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttarget[key] = { ...source[key] };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if ( is.object(target[key]) && is.object(source[key]) ) {\n\t\t\t\t\taddCss(target[key], source[key]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//else target[key].push(...source[key]);\n\t\t\t\t\ttarget[key] = addAllType(target[key], source[key])\n\t\t\t\t\t//console.log(key, target[key])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\treturn sources.length && addCss(target, ...sources) || target;\n}\n\nfunction addAllType( v1, v2 ) {\n\tif ( !v1 )\n\t\treturn v2;\n\tif ( !v2 )\n\t\treturn v1;\n\tlet values1 = ('' + v1).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    values2 = ('' + v2).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    r       = values1.map(\n\t\t    ( val, i ) => (i % 2 ? parseFloat(val) + parseFloat(values2[i] || 0) : val)\n\t    ).filter(i => (i !== ''));\n\t\n\treturn r.length === 1 ? parseInt(r[0]) : r.join(\"\")\n}\n\nexport function extractCss( items, inverse ) {\n\tlet css = {};\n\titems   = is.array(items) ? items : items && [items] || items;\n\titems.forEach(\n\t\titem => {\n\t\t\taddCss(css, item.apply)\n\t\t}\n\t);\n\tif ( inverse )\n\t\tcss = inverseValues(css);\n\t\n\t\n\t//if ( inverse && css.hasOwnProperty('opacity') )\n\t//\tcss.opacity -= 1;\n\treturn css;\n}\n\nexport function target( items, target ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\ttarget\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function shiftTransforms( items, shift = 1 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => {\n\t\t\tlet t = item.apply && item.apply.transform;\n\t\t\tif ( t ) {\n\t\t\t\tt = is.array(t) ? t : [t];\n\t\t\t\tfor ( let i = 0; i < shift; i++ )\n\t\t\t\t\tt.unshift({});\n\t\t\t\t\n\t\t\t\titem = { ...item, apply: { ...item.apply, transform: t } };\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t)\n}","/* This is a virtual file generated by layer-pack */\nlet req, _exports = {}, walknSetExport=require('layer-pack/etc/utils/indexUtils.js').walknSetExport;\nconst _react_voodoo_utils_css_demux_filter_js = require(\"react-voodoo/utils/css/demux/filter.js\");\nwalknSetExport(_exports, \"filter\", _react_voodoo_utils_css_demux_filter_js);\nconst _react_voodoo_utils_css_demux_boxShadow_js = require(\"react-voodoo/utils/css/demux/boxShadow.js\");\nwalknSetExport(_exports, \"boxShadow\", _react_voodoo_utils_css_demux_boxShadow_js);\nconst _react_voodoo_utils_css_demux_transform_js = require(\"react-voodoo/utils/css/demux/transform.js\");\nwalknSetExport(_exports, \"transform\", _react_voodoo_utils_css_demux_transform_js);\nconst _react_voodoo_utils_css_demux_textShadow_js = require(\"react-voodoo/utils/css/demux/textShadow.js\");\nwalknSetExport(_exports, \"textShadow\", _react_voodoo_utils_css_demux_textShadow_js);\nconst _react_voodoo_utils_css_demux_backgroundColor_js = require(\"react-voodoo/utils/css/demux/backgroundColor.js\");\nwalknSetExport(_exports, \"backgroundColor\", _react_voodoo_utils_css_demux_backgroundColor_js);\n\nexport const backgroundColor = _exports.backgroundColor;\n\nexport const boxShadow = _exports.boxShadow;\n\nexport const filter = _exports.filter;\n\nexport const textShadow = _exports.textShadow;\n\nexport const transform = _exports.transform;\nexport default _exports;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport {addCss}                                                           from \"../tweenTools\";\nimport {expandShorthandProperty, isShorthandProperty, isValidDeclaration} from \"./cssUtils\";\nimport cssDemuxers                                                        from \"./demux/(*).js\";\n\nimport {int, multi, number, ratio} from \"./demux/typed/(*).js\";\n\nconst cssDemux = {\n\t...cssDemuxers,\n\theight         : number,\n\twidth          : number,\n\ttop            : number,\n\tleft           : number,\n\tright          : number,\n\tbottom         : number,\n\tmarginTop      : number,\n\tmarginLeft     : number,\n\tmarginRight    : number,\n\tmarginBottom   : number,\n\tpaddingTop     : number,\n\tpaddingLeft    : number,\n\tpaddingRight   : number,\n\tpaddingBottom  : number,\n\tborderRadius   : number,\n\ttransformOrigin: multi(2),\n\tzIndex         : int,\n\topacity        : ratio,\n};\n\n\nexport function clearTweenableValue( cssKey, twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tcssDemux[path[0]]\n\t&& cssDemux[path[0]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n}\n\nexport function muxToCss( tweenable, css, demuxers, data, box ) {\n\tObject.keys(demuxers)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      demuxers[key].demux(key, tweenable, css, data, box)\n\t\t      }\n\t      )\n}\n\nexport function deMuxTween( tween, deMuxedTween, initials, data, demuxers, noPropLock, reOrder ) {\n\tlet fTween = {}, excluded = {};\n\tObject.keys(tween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] )\n\t\t\t\t      fTween[key] = tween[key];\n\t\t\t      else if ( isValidDeclaration(key, tween[key]) ) {\n\t\t\t\t      if ( isShorthandProperty(key) ) {\n\t\t\t\t\t      expandShorthandProperty(key, tween[key], fTween);\n\t\t\t\t      }\n\t\t\t\t      else fTween[key] = tween[key];\n\t\t\t      }\n\t\t\t      else excluded[key] = tween[key];\n\t\t      });\n\t\n\tObject.keys(fTween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] ) {//key, value, target, data, initials\n\t\t\t\t      (demuxers[key] = cssDemux[key]).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t\t      }\n\t\t\t      else\n\t\t\t\t      (demuxers[key] = number).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t      }\n\t      );\n\treturn excluded;\n}\n\nexport function deMuxLine( tweenLine, initials, data, demuxers, noPropLock ) {\n\tnoPropLock       = noPropLock && {};\n\tlet allPropsById = {},\n\t    twAxis       = tweenLine.reduce(\n\t\t    ( line, tween ) => {\n\t\t\t    let demuxedTween       = {};\n\t\t\t    demuxers[tween.target] = demuxers[tween.target] || {};\n\t\t\t    initials[tween.target] = initials[tween.target] || {};\n\t\t\t    data[tween.target]     = data[tween.target] || {};\n\t\t\t\n\t\t\t    if ( !tween.type || tween.type === \"Tween\" ) {\n\t\t\t\t    !noPropLock && addCss(allPropsById[tween.target] = allPropsById[tween.target] || {}, tween.apply);\n\t\t\t\t    //console.log(\"merged\", tween.apply)\n\t\t\t\t    deMuxTween(tween.apply, demuxedTween, initials[tween.target], data[tween.target], demuxers[tween.target], true);\n\t\t\t\t    line.push(\n\t\t\t\t\t    {\n\t\t\t\t\t\t    ...tween,\n\t\t\t\t\t\t    apply: demuxedTween\n\t\t\t\t\t    });\n\t\t\t    }\n\t\t\t    else line.push({ ...tween });\n\t\t\t    return line\n\t\t    },\n\t\t    []\n\t    );\n\t//console.log(allPropsById)\n\t!noPropLock && Object.keys(allPropsById)\n\t                     .forEach(\n\t\t                     id => deMuxTween(allPropsById[id], {}, {}, data[id], demuxers[id])\n\t                     )\n\t;\n\treturn twAxis;\n}","/*\r\n *\r\n * Copyright (C) 2019 Nathanael Braun\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport is        from \"is\";\r\nimport tweenAxis from \"tween-axis\";\r\n//export default tweenAxis\r\nconst recyclableTweenAxis = [];\r\nexport default class CssTweenAxis extends tweenAxis {\r\n\t\r\n\tconstructor( cfg, scope ) {\r\n\t\tif ( recyclableTweenAxis.length ) {\r\n\t\t\tlet recyled   = recyclableTweenAxis.pop();\r\n\t\t\trecyled.scope = scope;\r\n\t\t\tif ( is.array(cfg) ) {\r\n\t\t\t\trecyled.localLength = 1;\r\n\t\t\t\trecyled.mount(cfg, scope);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ( cfg.TweenAxis )\r\n\t\t\t\t\trecyled.mount(cfg.TweenAxis, scope);\r\n\t\t\t}\r\n\t\t\treturn recyled;\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t}\r\n\t\r\n\tdestroy() {\r\n\t\t\r\n\t\tthis.scope                  = undefined;\r\n\t\tthis.__marks.length         = 0;\r\n\t\tthis.__marksLength.length   = 0;\r\n\t\tthis.__marksKeys.length     = 0;\r\n\t\tthis.__processors.length    = 0;\r\n\t\tthis.__config.length        = 0;\r\n\t\tthis.__activeForks.length   = 0;\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\t\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\tthis.__outgoing.length      = 0;\r\n\t\tthis.__incoming.length      = 0;\r\n\t\tthis.__cPos                 = 0;\r\n\t\tthis.duration               = 0;\r\n\t\tthis.__cIndex               = 0;\r\n\t\tthis.__cMaxKey              = 1;\r\n\t\trecyclableTweenAxis.push(this);\r\n\t}\r\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst\n\tis       = require('is'),\n\teasingFn = require('d3-ease'),\n\tsignOf   = function sign( x ) {\n\t\treturn typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? x : NaN : NaN;\n\t},\n\tabs      = Math.abs,\n\tfloor    = Math.floor,\n\tround    = Math.round,\n\tmin      = Math.min,\n\tmax      = Math.max,\n\tfloatCut = ( v = 0 ) => v.toFixed(3),\n\t\n\tconsts   = {\n\t\tvelocityResetTm: 150,\n\t\tclickTm        : 250\n\t};\n\n// this is a mess\n\n\n/**\n * Predict the inertia\n * @param _\n */\nexport function applyInertia( _ ) {\n\tlet velSign = signOf(_.lastVelocity);\n\t\n\tif ( _.disabled ) {\n\t\t// calc momentum distance...\n\t\t// get nb loop needed to get vel < .05\n\t\t_.loopsTarget = 0;\n\t\t\n\t\t// get velocity sum basing on nb loops needed\n\t\t_.loopsVelSum    = 0;\n\t\t// deduce real dist of momentum\n\t\t_.targetDist     = 0;\n\t\t_.targetDuration = 0;\n\t}\n\telse {\n\t\t// get nb loop needed to get vel < .05\n\t\t_.loopsTarget = floor(Math.log(.05 / abs(_.lastVelocity)) / Math.log(.9));\n\t\t\n\t\t// get velocity sum basing on nb loops needed\n\t\t_.loopsVelSum    = (Math.pow(.9, _.loopsTarget) - abs(_.lastVelocity)) / (.9 - 1);\n\t\t// deduce real dist of momentum\n\t\t_.targetDist     = (_.loopsVelSum * _.refFPS * velSign) / 1000 || 0;\n\t\t_.targetDuration = abs(_.loopsTarget * _.refFPS * velSign) || 0;\n\t}\n\t\n}\n\nconst inertiaByNode = {\n\tnodes  : [],\n\tinertia: []\n};\n/**\n * Main inertia class\n * @class Caipi slideshow\n * @type {module.exports}\n */\nexport default class Inertia {\n\tstatic config = {\n\t\tbounds      : true,\n\t\tsnapToBounds: true\n\t};\n\t\n\tconstructor( opt ) {\n\t\tlet _  = this._ = {};\n\t\t_.conf = {\n\t\t\t...this.constructor.config,\n\t\t\t...opt,\n\t\t\t//get lastInertiaPos() {\n\t\t\t//\treturn this._lastInertiaPos\n\t\t\t//},\n\t\t\t//set lastInertiaPos( v ) {\n\t\t\t//\tif ( v === NaN )\n\t\t\t//\t\tdebugger\n\t\t\t//\tthis._lastInertiaPos = v;\n\t\t\t//}\n\t\t};\n\t\t\n\t\tthis.active           = false;\n\t\t_.pos                 = opt.value || 0;\n\t\t_.refFPS              = 16;\n\t\t_.min                 = opt.min || 0;\n\t\t_.max                 = opt.max || 0;\n\t\t_.currentStop         = 0;\n\t\t_.lastInertiaPos      = 0;\n\t\t_.stops               = _.conf.stops;\n\t\t_.disabled            = _.conf.disabled;\n\t\t_.wayPoints           = _.conf.wayPoints;\n\t\t_.inertiaFn           = easingFn.easePolyOut;\n\t\t_.targetWayPointIndex = 0;\n\t\t\n\t\tthis._detectCurrentSnap()\n\t\t\n\t}\n\t\n\tupdate( at = Date.now() ) {\n\t\tlet _   = this._, nextValue, loop;\n\t\tlet\n\t\t\tpos = _.inertiaFn((at - _.inertiaStartTm) / _.targetDuration) * _.targetDist;\n\t\t\n\t\tif ( !_.inertia ) {\n\t\t\t//if ( _.conf.shouldLoop ) {\n\t\t\t//\twhile ( (loop = _.conf.shouldLoop(_.pos, 0)) ) {\n\t\t\t//\t\tthis.teleport(loop);\n\t\t\t//\t}\n\t\t\t//}\n\t\t\treturn _.pos;\n\t\t}\n\t\tlet\n\t\t\tdelta        = pos - _.lastInertiaPos;\n\t\t_.lastInertiaPos = pos;\n\t\t\n\t\tif ( (at - _.inertiaStartTm) >= _.targetDuration ) {\n\t\t\t_.inertia        = this.active = false;\n\t\t\t_.lastInertiaPos = delta = 0;\n\t\t\t_.targetDist     = 0;\n\t\t\tif ( _.targetWayPoint ) {\n\t\t\t\tdelta                  = _.targetWayPoint.at - _.pos;\n\t\t\t\t//console.log(\"snap done \", _.targetWayPoint, _.pos + delta);\n\t\t\t\t_.currentWayPoint      = _.targetWayPoint;\n\t\t\t\t_.currentWayPointIndex = _.targetWayPointIndex;\n\t\t\t\t_.targetWayPoint       = null;\n\t\t\t\t_.targetWayPointIndex  = null;\n\t\t\t\t//_.lastSnapTm           = Date.now();\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.onInertiaEnd ) {\n\t\t\t\t_.conf.onInertiaEnd(_.pos, _.currentWayPoint)\n\t\t\t}\n\t\t}\n\t\t\n\t\tdelta     = delta || 0;\n\t\t//console.log(_.pos + delta);\n\t\tnextValue = _.pos + delta;\n\t\t\n\t\tif ( delta && _.conf.shouldLoop ) {\n\t\t\t\n\t\t\twhile ( (loop = _.conf.shouldLoop(nextValue, delta)) ) {\n\t\t\t\t//console.warn(\"loop update\", loop);\n\t\t\t\tnextValue += loop;\n\t\t\t\t//this.teleport(loop);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = nextValue;\n\t\t\n\t\treturn nextValue;\n\t}\n\t\n\tsetPos( pos ) {\n\t\tlet _            = this._, nextValue;\n\t\t_.inertia        = false;\n\t\tthis.active      = false;\n\t\t_.lastInertiaPos = 0;\n\t\t_.targetDist     = 0;\n\t\t_.pos            = pos;\n\t\tif ( _.conf.bounds ) {\n\t\t\t_.pos = max(_.pos, _.min);\n\t\t\t_.pos = min(_.pos, _.max);\n\t\t}\n\t}\n\t\n\tsetWayPoints( wayPoints ) {\n\t\tlet _       = this._, nextValue;\n\t\t_.wayPoints = wayPoints;\n\t\tthis._detectCurrentSnap();\n\t}\n\t\n\tteleport( loopDist ) {\n\t\tlet _ = this._, nextValue;\n\t\tif ( !_.inertia )\n\t\t\treturn _.pos += loopDist;\n\t\t\n\t\t//_.lastInertiaPos += loopDist;\n\t\t_.pos += loopDist\n\t\t//console.log(\"setPos\", _.lastInertiaPos);\n\t}\n\t\n\tdispatch( delta, tm = 500 ) {\n\t\tlet _   = this._,\n\t\t    now = Date.now(),\n\t\t    pos;\n\t\t\n\t\tthis.active = true;\n\t\t\n\t\t// if no inertia has started || if direction has change\n\t\tif ( !_.inertia || signOf(delta) !== signOf(_.targetDist) ) {\n\t\t\t_.inertia        = true;\n\t\t\t_.lastInertiaPos = 0;\n\t\t\t_.inertiaStartTm =\n\t\t\t\t_.inertiaLastTm = now;\n\t\t\t\n\t\t\t_.targetDist     = delta;\n\t\t\t_.targetDuration = tm;\n\t\t}\n\t\telse {\n\t\t\t//_.inertiaStartTm =\n\t\t\t//_.inertiaLastTm = now;\n\t\t\t//_.lastInertiaPos = 0;\n\t\t\t_.targetDist += delta;\n\t\t\t_.targetDuration += tm / 2;\n\t\t}\n\t\t//\n\t\t//if ( _.conf.maxJump ) {\n\t\t//\n\t\t//}\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\tthis._doSnap(signOf(delta), 750)\n\t}\n\t\n\t\n\t_detectCurrentSnap() {\n\t\tlet _   = this._,\n\t\t    pos = _.pos,\n\t\t    i;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( floatCut(_.wayPoints[i].at) === floatCut(pos) ) {\n\t\t\t\t\t_.currentWayPoint      = _.wayPoints[i];\n\t\t\t\t\t_.currentWayPointIndex = i;\n\t\t\t\t\t//console.warn(\"snap set\", i);\n\t\t\t\t\t\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t}\n\t}\n\t\n\t_doSnap( forceSnap, maxDuration = 2000 ) {\n\t\tlet _   = this._,\n\t\t    pos = _.targetDist + (_.pos - (_.lastInertiaPos || 0)),\n\t\t    target,\n\t\t    mid,\n\t\t    i,\n\t\t    i2;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( _.wayPoints[i].at > pos )\n\t\t\t\t\tbreak;\n\t\t\t\n\t\t\tif ( i === _.wayPoints.length ) {\n\t\t\t\ti--\n\t\t\t}\n\t\t\telse if ( i === 0 ) {\n\t\t\t\ti = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmid = _.wayPoints[i - 1].at + (_.wayPoints[i].at - _.wayPoints[i - 1].at) / 2;\n\t\t\t\tif ( forceSnap ) forceSnap < 0 && i--;\n\t\t\t\telse if ( pos < mid ) i--;\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.maxJump && is.number(_.currentWayPointIndex) ) {\n\t\t\t\tlet d = (i - _.currentWayPointIndex);\n\t\t\t\t//console.log('Inertia::_doSnap:154: ', i, d);\n\t\t\t\tif ( abs(d) > _.conf.maxJump ) {\n\t\t\t\t\t//console.log('max: ', i, d);\n\t\t\t\t\ti = _.currentWayPointIndex + signOf(d) * _.conf.maxJump;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = _.wayPoints[i].at;\n\t\t\t\n\t\t\tif ( _.conf.willSnap ) {\n\t\t\t\t_.conf.willSnap(i, _.wayPoints[i]);\n\t\t\t}\n\t\t\t\n\t\t\t_.lastInertiaPos      = _.lastInertiaPos || 0;\n\t\t\ttarget                = target - (_.pos - _.lastInertiaPos);\n\t\t\t_.targetDuration      = max(50, min(maxDuration, abs((_.targetDuration / _.targetDist) * target))) || 0;\n\t\t\t//console.log(\"do snap\", i, target, _.targetDist, _.targetDuration);\n\t\t\t_.targetDist          = target;\n\t\t\t_.targetWayPoint      = _.wayPoints[i];\n\t\t\t_.targetWayPointIndex = i;\n\t\t}\n\t\telse {\n\t\t\ttarget = ~~(_.pos - _.lastInertiaPos);\n\t\t\t\n\t\t\tif ( !_.conf.infinite ) {\n\t\t\t\tif ( target > _.max ) {\n\t\t\t\t\ttarget           = _.max - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t\telse if ( target < _.min ) {\n\t\t\t\t\ttarget           = _.min - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tsetBounds( min, max ) {\n\t\tlet _ = this._;\n\t\t//console.log('Inertia::setBounds:245: ', min, max);\n\t\t_.min = min;\n\t\t_.max = max;\n\t}\n\t\n\tstartMove() {\n\t\tlet _          = this._;\n\t\t_.baseTS       = _.startTS = Date.now() / 1000;\n\t\t_.lastVelocity = _.lastIVelocity = 0;\n\t\t_.lastAccel    = 0;\n\t\t_.posDiff      = 0;\n\t\tthis.active    = true;\n\t\tthis.holding   = true;\n\t\t_.inertia      = false;\n\t}\n\t\n\tisInbound( nextPos ) {\n\t\tlet _     = this._, loop,\n\t\t    delta = _.lastHoldPos !== undefined ? nextPos - _.lastHoldPos : 0,\n\t\t    pos   = (_.targetDist || 0) + (_.pos - (_.lastInertiaPos || 0)) + delta;\n\t\t//if ( _.conf.infinite ) return false;\n\t\t//\n\t\t//if ( _.conf.shouldLoop ) {\n\t\t//\twhile ( (loop = _.conf.shouldLoop(nextValue)) ) {\n\t\t//!(pos >= _.min && pos <= _.max) && console.warn(\"out\", _.pos, pos, delta);\n\t\t//\t\tpos += loop;\n\t\t//\t}\n\t\t//}\n\t\treturn pos >= _.min && pos <= _.max;\n\t}\n\t\n\thold( nextPos ) {\n\t\tlet _     = this._,\n\t\t    delta = _.lastHoldPos !== undefined ? nextPos - _.lastHoldPos : 0,\n\t\t    loop;\n\t\t\n\t\t//_.holding     = true;\n\t\t_.lastHoldPos = nextPos;\n\t\tif ( delta && _.conf.shouldLoop ) {\n\t\t\t//while ( (loop = _.conf.shouldLoop(pos, delta)) ) {\n\t\t\t//\t//console.warn(\"loop\", loop);\n\t\t\t//\tpos += loop;\n\t\t\t//}\n\t\t\twhile ( (loop = _.conf.shouldLoop(_.pos, delta)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\t_.pos += loop;\n\t\t\t}\n\t\t}\n\t\tlet now          = Date.now() / 1000,//e.timeStamp,\n\t\t    sinceLastPos = (now - _.baseTS),\n\t\t    pos          = _.pos + delta,\n\t\t    iVel         = delta / sinceLastPos;\n\t\t\n\t\t//if (is.nan(pos))\n\t\t//\tdebugger\n\t\t//console.log(\"hold\", pos, iVel);\n\t\t_.lastIVelocity       = iVel;\n\t\t_.lastVelocity        = iVel;\n\t\t_.baseTS              = now;\n\t\t_.targetDist          = 0;\n\t\t_.lastInertiaPos      = 0;\n\t\t// clear snap\n\t\t_.targetWayPoint      = undefined;\n\t\t_.targetWayPointIndex = undefined;\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( pos > _.max ) {\n\t\t\t\tpos = _.max// + min((pos - _.max) / 10, 10);\n\t\t\t}\n\t\t\telse if ( pos < _.min ) {\n\t\t\t\tpos = _.min// - min((_.min - pos) / 10, 10);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = pos;\n\t\t\n\t}\n\t\n\trelease() {\n\t\tlet _       = this._,\n\t\t    velSign = signOf(_.lastVelocity);\n\t\t\n\t\tthis.holding = false;\n\t\t\n\t\t// calc momentum distance...\n\t\tapplyInertia(_);\n\t\t\n\t\t_.lastHoldPos = undefined;\n\t\t\n\t\t_.holding = false;\n\t\t\n\t\tif ( _.conf.bounds && _.conf.snapToBounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\t//else {\n\t\tif ( !_.targetDuration )\n\t\t\t_.targetDuration = 50;\n\t\t\n\t\t//console.log(_);\n\t\tthis.active      = true;\n\t\t_.inertia        = true;\n\t\t_.lastInertiaPos = 0;\n\t\t_.inertiaStartTm =\n\t\t\t_.inertiaLastTm = Date.now();\n\t\t//}\n\t\tthis._doSnap(null, 500)\n\t}\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as easingFn                                          from \"d3-ease\";\nimport deepEqual                                              from \"fast-deep-equal\";\nimport is                                                     from \"is\";\nimport React                                                  from \"react\";\nimport ReactDom                                               from \"react-dom\";\nimport TweenerContext                                         from \"../comps/TweenerContext\";\nimport {clearTweenableValue, deMuxLine, deMuxTween, muxToCss} from \"../utils/css\";\nimport tweenAxis                                              from \"../utils/CssTweenAxis\";\nimport domUtils                                               from \"../utils/dom\";\nimport Inertia                                                from '../utils/inertia';\n\n/**\n * @todo : clean & comments\n */\n\n\nlet isBrowserSide           = (new Function(\"try {return this===window;}catch(e){ return false;}\"))(),\n    isArray                 = is.array,\n    _live, lastTm, _running = [];\n\nconst SimpleObjectProto = ({}).constructor;\n\nconst Runner = {\n\trun  : function ( tl, ctx, duration, cb ) {\n\t\tlet apply = ( pos, size ) => tl.go(pos / size, ctx);\n\t\t_running.push({ apply, duration, cpos: 0, cb });\n\t\ttl.go(0, ctx, true);//reset tl\n\t\t\n\t\tif ( !_live ) {\n\t\t\t_live  = true;\n\t\t\tlastTm = Date.now();\n\t\t\t// console.log(\"TL runner On\");\n\t\t\tsetTimeout(this._tick, 16);\n\t\t}\n\t},\n\t_tick: function _tick() {\n\t\tlet i  = 0, o, tm = Date.now(), delta = tm - lastTm;\n\t\tlastTm = tm;\n\t\tfor ( ; i < _running.length; i++ ) {\n\t\t\t_running[i].cpos = Math.min(delta + _running[i].cpos, _running[i].duration);//cpos\n\t\t\t_running[i].apply(\n\t\t\t\t_running[i].cpos, _running[i].duration\n\t\t\t);\n\t\t\t// console.log(\"TL runner \",_running[i][3]);\n\t\t\tif ( _running[i].cpos == _running[i].duration ) {\n\t\t\t\t\n\t\t\t\t_running[i].cb && setTimeout(_running[i].cb);\n\t\t\t\t_running.splice(i, 1), i--;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tif ( _running.length )\n\t\t\tsetTimeout(_tick, 16);\n\t\telse {\n\t\t\t// console.log(\"TL runner Off\");\n\t\t\t_live = false;\n\t\t}\n\t},\n};\n\nclass TweenableComp extends React.Component {\n\t\n\tconstructor( props ) {\n\t\tsuper(...arguments);\n\t\tlet _                 = this._ = {\n\t\t\trefs       : {},\n\t\t\tmuxByTarget: {},\n\t\t};\n\t\t_.box                 = {\n\t\t\tx: 100,\n\t\t\ty: 100,\n\t\t\tz: 800\n\t\t};\n\t\t_._rafLoop            = this._rafLoop.bind(this);\n\t\t_.rootRef             = this.props.forwardedRef || React.createRef();\n\t\tthis.__isTweener      = true;\n\t\t_.options             = { enableMouseScroll: true, ...(props.tweenerOptions || {}) };\n\t\t_.tweenRefCSS         = {};\n\t\t_.tweenRefs           = {};\n\t\t_.tweenRefMaps        = {};\n\t\t_.iMapOrigin          = {};\n\t\t_.tweenRefInitialData = {};\n\t\t_.tweenEnabled        = true;\n\t\t_.tweenRefOrigin      = {};\n\t\t_.tweenRefOriginCss   = {};\n\t\t_.axes                = {};\n\t\t_.muxDataByTarget     = _.muxDataByTarget || {};\n\t\t_.tweenRefDemuxed     = _.tweenRefDemuxed || {};\n\t\t_.tweenRefTargets     = _.tweenRefTargets || [];\n\t\t_.runningAnims        = _.runningAnims || [];\n\t\t\n\t\tisBrowserSide && window.addEventListener(\n\t\t\t\"resize\",\n\t\t\tthis._.onResize = ( e ) => {//@todo\n\t\t\t\tthis._updateBox();\n\t\t\t\tthis._updateTweenRefs();\n\t\t\t\t_.rootRef?.current?.windowDidResize?.(e);\n\t\t\t});\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// -------------------- TweenRefs utils -----------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Register tweenable element\n\t * return its current style\n\t * @param id\n\t * @param iStyle\n\t * @param iMap\n\t * @param pos\n\t * @param noref\n\t * @param mapReset\n\t * @returns {style,ref}\n\t */\n\ttweenRef( id, iStyle = {}, iMap = {}, pos, noref, mapReset ) {// ref initial style\n\t\t\n\t\t\n\t\tlet _            = this._,\n\t\t    tweenableMap = {};\n\t\t\n\t\tlet initials = {};\n\t\tif ( !_.tweenRefs[id] )\n\t\t\t_.tweenRefTargets.push(id);\n\t\t\n\t\t//debugger\n\t\t//console.warn('ref ', id, { ...iMap })\n\t\t\n\t\tif ( _.tweenRefs[id] && (\n\t\t\tmapReset\n\t\t\t|| (_.iMapOrigin[id] !== iMap && !deepEqual(iMap, _.iMapOrigin[id]))\n\t\t\t|| (_.tweenRefOriginCss[id] !== iStyle && !deepEqual(iStyle, _.tweenRefOriginCss[id]))\n\t\t) ) {\n\t\t\t// hot switch initial values\n\t\t\t//console.warn('ref exist & style is !==', id, iStyle,\n\t\t\t//             _.tweenRefOriginCss[id], mapReset)\n\t\t\t_.iMapOrigin[id]        = iMap;\n\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\tiStyle                  = iStyle || {};\n\t\t\tiMap                    = iMap || {};\n\t\t\t\n\t\t\t\n\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id], false, true) };\n\t\t\t\n\t\t\t//console.log(\"update ref\", id)\n\t\t\t\n\t\t\t// minus initial values\n\t\t\tObject.keys(_.tweenRefOrigin[id])\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] -= _.tweenRefOrigin[id][key])\n\t\t\t      );\n\t\t\t// set defaults values in case of\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] = is.number(_.tweenRefMaps[id][key])\n\t\t\t\t                                        ? _.tweenRefMaps[id][key]\n\t\t\t\t                                        : initials[key])\n\t\t\t      );\n\t\t\t// add new initial values\n\t\t\tObject.keys(tweenableMap)\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] += tweenableMap[key])\n\t\t\t      );\n\t\t\t\n\t\t\tObject.keys(_.tweenRefOrigin[id])// unset\n\t\t\t      .forEach(\n\t\t\t\t      key => {\n\t\t\t\t\t      clearTweenableValue(key, key, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t      }\n\t\t\t      );\n\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t\n\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\tthis._updateTweenRef(id, true);\n\t\t}\n\t\telse if ( !_.tweenRefs[id] ) {\n\t\t\t//console.log(\"init ref\", id)\n\t\t\t\n\t\t\t_.iMapOrigin[id] = iMap;\n\t\t\tiStyle           = iStyle || {};\n\t\t\tiMap             = iMap || {};\n\t\t\t\n\t\t\t_.tweenRefs[id]       = true;\n\t\t\t_.muxByTarget[id]     = _.muxByTarget[id] || {};\n\t\t\t_.muxDataByTarget[id] = _.muxDataByTarget[id] || {};\n\t\t\t\n\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\t\n\t\t\t_.tweenRefMaps[id] = _.tweenRefMaps[id] || {};\n\t\t\tif ( _.tweenRefOrigin[id] ) {\n\t\t\t\t//debugger\n\t\t\t\t// minus initial values from axis pre init\n\t\t\t\t//Object.keys(_.tweenRefOrigin[id])\n\t\t\t\t//      .forEach(\n\t\t\t\t//\t      key => (_.tweenRefMaps[id][key] -= _.tweenRefOrigin[id][key])\n\t\t\t\t//      );\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id], false, true) };\n\t\t\t\t\n\t\t\t\t//// set defaults values in case of\n\t\t\t\tObject.keys(initials)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = is.number(_.tweenRefMaps[id][key])\n\t\t\t\t\t                                        ? _.tweenRefMaps[id][key] - initials[key]\n\t\t\t\t\t                                        : 0)\n\t\t\t\t      );\n\t\t\t\t//// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] += tweenableMap[key])\n\t\t\t\t      );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id]) };\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// init / reset or get the tweenable view\n\t\t\t\ttweenableMap = Object.assign({}, initials, tweenableMap || {});\n\t\t\t\t\n\t\t\t\t// set defaults values in case of\n\t\t\t\t// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = (_.tweenRefMaps[id][key] || 0) + tweenableMap[key])\n\t\t\t\t      );\n\t\t\t}\n\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t_.tweenRefCSS[id]    = iStyle;\n\t\t\ttweenableMap         = _.tweenRefMaps[id];\n\t\t\tmuxToCss(tweenableMap, iStyle, _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\t//console.log(\"maj ref\", id)\n\t\t\t\n\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t}\n\t\t//console.log('tweenRef::tweenRef:519: ', id, { ..._.muxDataByTarget[id] }, { ..._.tweenRefCSS[id] });\n\t\tif ( noref )\n\t\t\treturn {\n\t\t\t\tstyle: { ..._.tweenRefCSS[id] }\n\t\t\t};\n\t\telse\n\t\t\treturn {\n\t\t\t\tstyle: { ..._.tweenRefCSS[id] },\n\t\t\t\tref  : node => (_.refs[id] = node)\n\t\t\t};\n\t}\n\t\n\tpreInitRef( id, initials ) {// ref initial style\n\t\n\t}\n\t\n\t/**\n\t * Delete tweenable element\n\t * @param id\n\t */\n\trmTweenRef( id ) {\n\t\tif ( this._.tweenRefs[id] ) {\n\t\t\tthis._.tweenRefTargets.splice(this._.tweenRefTargets.indexOf(id), 1);\n\t\t\tdelete this._.tweenRefs[id];\n\t\t\tdelete this._.muxByTarget[id];\n\t\t\tdelete this._.muxDataByTarget[id];\n\t\t\tdelete this._.iMapOrigin[id];\n\t\t\tdelete this._.tweenRefOrigin[id];\n\t\t\tdelete this._.tweenRefCSS[id];\n\t\t\tdelete this._.tweenRefMaps[id];\n\t\t\tdelete this._.refs[id];\n\t\t}\n\t}\n\t\n\t/**\n\t * Reset tweenRefs\n\t * @param targets\n\t */\n\tresetTweenable( ...targets ) {\n\t\tlet _ = this._;\n\t\ttargets.forEach(\n\t\t\t( t ) => {\n\t\t\t\tthis.tweenRef(t, _.tweenRefOriginCss[t], _.iMapOrigin[t], null, null, true)\n\t\t\t}\n\t\t);\n\t\tthis._updateTweenRefs();\n\t}\n\t\n\t/**\n\t * Update tweenRefs style ( anims & axis will still update the ref )\n\t * @param target\n\t * @param style\n\t * @param postPone\n\t * @returns {*}\n\t */\n\tupdateRefStyle( target, style, postPone ) {\n\t\tlet _ = this._, initials = {}, pureCss;\n\t\tif ( isArray(target) && isArray(style) )\n\t\t\treturn target.map(( m, i ) => this.updateRefStyle(m, style[i], postPone));\n\t\tif ( isArray(target) )\n\t\t\treturn target.map(( m ) => this.updateRefStyle(m, style, postPone));\n\t\t\n\t\t//if ( !this._.tweenRefCSS )\n\t\tpureCss = deMuxTween(style, _.tweenRefMaps[target], initials, _.muxDataByTarget[target], _.muxByTarget[target]);\n\t\tObject.assign(_.tweenRefCSS[target], pureCss);\n\t\tObject.assign(_.tweenRefOriginCss[target], pureCss);\n\t\tmuxToCss(_.tweenRefMaps[target], _.tweenRefCSS[target], _.muxByTarget[target], _.muxDataByTarget[target], _.box);\n\t\tthis._updateTweenRef(target, true);\n\t}\n\t\n\t/**\n\t * Retrieve the tween ref dom node\n\t * @param id\n\t * @returns {*}\n\t */\n\tgetTweenableRef( id ) {\n\t\treturn this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]);\n\t}\n\t\n\t/**\n\t * Get the root dom node of the tweener element\n\t * @returns {*}\n\t */\n\tgetRootNode() {\n\t\treturn this._.rootRef && this.getTweenableRef(this._.rootRef) || ReactDom.findDOMNode(this);\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// -------------------- Pushable anims ------------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Push anims\n\t * @param anim\n\t * @param then\n\t * @param skipInit\n\t * @returns {tweenAxis}\n\t */\n\tpushAnim( anim, then, keepResults = true ) {\n\t\tlet sl,\n\t\t    initial,\n\t\t    _        = this._,\n\t\t    initials = {},\n\t\t    fail;\n\t\t\n\t\tif ( isArray(anim) ) {\n\t\t\tsl = anim;\n\t\t}\n\t\telse {\n\t\t\tsl      = anim.anims;\n\t\t\tinitial = anim.initial;\n\t\t}\n\t\t\n\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\t// tweenLine, initials, data, demuxers\n\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\tsl = new tweenAxis(sl, this._.tweenRefMaps);\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      id => (\n\t\t\t\t\t      this._.tweenRefMaps[id] &&\n\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t      }) || (fail = console.warn(\"react-voodoo : Can't find tween target \", id, \" in \", TweenableComp.displayName) || true)\n\t\t\t\t      )\n\t\t\t      )\n\t\t}\n\t\tif ( fail )\n\t\t\treturn;\n\t\t\n\t\t\n\t\treturn new Promise(\n\t\t\tresolve => {\n\t\t\t\t\n\t\t\t\t// start timer launch @todo\n\t\t\t\tsl.run(this._.tweenRefMaps, () => {\n\t\t\t\t\tlet i = this._.runningAnims.indexOf(sl);\n\t\t\t\t\tif ( i != -1 )\n\t\t\t\t\t\tthis._.runningAnims.splice(i, 1);\n\t\t\t\t\t//console.log( _.muxDataByTarget)\n\t\t\t\t\tObject.keys(initials)// unset\n\t\t\t\t\t      .forEach(\n\t\t\t\t\t\t      id => {\n\t\t\t\t\t\t\t      Object.keys(initials[id])// unset\n\t\t\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t\t\t            // todo\n\t\t\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id], keepResults)\n\t\t\t\t\t\t\t\t            })\n\t\t\t\t\t\t      });\n\t\t\t\t\tsl.destroy();\n\t\t\t\t\tresolve(sl);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis._.runningAnims.push(sl);\n\t\t\t\t\n\t\t\t\tif ( !this._.live ) {\n\t\t\t\t\tthis._.live = true;\n\t\t\t\t\trequestAnimationFrame(this._._rafLoop = this._._rafLoop || this._rafLoop.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t).then(sl => (then && then(sl)));\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * Update tweenRef raw tweened values\n\t * @param id\n\t * @param map\n\t * @param reset\n\t */\n\tapplyTweenState( id, map, reset ) {\n\t\tlet tmap = {}, initials = {};\n\t\tdeMuxTween(map, tmap, initials, this._.muxDataByTarget[id], this._.muxByTarget[id], true)\n\t\tObject.keys(tmap).map(\n\t\t\t( p ) => this._.tweenRefMaps[id][p] = (!reset && this._.tweenRefMaps[id][p] || initials[p]) + tmap[p]\n\t\t);\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// ------------------ Scrollable axes -------------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Will init / update a scrollable axis\n\t * @param axe\n\t * @param _inertia\n\t * @param _scrollableArea\n\t * @param _scrollableBounds\n\t * @param _scrollableWindow\n\t * @param defaultPosition\n\t * @param scrollFirst\n\t * @param reset\n\t */\n\tinitAxis( axe, {\n\t\tinertia         : _inertia,\n\t\tscrollableArea  : _scrollableArea = 0,\n\t\tscrollableBounds: _scrollableBounds,\n\t\tscrollableWindow: _scrollableWindow,\n\t\tdefaultPosition,\n\t\tscrollFirst\n\t}, reset ) {\n\t\t\n\t\tthis.makeScrollable();\n\t\tlet _                = this._,\n\t\t    dim              = _.axes[axe],\n\t\t    scrollableBounds = _scrollableBounds,\n\t\t    scrollPos        = !reset && dim\n\t\t                       ? dim.scrollPos\n\t\t                       : defaultPosition || scrollableBounds && scrollableBounds.min || 0,\n\t\t    scrollableArea   = Math.max(dim && dim.scrollableArea || 0, _scrollableArea),\n\t\t    scrollableWindow = Math.max(dim && dim.scrollableWindow || 0, _scrollableWindow),\n\t\t    targetPos        = dim ? dim.targetPos : scrollPos,\n\t\t    inertia          = (\n\t\t\t    dim ? dim.inertia : new Inertia({// todo mk pure\n\t\t\t\t                                    disabled: !_inertia,\n\t\t\t\t                                    ...(_inertia || {}),\n\t\t\t\t                                    value   : scrollPos\n\t\t\t                                    })),\n\t\t    nextDescr        = {\n\t\t\t    //...(_inertia || {}),\n\t\t\t    scrollFirst,\n\t\t\t    tweenAxis: dim && dim.tweenAxis || [],\n\t\t\t    scrollPos,\n\t\t\t    targetPos,\n\t\t\t    inertia,\n\t\t\t    scrollableWindow,\n\t\t\t    scrollableBounds,\n\t\t\t    scrollableArea\n\t\t    };\n\t\t\n\t\tthis._.axes[axe] = nextDescr;\n\t\t!_inertia && (inertia._.disabled = true);\n\t\t(_inertia) && inertia && (inertia._.wayPoints = _inertia.wayPoints);\n\t\t(_inertia) && inertia && !inertia.active && (inertia._.pos = scrollPos);\n\t\tif ( inertia && scrollableBounds )\n\t\t\tinertia.setBounds?.(scrollableBounds.min, scrollableBounds.max);\n\t\telse\n\t\t\tinertia && inertia.setBounds?.(0, scrollableArea)\n\t}\n\t\n\t_getAxis( axe = \"scrollY\" ) {\n\t\tlet _ = this._;\n\t\t\n\t\t_.axes[axe] = _.axes[axe] || {\n\t\t\ttweenAxis       : [],\n\t\t\tscrollPos       : _.options.initialScrollPos && _.options.initialScrollPos[axe] || 0,\n\t\t\ttargetPos       : 0,\n\t\t\tscrollableWindow: 0,\n\t\t\tscrollableArea  : 0,\n\t\t\tinertia         : new Inertia({\n\t\t\t\t                              value: _.options.initialScrollPos && _.options.initialScrollPos[axe] || 0,\n\t\t\t\t                              ...(_.options.axes && _.options.axes[axe] && _.options.axes[axe].inertia || {})\n\t\t\t                              }),\n\t\t};\n\t\t\n\t\treturn _.axes[axe];\n\t}\n\t\n\t/**\n\t * Return axis infos\n\t */\n\tgetAxisState( axe ) {\n\t\tlet _ = this._, state = {};\n\t\t_.axes && Object.keys(_.axes)\n\t\t                .forEach(\n\t\t\t                axe => (state[axe] = _.axes[axe].targetPos || _.axes[axe].scrollPos)\n\t\t                );\n\t\treturn state;\n\t}\n\t\n\tgetScrollPos( axis = \"scrollY\" ) {\n\t\tlet _ = this._, state = {};\n\t\treturn _.axes[axis] ? _.axes[axis].targetPos || _.axes[axis].scrollPos : 0\n\t}\n\t\n\t/**\n\t * Do scroll an axis\n\t * @param newPos\n\t * @param ms\n\t * @param axe\n\t * @param ease\n\t * @returns {Promise<any | never>}\n\t */\n\tscrollTo( newPos, ms = 0, axe = \"scrollY\", ease ) {\n\t\tlet _ = this._;\n\t\treturn new Promise(\n\t\t\t(( resolve, reject ) => {\n\t\t\t\tif ( _.axes && _.axes[axe] ) {\n\t\t\t\t\tlet oldPos = _.axes[axe].targetPos,\n\t\t\t\t\t    setPos = pos => {\n\t\t\t\t\t\t    //console.log('TweenableComp::setPos:514: ',  newPos,pos, ms, axe);\n\t\t\t\t\t\t    pos                   = (~~(pos * 10000)) / 10000;\n\t\t\t\t\t\t    _.axes[axe].targetPos = _.axes[axe].scrollPos = pos;\n\t\t\t\t\t\t\n\t\t\t\t\t\t    _.axes?.[axe]?.inertia?.setPos(pos);\n\t\t\t\t\t\t    //_.axes[axe].inertia._doSnap()\n\t\t\t\t\t\t    if ( ~~pos !== oldPos )\n\t\t\t\t\t\t\t    _.rootRef?.current?.componentDidScroll?.(~~pos, axe);\n\t\t\t\t\t\t    this._updateTweenRefs()\n\t\t\t\t\t    };\n\t\t\t\t\t\n\t\t\t\t\tnewPos = Math.max(0, newPos);\n\t\t\t\t\tnewPos = Math.min(newPos, _.axes[axe].scrollableArea || 0);\n\t\t\t\t\t\n\t\t\t\t\t_.axes[axe].targetPos = newPos;\n\t\t\t\t\t\n\t\t\t\t\tif ( !ms ) {\n\t\t\t\t\t\t_.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\tsl => sl.goTo(newPos, _.tweenRefMaps)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetPos(newPos);\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._runScrollGoTo(axe, newPos, ms, easingFn[ease], setPos, resolve)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( !_.live ) {\n\t\t\t\t\t\t_.live = true;\n\t\t\t\t\t\trequestAnimationFrame(_._rafLoop);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})).then(\n\t\t\tp => {\n\t\t\t\t_.axes?.[axe]?.inertia?._detectCurrentSnap();\n\t\t\t}\n\t\t)\n\t}\n\t\n\t/**\n\t * Add scrollable tween axis (scrollable anims) to a global axis\n\t * @param anim\n\t * @param axe\n\t * @param size\n\t * @returns {tweenAxis}\n\t */\n\taddScrollableAnim( anim, axe = \"scrollY\", size ) {\n\t\tlet sl,\n\t\t    _        = this._,\n\t\t    initials = {},\n\t\t    muxed    = {},\n\t\t    dim      = this._getAxis(axe);\n\t\t\n\t\tif ( isArray(anim) ) {\n\t\t\tsl = anim;\n\t\t}\n\t\telse {\n\t\t\tsl   = anim.anims;\n\t\t\tsize = anim.length;\n\t\t}\n\t\t\n\t\t//console.warn(\"add scrollable\")\n\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\t//debugger\n\t\t\t//deepExtend(this._.muxDataByTarget, muxed)\n\t\t\t\n\t\t\tsl          = new tweenAxis(sl, _.tweenRefMaps);\n\t\t\tsl.initials = initials;\n\t\t\t//console.log(initials)\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      id => {\n\t\t\t\t\t      _.tweenRefOrigin[id] = _.tweenRefOrigin[id] || {};\n\t\t\t\t\t      //Object.assign(_.tweenRefOrigin[id], {\n\t\t\t\t\t      //    ...initials[id],\n\t\t\t\t\t      //    ..._.tweenRefOrigin[id]\n\t\t\t\t\t      //})\n\t\t\t\t\t\n\t\t\t\t\t      _.tweenRefMaps[id] = _.tweenRefMaps[id] || {};\n\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t      })\n\t\t\t\t      }\n\t\t\t      )\n\t\t}\n\t\t\n\t\t\n\t\tthis.makeScrollable();\n\t\t// init scroll\n\t\tdim.tweenAxis.push(sl);\n\t\tdim.scrollPos      = dim.scrollPos || 0;\n\t\tdim.scrollableArea = dim.scrollableArea || 0;\n\t\tdim.scrollableArea = Math.max(dim.scrollableArea, sl.duration);\n\t\tif ( !dim.scrollableBounds )\n\t\t\tdim.inertia?.setBounds(0, dim.scrollableArea);\n\t\tsl.goTo(dim.scrollPos, this._.tweenRefMaps);\n\t\tthis._updateTweenRefs();\n\t\treturn sl;\n\t}\n\t\n\t/**\n\t * Remove a tweenAxis object from a component scrollable axis\n\t * @param sl\n\t * @param axe\n\t */\n\trmScrollableAnim( sl, axe = \"scrollY\" ) {\n\t\tlet _   = this._, found,\n\t\t    dim = this._getAxis(axe), twAxis;\n\t\tlet i   = dim.tweenAxis.indexOf(sl);\n\t\tif ( i !== -1 ) {\n\t\t\t\n\t\t\t//dim.tweenAxis[i].destroy();\n\t\t\tdim.tweenAxis.splice(i, 1);\n\t\t\tdim.scrollableArea = Math.max(...dim.tweenAxis.map(tl => tl.duration), 0);\n\t\t\tif ( !dim.scrollableBounds )\n\t\t\t\tdim.inertia?.setBounds(0, dim.scrollableArea || 0);\n\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps })\n\t\t\tsl.goTo(0, this._.tweenRefMaps);\n\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps[\"card\"] })\n\t\t\t\n\t\t\tObject.keys(sl.initials)// unset\n\t\t\t      .forEach(\n\t\t\t\t      id => {\n\t\t\t\t\t      Object.keys(sl.initials[id])// unset\n\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t            //debugger\n\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t\t\t\t            //!_.tweenRefCSS[id] &&\n\t\t\t\t\t\t\t            //_.refs[id] && _.refs[id].style && _.refs[id].style[rkey] &&\n\t\t\t\t\t\t\t            // (_.refs[id].style[rkey] = null);\n\t\t\t\t\t\t            })\n\t\t\t\t      });\n\t\t\tdelete sl.initials;\n\t\t\tsl.destroy();\n\t\t\tfound = true;\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\t!found && console.warn(\"TweenAxis not found !\")\n\t}\n\t\n\t\n\t/**\n\t * @private fn to push scrollTo\n\t * @param axe\n\t * @param to\n\t * @param tm\n\t * @param easing\n\t * @param tick\n\t * @param cb\n\t * @private\n\t */\n\t_runScrollGoTo( axe, to, tm, easing = x => x, tick, cb ) {\n\t\tlet from   = this._.axes[axe].scrollPos,\n\t\t    length = to - from;\n\t\t\n\t\t_running.push(\n\t\t\t{\n\t\t\t\tapply   : ( pos, max ) => {\n\t\t\t\t\tlet x = (from + (easing(pos / max)) * length);\n\t\t\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\t\t\t//console.log('TweenableComp::setPos:514: ', x);\n\t\t\t\t\t\tthis._.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\tsl => sl.goTo(x, this._.tweenRefMaps)\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttick && tick(x);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tduration: tm,\n\t\t\t\tcpos    : 0,\n\t\t\t\tcb\n\t\t\t})\n\t\t;\n\t\t\n\t\tif ( !_live ) {\n\t\t\t_live  = true;\n\t\t\tlastTm = Date.now();\n\t\t\t// console.log(\"TL runner On\");\n\t\t\tsetTimeout(Runner._tick, 16);\n\t\t}\n\t}\n\t\n\t/**\n\t * Return scrollable parent node list basing a dom node\n\t * @param node\n\t * @returns {T[]}\n\t */\n\tgetScrollableNodes( node ) {\n\t\tlet scrollable = domUtils.findReactParents(node), _ = this._;\n\t\tscrollable     = _.rootRef &&\n\t\t\t_.rootRef.current &&\n\t\t\t_.rootRef.current.hookScrollableTargets &&\n\t\t\t_.rootRef.current.hookScrollableTargets(scrollable)\n\t\t\t|| scrollable;\n\t\t\n\t\treturn scrollable.map(\n\t\t\tid => (is.string(id)\n\t\t\t       ? this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]) || this.refs[id] || document.getElementById(id)\n\t\t\t       : id));\n\t}\n\t\n\t/**\n\t * Hook to know if the composed element allow scrolling\n\t * @returns {boolean}\n\t */\n\tcomponentShouldScroll() {\n\t\tlet _ = this._;\n\t\treturn _.rootRef &&\n\t\t       _.rootRef.current &&\n\t\t       _.rootRef.current.componentShouldScroll ?\n\t\t       _.rootRef.current.componentShouldScroll(...arguments) : true\n\t}\n\t\n\t/**\n\t * todo rewrite or use lib\n\t * Init touch & scroll listeners\n\t * Drive scroll & drag values updates\n\t * @private\n\t */\n\t_registerScrollListeners() {\n\t\tlet _static = this.constructor,\n\t\t    _       = this._;\n\t\tif ( this._.rendered ) {\n\t\t\tlet rootNode   = this.getRootNode(),\n\t\t\t    debounceTm = 0,\n\t\t\t    debounceTr = 0,\n\t\t\t    scrollLoad = { x: 0, y: 0 },\n\t\t\t    lastScrollEvt;\n\t\t\tif ( !this._parentTweener && isBrowserSide ) {\n\t\t\t\tif ( _.options.enableMouseScroll ) {\n\t\t\t\t\tif ( !rootNode )\n\t\t\t\t\t\tconsole.warn(\"fail registering scroll listener !! \")\n\t\t\t\t\telse\n\t\t\t\t\t\tdomUtils.addWheelEvent(\n\t\t\t\t\t\t\trootNode,\n\t\t\t\t\t\t\tthis._.onScroll = ( e ) => {//@todo\n\t\t\t\t\t\t\t\tlet now       = Date.now(), prevent;\n\t\t\t\t\t\t\t\tscrollLoad.y += e.deltaY;\n\t\t\t\t\t\t\t\tscrollLoad.x += e.deltaX;\n\t\t\t\t\t\t\t\tlastScrollEvt = e.originalEvent;\n\t\t\t\t\t\t\t\tprevent       = this._doDispatch(document.elementFromPoint(lastScrollEvt.clientX, lastScrollEvt.clientY), scrollLoad.x * 5, scrollLoad.y * 5)\n\t\t\t\t\t\t\t\tscrollLoad.y  = 0;\n\t\t\t\t\t\t\t\tscrollLoad.x  = 0;\n\t\t\t\t\t\t\t\tdebounceTm    = 0;\n\t\t\t\t\t\t\t\tdebounceTr    = lastScrollEvt = undefined;\n\t\t\t\t\t\t\t\tif ( prevent ) {\n\t\t\t\t\t\t\t\t\te.originalEvent.stopPropagation();\n\t\t\t\t\t\t\t\t\te.originalEvent.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet lastStartTm,\n\t\t\t\t    cLock, dX,\n\t\t\t\t    parents, dY,\n\t\t\t\t    parentsState;\n\t\t\t\tif ( !rootNode )\n\t\t\t\t\tconsole.warn(\"fail registering drag listener !! \")\n\t\t\t\telse\n\t\t\t\t\tdomUtils.addEvent(\n\t\t\t\t\t\trootNode, this._.dragList = {\n\t\t\t\t\t\t\t'dragstart': ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t    x,\n\t\t\t\t\t\t\t\t    y, i, style;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tparents      = this.getScrollableNodes(e.target);\n\t\t\t\t\t\t\t\t//console.log(\"start\")\n\t\t\t\t\t\t\t\tlastStartTm  = Date.now();\n\t\t\t\t\t\t\t\tdX           = 0;\n\t\t\t\t\t\t\t\tdY           = 0;\n\t\t\t\t\t\t\t\tparentsState = [];\n\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\t\t\tx = tweener._getAxis(\"scrollX\");\n\t\t\t\t\t\t\t\t\t\ty = tweener._getAxis(\"scrollY\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t\tstyle = getComputedStyle(tweener, null);\n\t\t\t\t\t\t\t\t\t\tif ( /(auto|scroll)/.test(\n\t\t\t\t\t\t\t\t\t\t\tstyle.getPropertyValue(\"overflow\")\n\t\t\t\t\t\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-x\")\n\t\t\t\t\t\t\t\t\t\t\t+ style.getPropertyValue(\"overflow-y\")) ) {\n\t\t\t\t\t\t\t\t\t\t\tparentsState[i] = {\n\t\t\t\t\t\t\t\t\t\t\t\ty      : tweener.scrollTop,\n\t\t\t\t\t\t\t\t\t\t\t\tx      : tweener.scrollLeft,\n\t\t\t\t\t\t\t\t\t\t\t\tscrollX: /(auto|scroll)/.test(style.getPropertyValue(\"overflow-x\")),\n\t\t\t\t\t\t\t\t\t\t\t\tscrollY: /(auto|scroll)/.test(style.getPropertyValue(\"overflow-y\"))\n\t\t\t\t\t\t\t\t\t\t\t\t//inertia: this._activateNodeInertia(tweener)\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis._updateNodeInertia()\n\t\t\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t\t\t//e.preventDefault();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'click'    : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY) < _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t//console.log(\"prevented click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t//console.log(':o ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//else console.log(\"click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'drag'     : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdX = -(descr._lastPos.x - descr._startPos.x);\n\t\t\t\t\t\t\t\tdY = -(descr._lastPos.y - descr._startPos.y);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif ( lastStartTm && ((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY) < _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//console.log(':u ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\txDispatched = !dX;\n\t\t\t\t\t\t\t\t\tyDispatched = !dY;\n\t\t\t\t\t\t\t\t\tif ( _.options.dragDirectionLock ) {\n\t\t\t\t\t\t\t\t\t\tif ( cLock === \"Y\" || !cLock && Math.abs(dY * .5) > Math.abs(dX) ) {\n\t\t\t\t\t\t\t\t\t\t\tcLock = \"Y\";\n\t\t\t\t\t\t\t\t\t\t\tdX    = 0;\n\t\t\t\t\t\t\t\t\t\t\t//xDispatched = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if ( cLock === \"X\" || !cLock && Math.abs(dX * .5) > Math.abs(dY) ) {\n\t\t\t\t\t\t\t\t\t\t\tcLock = \"X\";\n\t\t\t\t\t\t\t\t\t\t\tdY    = 0;\n\t\t\t\t\t\t\t\t\t\t\t//yDispatched = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//console.log(\"drag\", dX, dY, cLock, _.options.dragDirectionLock);\n\t\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled ) {\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tx = tweener._getAxis(\"scrollX\");\n\t\t\t\t\t\t\t\t\t\t\ty = tweener._getAxis(\"scrollY\");\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif ( !parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\t\t\tparentsState[i] = { x: x.scrollPos, y: y.scrollPos };\n\t\t\t\t\t\t\t\t\t\t\t\tx.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\t\t\ty.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\t\t\t!x.inertiaFrame && tweener.applyInertia(x, \"scrollX\");\n\t\t\t\t\t\t\t\t\t\t\t\t!y.inertiaFrame && tweener.applyInertia(y, \"scrollY\");\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdeltaX = dX && (dX / tweener._.box.x) * (x.scrollableWindow || x.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\t\tdeltaY = dY && (dY / tweener._.box.y) * (y.scrollableWindow || y.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\t\tif ( !xDispatched && deltaX && x.inertia?.isInbound(parentsState[i].x + deltaX)\n\t\t\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(\"scrollX\", deltaX)) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tx.inertia.hold(parentsState[i].x + deltaX);\n\t\t\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t//console.log(\"scrollY\", tweener.isAxisOut(\"scrollY\", parentsState[i].y\n\t\t\t\t\t\t\t\t\t\t\t// + deltaY, true));\n\t\t\t\t\t\t\t\t\t\t\tif ( !yDispatched && deltaY && y.inertia?.isInbound(parentsState[i].y + deltaY)\n\t\t\t\t\t\t\t\t\t\t\t\t&& (tweener.componentShouldScroll(\"scrollY\", deltaY)) ) {\n\t\t\t\t\t\t\t\t\t\t\t\ty.inertia.hold(parentsState[i].y + deltaY);\n\t\t\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t\t\tcState = parentsState[i];\n\t\t\t\t\t\t\t\t\t\t\tif ( cState ) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( !yDispatched &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tcState.scrollY &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t((dY < 0 && tweener.scrollTop !== 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(dY > 0 && tweener.scrollTop !== (tweener.scrollHeight - tweener.clientHeight)))\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.lastY = cState.y + dY;\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 top: cState.y + dY,\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //left    : undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //behavior: 'smooth'\n\t\t\t\t\t\t\t\t\t\t\t\t\t//                 })\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.dispatchEvent(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.inertia.y.hold(cState.y + dY)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTop = cState.y + dY;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( _.options.dragDirectionLock && cLock === \"Y\" )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if ( !_.options.dragDirectionLock ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t\t\t\t\t\t\t\tif ( !xDispatched &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tcState.scrollX &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t((dX < 0 && tweener.scrollLeft !== 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(dX > 0 && tweener.scrollLeft !== (tweener.scrollWidth - tweener.clientWidth)))\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.lastX = cState.x + dX;\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 left: cState.x + dX,\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\t                 //behavior: 'smooth'\n\t\t\t\t\t\t\t\t\t\t\t\t\t//                 })\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.dispatchEvent(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollTo(style.x + dX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//cState.inertia.x.hold(cState.x + dX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//tweener.scrollLeft = cState.x + dX;\n\t\t\t\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( yDispatched && xDispatched ) {\n\t\t\t\t\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t//e.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//dX = 0;\n\t\t\t\t\t\t\t\t\t//dY = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t,\n\t\t\t\t\t\t\t'dropped': ( e, touch, descr ) => {\n\t\t\t\t\t\t\t\tlet tweener,\n\t\t\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tcLock = undefined;\n\t\t\t\t\t\t\t\t//lastStartTm                     = undefined;\n\t\t\t\t\t\t\t\t//document.body.style.userSelect  = '';\n\t\t\t\t\t\t\t\t//document.body.style.touchAction = '';\n\t\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\t\ttweener = parents[i];\n\t\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\t\tif ( tweener.__isTweener && tweener._.scrollEnabled && parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\ttweener._getAxis(\"scrollY\").inertia?.release();\n\t\t\t\t\t\t\t\t\t\ttweener._getAxis(\"scrollX\").inertia?.release();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//else if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t\t\t//\tcState = parentsState[i];\n\t\t\t\t\t\t\t\t\t//\tif ( cState ) {\n\t\t\t\t\t\t\t\t\t//\t\tcState.inertia.x.release();\n\t\t\t\t\t\t\t\t\t//\t\tcState.inertia.y.release();\n\t\t\t\t\t\t\t\t\t//\t}\n\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY)\n\t\t\t\t\t\t\t\t\t< _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap\n\t\t\t\t\t\t\t\t// &\n\t\t\t\t\t\t\t\t// click\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\te.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t\t//console.log(\"prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//else {\n\t\t\t\t\t\t\t\t//console.log(\"not prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t//lastStartTm = 0;\n\t\t\t\t\t\t\t\tparents = parentsState = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t_.options.enableMouseDrag\n\t\t\t\t\t)\n\t\t\t}\n\t\t\tthis._.doRegister = !!rootNode;\n\t\t}\n\t\telse {\n\t\t\tthis._.doRegister = true;\n\t\t}\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// --------------- Inertia & scroll modifiers -----------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Retrieve updates from an axis inertia & apply them\n\t * @param dim\n\t * @param axe\n\t */\n\tapplyInertia( dim, axe ) {\n\t\tlet x = dim.inertia.update(), _ = this._;\n\t\t\n\t\tthis._.axes[axe].tweenAxis.forEach(\n\t\t\tsl => {\n\t\t\t\tthis._.axes[axe].targetPos = this._.axes[axe].scrollPos = x;\n\t\t\t\tsl.goTo(x, this._.tweenRefMaps)\n\t\t\t}\n\t\t);\n\t\t//console.log(\"scroll at \" + x, axe, dim.inertia.active || dim.inertia.holding);\n\t\t//this.scrollTo(x, 0, axe);\n\t\t_.rootRef?.current?.componentDidScroll?.(x, axe);\n\t\tthis._updateTweenRefs()\n\t\tif ( dim.inertia.active || dim.inertia.holding ) {\n\t\t\tdim.inertiaFrame = setTimeout(this.applyInertia.bind(this, dim, axe), 33);\n\t\t}\n\t\telse {\n\t\t\tdim.inertiaFrame = null;\n\t\t\t//console.log(\"complete\");\n\t\t}\n\t}\n\t\n\t/**\n\t * Return true if at least 1 of this tweener axis have it's inertia active\n\t * @returns {boolean}\n\t */\n\tisInertiaActive() {//todo\n\t\tlet _ = this._, active = false;\n\t\t_.axes &&\n\t\tObject.keys(_.axes)\n\t\t      .forEach(\n\t\t\t      axe => (active = active || _.axes[axe] && _.axes[axe].inertia.active)\n\t\t      );\n\t\treturn active;\n\t}\n\t\n\tdispatchScroll( delta, axe = \"scrollY\" ) {\n\t\tlet prevent,\n\t\t    dim    = this._.axes[axe],\n\t\t    oldPos = dim && dim.scrollPos,\n\t\t    newPos = oldPos + delta;\n\t\t\n\t\tif ( dim && oldPos !== newPos ) {\n\t\t\t\n\t\t\tdim.inertia.dispatch(delta, 100);\n\t\t\t!dim.inertiaFrame && this.applyInertia(dim, axe);\n\t\t\t\n\t\t}\n\t\t\n\t\treturn prevent;\n\t}\n\t\n\tisAxisOut( axis, v, abs ) {\n\t\tlet _   = this._,\n\t\t    dim = _.axes && _.axes[axis],\n\t\t    pos = abs ? v : dim && (dim.scrollPos + v);\n\t\t\n\t\tpos = pos && Math.round(pos);\n\t\t\n\t\treturn !dim\n\t\t\t|| (\n\t\t\t\tdim.scrollableBounds\n\t\t\t\t?\n\t\t\t\t(pos <= dim.scrollableBounds.min || pos >= dim.scrollableBounds.max)\n\t\t\t\t:\n\t\t\t\t(pos <= 0 || pos >= dim.scrollableArea)\n\t\t\t);\n\t}\n\t\n\t_doDispatch( target, dx, dy, holding ) {\n\t\tlet style,\n\t\t    Comps,\n\t\t    headTarget = target,\n\t\t    nodeInertia,\n\t\t    i;\n\t\t\n\t\t// check if there scrollable stuff in dom targets\n\t\t// get all the parents components & dom node of an dom element ( from fibers )\n\t\t\n\t\tComps = this.getScrollableNodes(headTarget);\n\t\t//console.log(\"dispatching \", dx, dy, Comps);\n\t\tfor ( i = 0; i < Comps.length; i++ ) {\n\t\t\t// react comp with tweener support\n\t\t\tif ( Comps[i].__isTweener ) {\n\t\t\t\t//debugger\n\t\t\t\t//console.log(Comps[i], dx, dy, Comps[i].isAxisOut(\"scrollX\", dx), Comps[i].isAxisOut(\"scrollY\",\n\t\t\t\t// dy));\n\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollX\", dx) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollX\", dx)) ) {\n\t\t\t\t\tComps[i].dispatchScroll(dx, \"scrollX\", holding);\n\t\t\t\t\tdx = 0;\n\t\t\t\t}\n\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollY\", dy) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollY\", dy)) ) {\n\t\t\t\t\tComps[i].dispatchScroll(dy, \"scrollY\", holding);\n\t\t\t\t\tdy = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// dom element\n\t\t\telse if ( is.element(Comps[i]) ) {\n\t\t\t\tstyle = getComputedStyle(Comps[i], null)\n\t\t\t\tif ( /(auto|scroll)/.test(\n\t\t\t\t\tstyle.getPropertyValue(\"overflow\")\n\t\t\t\t\t+ style.getPropertyValue(\"overflow-x\")\n\t\t\t\t\t+ style.getPropertyValue(\"overflow-y\")\n\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(dy < 0 && Comps[i].scrollTop !== 0)\n\t\t\t\t\t\t||\n\t\t\t\t\t\t(dy > 0 && Comps[i].scrollTop !== (Comps[i].scrollHeight - Comps[i].clientHeight))\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\t//nodeInertia.y.dispatch(dy * 10)\n\t\t\t\t\t\t//dy = 0;\n\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t//if ( nodeInertia.x.isOutbound(dx) ) {\n\t\t\t\t\t//\tnodeInertia.x.dispatch(dx * 10)\n\t\t\t\t\t//\tdx = 0;\n\t\t\t\t\t//} // let the node do this scroll\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//headTarget = headTarget.parentNode;\n\t\t\t\t//if ( headTarget === document || headTarget === target )\n\t\t\t\t//\tbreak;\n\t\t\t}\n\t\t\tif ( !dx && !dy )\n\t\t\t\tbreak;\n\t\t}\n\t\tthis._updateNodeInertia();\n\t\tif ( !dx && !dy )\n\t\t\treturn true;\n\t}\n\t\n\t_activateNodeInertia( node ) {\n\t\tlet _ = this._,\n\t\t    i = _.activeInertia.findIndex(item => (item.target === node));\n\t\tif ( i === -1 ) {\n\t\t\t_.activeInertia.push(\n\t\t\t\t{\n\t\t\t\t\tinertia: {\n\t\t\t\t\t\tx: new Inertia({ max: node.scrollWidth - node.offsetLeft, value: node.scrollLeft }),\n\t\t\t\t\t\ty: new Inertia({ max: node.scrollHeight - node.offsetHeight, value: node.scrollTop })\n\t\t\t\t\t},\n\t\t\t\t\ttarget : node\n\t\t\t\t});\n\t\t\ti = _.activeInertia.length - 1;\n\t\t}\n\t\treturn _.activeInertia[i].inertia;\n\t\t\n\t}\n\t\n\t_updateNodeInertia = () => {\n\t\tlet _ = this._, current, ln = _.activeInertia.length;\n\t\t\n\t\tif ( this._inertiaRaf )\n\t\t\tcancelAnimationFrame(this._inertiaRaf);\n\t\t\n\t\tfor ( let i = 0; ln > i; i++ ) {\n\t\t\tcurrent = _.activeInertia[i];\n\t\t\tif ( current.inertia.x.active || current.inertia.x.holding ) {\n\t\t\t\tcurrent.target.scrollLeft = ~~current.inertia.x.update()\n\t\t\t}\n\t\t\tif ( current.inertia.y.active || current.inertia.y.holding ) {\n\t\t\t\tcurrent.target.scrollTop = ~~current.inertia.y.update()\n\t\t\t}\n\t\t\t\n\t\t\tif ( !current.inertia.x.active && !current.inertia.y.active && !current.inertia.x.holding && !current.inertia.y.holding ) {\n\t\t\t\t_.activeInertia.slice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tln--;\n\t\t\t}\n\t\t}\n\t\tif ( ln !== 0 )\n\t\t\tthis._inertiaRaf = requestAnimationFrame(this._updateNodeInertia)\n\t\telse this._inertiaRaf = null;\n\t}\n\t\n\t\n\t// ------------------------------------------------------------\n\t// --------------- Initialization & drawers -------------------\n\t// ------------------------------------------------------------\n\t\n\tsetRootRef( id ) {\n\t\tthis._.rootRef = id;\n\t}\n\t\n\tmakeScrollable() {\n\t\tif ( !this._.scrollEnabled ) {\n\t\t\tthis._.scrollEnabled = true;\n\t\t\tthis._.scrollHook    = [];\n\t\t\tthis._.activeInertia = [];\n\t\t\tthis._registerScrollListeners();\n\t\t}\n\t}\n\t\n\t_updateBox() {\n\t\tlet node = this.getRootNode();\n\t\tif ( node ) {\n\t\t\tthis._.box.inited = true;\n\t\t\tthis._.box.x      = node.offsetWidth;\n\t\t\tthis._.box.y      = node.offsetHeight;\n\t\t}\n\t}\n\t\n\t_rafLoop() {\n\t\tthis._updateTweenRefs();\n\t\tif ( this._.runningAnims.length ) {\n\t\t\trequestAnimationFrame(this._._rafLoop);\n\t\t}\n\t\telse {\n\t\t\t//this._.live && console.log(\"RAF off\", this.constructor.displayName);\n\t\t\tthis._.live = false;\n\t\t}\n\t}\n\t\n\t_updateTweenRefs() {\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tfor ( let i = 0, target, node, style; i < this._.tweenRefTargets.length; i++ ) {\n\t\t\t\ttarget = this._.tweenRefTargets[i];\n\t\t\t\tstyle  = this._updateTweenRef(target);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_swap = {};\n\t\n\t_updateTweenRef( target, force ) {\n\t\tlet node, swap = this._swap, changes;\n\t\tthis._.tweenRefCSS[target] &&\n\t\tmuxToCss(this._.tweenRefMaps[target], swap, this._.muxByTarget[target], this._.muxDataByTarget[target], this._.box);\n\t\tnode = this.getTweenableRef(target);\n\t\tif ( node ) {\n\t\t\tfor ( let o in this._.tweenRefCSS[target] )\n\t\t\t\tif ( swap[o] === undefined ) {\n\t\t\t\t\tnode.style[o] = this._.tweenRefCSS[target][o];\n\t\t\t\t\t//\t\tnode.style[o] = null;\n\t\t\t\t\t//\t\tdelete this._.tweenRefCSS[target][o];\n\t\t\t\t}\n\t\t\tfor ( let o in swap )\n\t\t\t\tif ( this._.tweenRefCSS[target].hasOwnProperty(o) ) {\n\t\t\t\t\tif ( force || swap[o] !== this._.tweenRefCSS[target][o] ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tnode.style[o] = this._.tweenRefCSS[target][o] = swap[o];\n\t\t\t\t\t\t//if ( target == \"card\" ) console.log(target, o, node.style[o], swap[o]);\n\t\t\t\t\t\tchanges       = true;\n\t\t\t\t\t}\n\t\t\t\t\tdelete swap[o];\n\t\t\t\t}\n\t\t}\n\t\t//if ( !changes )\n\t\t//console.log('no changes', target, this._.tweenRefCSS[target], !!node, force)\n\t\treturn this._.tweenRefCSS[target];\n\t}\n\t\n\t\n\t// ------------------------------------------------------------\n\t// --------------- React Hooks --------------------------------\n\t// ------------------------------------------------------------\n\t\n\t\n\tcomponentWillUnmount() {\n\t\tlet node = this.getRootNode();\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tthis._.tweenEnabled = false;\n\t\t\twindow.removeEventListener(\"resize\", this._.onResize);\n\t\t\t\n\t\t\tObject.keys(this._.axes).forEach(\n\t\t\t\taxe => {\n\t\t\t\t\tthis._.axes[axe].inertiaFrame &&\n\t\t\t\t\tclearTimeout(this._.axes[axe].inertiaFrame);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\t\n\t\tif ( this._.scrollEnabled ) {\n\t\t\tthis._.scrollEnabled = false;\n\t\t\t\n\t\t\t//this._.axes          = undefined;\n\t\t\tnode && this._.onScroll && !this._parentTweener && domUtils.rmWheelEvent(\n\t\t\t\tnode,\n\t\t\t\tthis._.onScroll);\n\t\t\tnode && this._.dragList && domUtils.removeEvent(node\n\t\t\t\t, this._.dragList)\n\t\t}\n\t\t\n\t\tsuper.componentWillUnmount && super.componentWillUnmount(...arguments);\n\t}\n\t\n\tcomponentDidMount() {\n\t\tlet _static = this.constructor;\n\t\t\n\t\tthis._.rendered = true;\n\t\tif ( this._.tweenEnabled ) {\n\t\t\t// debugger;\n\t\t\tthis._updateBox();\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\tif ( _static.scrollableAnim ) {\n\t\t\tif ( is.array(_static.scrollableAnim) )\n\t\t\t\tthis.addScrollableAnim(_static.scrollableAnim);\n\t\t\telse\n\t\t\t\tObject.keys(_static.scrollableAnim)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      axe => this.addScrollableAnim(_static.scrollableAnim[axe], axe)\n\t\t\t\t      )\n\t\t}\n\t\tif ( this._.doRegister || this.__isFirst ) {\n\t\t\t\n\t\t\tthis._registerScrollListeners();\n\t\t\tthis._.doRegister = false;\n\t\t}\n\t\tsuper.componentDidMount && super.componentDidMount(...arguments);\n\t}\n\t\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\t\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tthis._updateBox();\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\tsuper.componentDidUpdate && super.componentDidUpdate(...arguments);\n\t}\n\t\n\trender() {\n\t\tconst { BaseComponent, oProps } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\tparentTweener => {\n\t\t\t\t\tthis._parentTweener = parentTweener;\n\t\t\t\t\treturn <TweenerContext.Provider value={this}>\n\t\t\t\t\t\t<BaseComponent {...oProps} ref={this._.rootRef} tweener={this}/>\n\t\t\t\t\t</TweenerContext.Provider>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function asTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    options       = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !BaseComponent ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn asTweener(BaseComponent, options)\n\t\t}\n\t}\n\t\n\toptions = {\n\t\twheelRatio    : 5,\n\t\tmaxClickTm    : 200,\n\t\tmaxClickOffset: 20,\n\t\t...options,\n\t};\n\t\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenableComp oProps={props} forwardedRef={ref} BaseComponent={BaseComponent}\n\t\t                      tweenerOptions={options}/>;\n\t});\n\twithRef.displayName = String.fromCharCode(0xD83E, 0xDDD9) + (BaseComponent.displayName || BaseComponent.name);\n\treturn withRef;\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {Component}     from 'react';\nimport TweenAxis       from './comps/TweenAxis';\nimport TweenerContext  from './comps/TweenerContext';\nimport TweenRef        from './comps/TweenRef';\nimport Draggable       from './comps/Draggable';\nimport asTweener       from './spells/asTweener';\nimport withTweener     from './spells/withTweener';\nimport domTools        from './utils/dom.js';\nimport * as tweenTools from './utils/tweenTools.js';\n\n@asTweener\nclass Tweenable extends Component {\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\n\nexport {asTweener, withTweener, tweenTools, Draggable, Tweenable, TweenRef, TweenerContext, TweenAxis, domTools};\nexport default Tweenable;"],"sourceRoot":""}