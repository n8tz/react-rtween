{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/MapOf.react_voodoo_utils_css_demux_____js.gen.js","webpack:///./src/MapOf.react_voodoo_utils_css_demux_typed_____js.gen.js","webpack:///./src/comps/Axis.js","webpack:///./src/comps/Draggable.js","webpack:///./src/comps/Node.js","webpack:///./src/comps/TweenerContext.js","webpack:///./src/index.js","webpack:///./src/spells/asTweener.js","webpack:///./src/spells/withTweener.js","webpack:///./src/utils/CssTweenAxis.js","webpack:///./src/utils/css/cssUtils.js","webpack:///./src/utils/css/demux/backgroundColor.js","webpack:///./src/utils/css/demux/boxShadow.js","webpack:///./src/utils/css/demux/filter.js","webpack:///./src/utils/css/demux/textShadow.js","webpack:///./src/utils/css/demux/transform.js","webpack:///./src/utils/css/demux/typed/bool.js","webpack:///./src/utils/css/demux/typed/border.js","webpack:///./src/utils/css/demux/typed/color.js","webpack:///./src/utils/css/demux/typed/int.js","webpack:///./src/utils/css/demux/typed/multi.js","webpack:///./src/utils/css/demux/typed/number.js","webpack:///./src/utils/css/demux/typed/ratio.js","webpack:///./src/utils/css/demux/typed/shadow.js","webpack:///./src/utils/css/index.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/inertia.js","webpack:///./src/utils/tweenTools.js","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"d3-ease\"","webpack:///external \"@babel/runtime/helpers/objectWithoutPropertiesLoose\"","webpack:///external \"prop-types\"","webpack:///external \"react\"","webpack:///external \"react-dom\"","webpack:///external \"is\"","webpack:///external \"layer-pack/etc/utils/indexUtils.js\"","webpack:///external \"fast-deep-equal\"","webpack:///external \"color-rgba\"","webpack:///external \"tween-axis\"","webpack:///external \"shortid\"","webpack:///external \"css-box-shadow\"","webpack:///external \"@babel/runtime/helpers/inheritsLoose\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\""],"names":["req","_exports","walknSetExport","require","_react_voodoo_utils_css_demux_filter_js","_react_voodoo_utils_css_demux_boxShadow_js","_react_voodoo_utils_css_demux_transform_js","_react_voodoo_utils_css_demux_textShadow_js","_react_voodoo_utils_css_demux_backgroundColor_js","backgroundColor","boxShadow","filter","textShadow","transform","_react_voodoo_utils_css_demux_typed_int_js","_react_voodoo_utils_css_demux_typed_bool_js","_react_voodoo_utils_css_demux_typed_color_js","_react_voodoo_utils_css_demux_typed_multi_js","_react_voodoo_utils_css_demux_typed_ratio_js","_react_voodoo_utils_css_demux_typed_border_js","_react_voodoo_utils_css_demux_typed_number_js","_react_voodoo_utils_css_demux_typed_shadow_js","bool","border","color","int","multi","number","ratio","shadow","Axis","state","componentWillUnmount","_tweenLines","Object","keys","forEach","axe","_previousTweener","rmScrollableAnim","_previousScrollable","render","props","children","scrollFirst","bounds","scrollableWindow","inertia","size","defaultPosition","items","tweener","_previousAxis","_previousInertia","initAxis","scrollableBounds","_lastTL","length","addScrollableAnim","_previousTweens","deepEqual","React","Component","propTypes","PropTypes","string","isRequired","array","object","any","Draggable","withTweener","_","root","createRef","node","current","scrollEnabled","dragList","domUtils","removeEvent","componentDidMount","_registerScrollListeners","getScrollableNodes","scrollable","findReactParents","map","id","is","refs","ReactDom","findDOMNode","document","getElementById","rootNode","xAxis","yAxis","lastStartTm","cLock","dX","parents","dY","parentsState","addEvent","e","touch","descr","pTweener","x","y","i","style","target","Date","now","__isTweener","axes","_updateNodeInertia","options","maxClickTm","Math","abs","maxClickOffset","preventDefault","stopPropagation","deltaX","xDispatched","vX","deltaY","yDispatched","vY","cState","_lastPos","_startPos","dragDirectionLock","scrollPos","startMove","inertiaFrame","applyInertia","box","scrollableArea","isInbound","componentShouldScroll","hold","console","log","undefined","release","cancelable","enableMouseDrag","doRegister","getProps","Comp","forwardedRef","defaultProps","div","setTarget","anims","tween","Node","__tweenableId","shortid","generate","_tweenAxisObj","_currentTweener","rmTweenRef","setRootRef","initial","pos","noRef","reset","isRoot","tweenLines","tweenAxis","onClick","onDoubleClick","parentTweener","error","twRef","tweenRef","axisItemsChange","_tweenAxis","scrollY","reduce","h","_updateTweenRef","hasOwnProperty","refChild","Children","only","isValidElement","cloneElement","_lastRef","className","TweenerContext","createContext","child","tools","context","dom","isBrowserSide","Function","isArray","_live","lastTm","_running","SimpleObjectProto","constructor","Runner","run","tl","ctx","duration","cb","apply","go","push","cpos","setTimeout","_tick","o","tm","delta","min","splice","TweenableComp","arguments","ln","activeInertia","_inertiaRaf","cancelAnimationFrame","active","holding","scrollLeft","update","scrollTop","slice","requestAnimationFrame","_swap","muxByTarget","z","_rafLoop","bind","rootRef","enableMouseScroll","tweenerOptions","tweenRefCSS","tweenRefs","tweenRefMaps","iMapOrigin","tweenRefInitialData","tweenEnabled","tweenRefOrigin","tweenRefOriginCss","muxDataByTarget","tweenRefDemuxed","tweenRefTargets","runningAnims","scrollHook","window","addEventListener","onResize","_updateBox","_updateTweenRefs","windowDidResize","iStyle","iMap","noref","mapReset","tweenableMap","initials","deMuxTween","key","clearTweenableValue","muxToCss","assign","ref","indexOf","resetTweenable","targets","t","updateRefStyle","postPone","pureCss","m","getTweenableRef","getRootNode","pushAnim","anim","then","keepResults","sl","fail","deMuxLine","warn","displayName","Promise","resolve","rkey","destroy","live","applyTweenState","tmap","p","_inertia","_scrollableArea","_scrollableBounds","_scrollableWindow","dim","max","targetPos","Inertia","disabled","value","nextDescr","wayPoints","setBounds","_getAxis","initialScrollPos","getAxisState","getScrollPos","axis","scrollTo","newPos","ms","ease","reject","oldPos","setPos","componentDidScroll","goTo","_runScrollGoTo","easingFn","_detectCurrentSnap","found","twAxis","to","easing","tick","from","hookScrollableTargets","isInertiaActive","dispatchScroll","prevent","dispatch","isAxisOut","v","round","_doDispatch","dx","dy","Comps","headTarget","nodeInertia","element","getComputedStyle","test","getPropertyValue","scrollHeight","clientHeight","_activateNodeInertia","findIndex","item","scrollWidth","offsetLeft","offsetHeight","inited","offsetWidth","force","swap","changes","removeEventListener","clearTimeout","_static","rendered","scrollableAnim","componentDidUpdate","prevProps","prevState","BaseComponent","oProps","_parentTweener","asTweener","argz","prototype","shift","wheelRatio","withRef","forwardRef","String","fromCharCode","name","opts","TweenerToProps","recyclableTweenAxis","CssTweenAxis","cfg","scope","recyled","pop","localLength","mount","__marks","__marksLength","__marksKeys","__processors","__config","__activeForks","__activeProcess","__outgoing","__incoming","__cPos","__cIndex","__cMaxKey","units","unitsRe","RegExp","join","floatCut","Number","toFixed","expandShorthandProperty","property","type","childProps","properties","values","split","multiple","k","isShorthandProperty","isValidDeclaration","canAnimate","getProperty","expand","exports","prop","ret","Array","subProp","defaultUnits","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","opacity","saturate","sepia","filters","twKey","cssMap","dataMap","muxerMap","keepValues","path","tmpKey","demux","tweenable","data","fkey","dkey","mux","fValue","match","parseFloat","translateX","translateY","translateZ","scale","scaleZ","scaleX","scaleY","rotate","skewX","skewY","rotateX","rotateY","rotateZ","perspective","defaultBox","left","right","top","bottom","width","height","defaultValue","demuxOne","unitIndex","twVal","baseKey","unit","transforms","tmpValue","ti","unitKey","u","iValue","substr","muxOne","noPropLock","seenUnits","realKey","reOrder","tFnKey","baseData","defaultMuxers","inset","shadows","shadowMap","cssShadowParser","stringify","parse","vect","rgba","alias","center","offset","count","nowhere","rKey","muxer","cssDemux","cssDemuxers","marginTop","marginLeft","marginRight","marginBottom","paddingTop","paddingLeft","paddingRight","paddingBottom","borderRadius","transformOrigin","zIndex","cssKey","css","demuxers","deMuxedTween","fTween","excluded","tweenLine","allPropsById","line","demuxedTween","addCss","isBrowser","isTouch","is_touch_device","prefixes","mq","query","matchMedia","matches","DocumentTouch","_dom","prefix","navigator","appVersion","userAgent","dashedPrefix","__","onPageHided","onPageShown","dragging","dragEnabled","dragEnabledDesc","fingers","nbFingers","dragstartAnywhere","me","finger","desc","Dom","dragAnywhere","dropAnywhere","dropWithoutClick","changedTouches","identifier","pageX","pageY","_startTs","timeStamp","dragstart","call","stopped","drag","preventNextClick","stopImmediatePropagation","mouseDrag","dropped","getDraggable","locks","dragEnd","freeDraggable","addOverflowEvent","addFlowListener","fn","flow","orient","horizontalOverflow","verticalOverflow","bubble","attachEvent","related","detachEvent","rmDragFn","arr","passive","elem","dims","parseInt","offsetTop","offsetParent","addWheelEvent","_addEventListener","_rmEventListener","onwheel","support","createElement","onmousewheel","addWheelListener","callback","useCapture","_addWheelListener","PIXEL_STEP","LINE_HEIGHT","PAGE_HEIGHT","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaMode","spinX","spinY","pixelX","pixelY","eventName","_wheelList","originalEvent","srcElement","delatZ","returnValue","normalized","rmWheelEvent","rmWheelListener","_EventListener","fiberNode","comps","startsWith","return","stateNode","includes","parentNode","signOf","sign","NaN","floor","consts","velocityResetTm","clickTm","velSign","lastVelocity","loopsTarget","loopsVelSum","targetDist","targetDuration","pow","refFPS","inertiaByNode","nodes","opt","conf","config","currentStop","lastInertiaPos","stops","inertiaFn","easePolyOut","targetWayPointIndex","at","nextValue","loop","inertiaStartTm","targetWayPoint","currentWayPoint","currentWayPointIndex","onInertiaEnd","shouldLoop","setWayPoints","teleport","loopDist","inertiaLastTm","_doSnap","forceSnap","maxDuration","mid","i2","maxJump","d","willSnap","infinite","baseTS","startTS","lastIVelocity","lastAccel","posDiff","nextPos","lastHoldPos","sinceLastPos","iVel","snapToBounds","re_cssValueWithUnit","cssAdd","val1","val2","units1","units2","remap","result","cssMult","val","start","withOffset","iDuration","inverseValues","reverse","MultiCssProps","sources","source","addAllType","v1","v2","values1","values2","r","extractCss","inverse","shiftTransforms","unshift"],"mappings":"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","file":"react-voodoo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* This is a virtual file generated by layer-pack */\nlet req, _exports = {}, walknSetExport=require('layer-pack/etc/utils/indexUtils.js').walknSetExport;\nconst _react_voodoo_utils_css_demux_filter_js = require(\"react-voodoo/utils/css/demux/filter.js\");\nwalknSetExport(_exports, \"filter\", _react_voodoo_utils_css_demux_filter_js);\nconst _react_voodoo_utils_css_demux_boxShadow_js = require(\"react-voodoo/utils/css/demux/boxShadow.js\");\nwalknSetExport(_exports, \"boxShadow\", _react_voodoo_utils_css_demux_boxShadow_js);\nconst _react_voodoo_utils_css_demux_transform_js = require(\"react-voodoo/utils/css/demux/transform.js\");\nwalknSetExport(_exports, \"transform\", _react_voodoo_utils_css_demux_transform_js);\nconst _react_voodoo_utils_css_demux_textShadow_js = require(\"react-voodoo/utils/css/demux/textShadow.js\");\nwalknSetExport(_exports, \"textShadow\", _react_voodoo_utils_css_demux_textShadow_js);\nconst _react_voodoo_utils_css_demux_backgroundColor_js = require(\"react-voodoo/utils/css/demux/backgroundColor.js\");\nwalknSetExport(_exports, \"backgroundColor\", _react_voodoo_utils_css_demux_backgroundColor_js);\n\nexport const backgroundColor = _exports.backgroundColor;\n\nexport const boxShadow = _exports.boxShadow;\n\nexport const filter = _exports.filter;\n\nexport const textShadow = _exports.textShadow;\n\nexport const transform = _exports.transform;\nexport default _exports;","/* This is a virtual file generated by layer-pack */\nlet req, _exports = {}, walknSetExport=require('layer-pack/etc/utils/indexUtils.js').walknSetExport;\nconst _react_voodoo_utils_css_demux_typed_int_js = require(\"react-voodoo/utils/css/demux/typed/int.js\");\nwalknSetExport(_exports, \"int\", _react_voodoo_utils_css_demux_typed_int_js);\nconst _react_voodoo_utils_css_demux_typed_bool_js = require(\"react-voodoo/utils/css/demux/typed/bool.js\");\nwalknSetExport(_exports, \"bool\", _react_voodoo_utils_css_demux_typed_bool_js);\nconst _react_voodoo_utils_css_demux_typed_color_js = require(\"react-voodoo/utils/css/demux/typed/color.js\");\nwalknSetExport(_exports, \"color\", _react_voodoo_utils_css_demux_typed_color_js);\nconst _react_voodoo_utils_css_demux_typed_multi_js = require(\"react-voodoo/utils/css/demux/typed/multi.js\");\nwalknSetExport(_exports, \"multi\", _react_voodoo_utils_css_demux_typed_multi_js);\nconst _react_voodoo_utils_css_demux_typed_ratio_js = require(\"react-voodoo/utils/css/demux/typed/ratio.js\");\nwalknSetExport(_exports, \"ratio\", _react_voodoo_utils_css_demux_typed_ratio_js);\nconst _react_voodoo_utils_css_demux_typed_border_js = require(\"react-voodoo/utils/css/demux/typed/border.js\");\nwalknSetExport(_exports, \"border\", _react_voodoo_utils_css_demux_typed_border_js);\nconst _react_voodoo_utils_css_demux_typed_number_js = require(\"react-voodoo/utils/css/demux/typed/number.js\");\nwalknSetExport(_exports, \"number\", _react_voodoo_utils_css_demux_typed_number_js);\nconst _react_voodoo_utils_css_demux_typed_shadow_js = require(\"react-voodoo/utils/css/demux/typed/shadow.js\");\nwalknSetExport(_exports, \"shadow\", _react_voodoo_utils_css_demux_typed_shadow_js);\n\nexport const bool = _exports.bool;\n\nexport const border = _exports.border;\n\nexport const color = _exports.color;\n\nexport const int = _exports.int;\n\nexport const multi = _exports.multi;\n\nexport const number = _exports.number;\n\nexport const ratio = _exports.ratio;\n\nexport const shadow = _exports.shadow;\nexport default _exports;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport PropTypes from \"prop-types\";\nimport React     from 'react';\n\nimport TweenerContext from \"./TweenerContext\";\n\nexport default class Axis extends React.Component {\n\tstatic propTypes = {\n\t\taxe            : PropTypes.string.isRequired,\n\t\titems          : PropTypes.array,\n\t\tbounds         : PropTypes.object,\n\t\tinertia        : PropTypes.any,\n\t\tdefaultPosition: PropTypes.number,\n\t\tsize           : PropTypes.any\n\t};\n\tstate            = {};\n\t\n\tcomponentWillUnmount() {\n\t\t\n\t\tif ( this._tweenLines ) {\n\t\t\tObject.keys(this._tweenLines)\n\t\t\t      .forEach(axe => this._previousTweener.rmScrollableAnim(this._tweenLines[axe], axe));\n\t\t\t\n\t\t}\n\t\tdelete this._previousTweener;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    axe, scrollFirst, bounds,\n\t\t\t    scrollableWindow, inertia, size, defaultPosition,\n\t\t\t    items = [],\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\ttweener => {\n\t\t\t\t\tif ( !this._previousAxis || this._previousAxis !== axe ) {//....\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t\telse if ( !this._previousInertia || this._previousInertia !== inertia ) {//....\n\t\t\t\t\t\tthis._previousInertia = inertia;\n\t\t\t\t\t\tthis._previousAxis    = axe;\n\t\t\t\t\t\ttweener.initAxis(axe, {\n\t\t\t\t\t\t\tinertia,\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tscrollableWindow,\n\t\t\t\t\t\t\tdefaultPosition,\n\t\t\t\t\t\t\tscrollFirst,\n\t\t\t\t\t\t\tscrollableBounds: bounds\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif ( !this._previousTweener || this._previousTweener !== tweener ) {// mk axe not modifiable\n\t\t\t\t\t\tthis._previousTweener && this._lastTL && this._previousTweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweener = tweener;\n\t\t\t\t\t\tthis._previousTweens  = items;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( this._previousTweens !== items && !(this._previousTweens && deepEqual(items, this._previousTweens)) ) {\n\t\t\t\t\t\tthis._lastTL && this._previousTweener && this._previousTweener.rmScrollableAnim(this._lastTL, this._previousAxis);\n\t\t\t\t\t\tthis._lastTL = null;\n\t\t\t\t\t\tif ( items.length )\n\t\t\t\t\t\t\tthis._lastTL = tweener.addScrollableAnim(items, axe, size);\n\t\t\t\t\t\tthis._previousTweens = items;\n\t\t\t\t\t}\n\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}","/*\n *   The MIT License (MIT)\n *   Copyright (c) 2019. Wise Wild Web\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n *\n *   @author : Nathanael Braun\n *   @contact : n8tz.js@gmail.com\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport is        from \"is\";\nimport PropTypes from \"prop-types\";\nimport React     from 'react';\nimport ReactDom  from \"react-dom\";\nimport domUtils  from \"../utils/dom\";\n\nimport withTweener from \"../spells/withTweener\";\n\n@withTweener\nexport default class Draggable extends React.Component {\n\tstatic propTypes    = {\n\t\txAxis: PropTypes.string,\n\t\tyAxis: PropTypes.string,\n\t};\n\tstatic defaultProps = {\n\t\tComp: 'div',\n\t};\n\tstate               = {};\n\t_                   = {};\n\troot                = React.createRef();\n\t\n\tcomponentWillUnmount() {\n\t\tlet node = this.root?.current;\n\t\tif ( this._.scrollEnabled ) {\n\t\t\tthis._.scrollEnabled = false;\n\t\t\t\n\t\t\t//this._.axes          = undefined;\n\t\t\tnode && this._.dragList && domUtils.removeEvent(node\n\t\t\t\t, this._.dragList)\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis._registerScrollListeners();\n\t}\n\t\n\t/**\n\t * Return scrollable parent node list basing a dom node\n\t * @param node\n\t * @returns {T[]}\n\t */\n\tgetScrollableNodes( node ) {\n\t\tlet scrollable = domUtils.findReactParents(node), _ = this._;\n\t\t\n\t\treturn scrollable.map(\n\t\t\tid => (is.string(id)\n\t\t\t       ? this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]) || this.refs[id] || document.getElementById(id)\n\t\t\t       : id));\n\t}\n\t\n\t/**\n\t * todo rewrite or use lib\n\t * Init touch & scroll listeners\n\t * Drive scroll & drag values updates\n\t * @private\n\t */\n\t_registerScrollListeners() {\n\t\tlet rootNode                  = this.root?.current,\n\t\t    { xAxis, yAxis, tweener } = this.props,\n\t\t    lastStartTm,\n\t\t    cLock, dX,\n\t\t    parents,\n\t\t    dY, parentsState,\n\t\t    _                         = tweener._;\n\t\tif ( rootNode ) {\n\t\t\tdomUtils.addEvent(\n\t\t\t\trootNode, this._.dragList = {\n\t\t\t\t\t'dragstart': ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tlet pTweener,\n\t\t\t\t\t\t    x,\n\t\t\t\t\t\t    y, i, style;\n\t\t\t\t\t\t\n\t\t\t\t\t\tparents      = this.getScrollableNodes(e.target);\n\t\t\t\t\t\t//console.log(\"start\")\n\t\t\t\t\t\tlastStartTm  = Date.now();\n\t\t\t\t\t\tdX           = 0;\n\t\t\t\t\t\tdY           = 0;\n\t\t\t\t\t\tparentsState = [];\n\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\tpTweener = parents[i];\n\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\tif ( pTweener.__isTweener ) {\n\t\t\t\t\t\t\t\tx = xAxis && pTweener.axes?.[xAxis];\n\t\t\t\t\t\t\t\ty = yAxis && pTweener.axes?.[yAxis];\n\t\t\t\t\t\t\t\tpTweener._updateNodeInertia()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//tweener._updateNodeInertia()\n\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t//e.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t\t'click'    : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tif ( lastStartTm &&\n\t\t\t\t\t\t\t!((lastStartTm > Date.now() - _.options.maxClickTm) &&\n\t\t\t\t\t\t\t\tMath.abs(dY) < _.options.maxClickOffset &&\n\t\t\t\t\t\t\t\tMath.abs(dX) < _.options.maxClickOffset)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t//console.log(\"prevented click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t//console.log(':o ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//else console.log(\"click\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'drag'     : ( e, touch, descr ) => {//@todo\n\t\t\t\t\t\tlet pTweener,\n\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\n\t\t\t\t\t\tdX = -(descr._lastPos.x - descr._startPos.x);\n\t\t\t\t\t\tdY = -(descr._lastPos.y - descr._startPos.y);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( lastStartTm && ((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY) < _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap & click\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//console.log(':u ' + (lastStartTm - Date.now()) + ' ' + dX + ' ' + dY)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\txDispatched = !dX;\n\t\t\t\t\t\t\tyDispatched = !dY;\n\t\t\t\t\t\t\tif ( _.options.dragDirectionLock ) {\n\t\t\t\t\t\t\t\tif ( cLock === \"Y\" || !cLock && Math.abs(dY * .5) > Math.abs(dX) ) {\n\t\t\t\t\t\t\t\t\tcLock = \"Y\";\n\t\t\t\t\t\t\t\t\tdX    = 0;\n\t\t\t\t\t\t\t\t\t//xDispatched = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if ( cLock === \"X\" || !cLock && Math.abs(dX * .5) > Math.abs(dY) ) {\n\t\t\t\t\t\t\t\t\tcLock = \"X\";\n\t\t\t\t\t\t\t\t\tdY    = 0;\n\t\t\t\t\t\t\t\t\t//yDispatched = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\t\tpTweener = parents[i];\n\t\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\t\tif ( pTweener.__isTweener ) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tx = xAxis && pTweener.axes?.[xAxis];\n\t\t\t\t\t\t\t\t\ty = yAxis && pTweener.axes?.[yAxis];\n\t\t\t\t\t\t\t\t\t//console.log(\"drag\", dX, dY, x);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( !parentsState[i] ) {\n\t\t\t\t\t\t\t\t\t\tparentsState[i] = { x: x?.scrollPos, y: y?.scrollPos };\n\t\t\t\t\t\t\t\t\t\tx?.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\ty?.inertia?.startMove();\n\t\t\t\t\t\t\t\t\t\txAxis && !x.inertiaFrame && pTweener.applyInertia(x, xAxis);\n\t\t\t\t\t\t\t\t\t\tyAxis && !y.inertiaFrame && pTweener.applyInertia(y, yAxis);\n\t\t\t\t\t\t\t\t\t\t//console.warn('Draggable::drag:190: ');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( x )\n\t\t\t\t\t\t\t\t\t\tdeltaX = dX && (dX / pTweener._.box.x) * (x.scrollableWindow || x.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\tif ( y )\n\t\t\t\t\t\t\t\t\t\tdeltaY = dY && (dY / pTweener._.box.y) * (y.scrollableWindow || y.scrollableArea) || 0;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//console.log('Draggable::drag:178: ', parentsState[i].x + deltaX,\n\t\t\t\t\t\t\t\t\t// x?.inertia?._.max, x?.inertia?.isInbound(parentsState[i].x + deltaX));\n\t\t\t\t\t\t\t\t\tif ( !xDispatched && deltaX && x?.inertia?.isInbound(parentsState[i].x + deltaX)\n\t\t\t\t\t\t\t\t\t\t&& (pTweener.componentShouldScroll(xAxis, deltaX)) ) {\n\t\t\t\t\t\t\t\t\t\tx.inertia.hold(parentsState[i].x + deltaX);\n\t\t\t\t\t\t\t\t\t\txDispatched = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//console.log(\"scrollY\", yDispatched, y?.inertia?.isInbound(parentsState[i].y + deltaY), parentsState[i].y + deltaY);\n\t\t\t\t\t\t\t\t\tif ( !yDispatched && deltaY && y?.inertia?.isInbound(parentsState[i].y + deltaY)\n\t\t\t\t\t\t\t\t\t\t&& (pTweener.componentShouldScroll(yAxis, deltaY)) ) {\n\t\t\t\t\t\t\t\t\t\ty.inertia.hold(parentsState[i].y + deltaY);\n\t\t\t\t\t\t\t\t\t\tconsole.log('Draggable::drag:190: ', parentsState[i].y,deltaY);\n\t\t\t\t\t\t\t\t\t\tyDispatched = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( yDispatched && xDispatched ) {\n\t\t\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t\t\t//e.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//dX = 0;\n\t\t\t\t\t\t\t//dY = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t,\n\t\t\t\t\t'dropped': ( e, touch, descr ) => {\n\t\t\t\t\t\tlet pTweener,\n\t\t\t\t\t\t    x, deltaX, xDispatched, vX,\n\t\t\t\t\t\t    y, deltaY, yDispatched, vY,\n\t\t\t\t\t\t    cState, i;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcLock = undefined;\n\t\t\t\t\t\t//lastStartTm                     = undefined;\n\t\t\t\t\t\t//document.body.style.userSelect  = '';\n\t\t\t\t\t\t//document.body.style.touchAction = '';\n\t\t\t\t\t\tfor ( i = 0; i < parents.length; i++ ) {\n\t\t\t\t\t\t\tpTweener = parents[i];\n\t\t\t\t\t\t\t// react comp with tweener support\n\t\t\t\t\t\t\tif ( pTweener.__isTweener && parentsState[i] ) {\n\t\t\t\t\t\t\t\t//console.log('Draggable::dropped:228: ', pTweener._getAxis(xAxis)?.inertia);\n\t\t\t\t\t\t\t\tpTweener.axes?.[xAxis]?.inertia?.release();\n\t\t\t\t\t\t\t\tpTweener.axes?.[yAxis]?.inertia?.release();\n\t\t\t\t\t\t\t\t//pTweener._updateNodeInertia()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//else if ( is.element(tweener) ) {\n\t\t\t\t\t\t\t//\tcState = parentsState[i];\n\t\t\t\t\t\t\t//\tif ( cState ) {\n\t\t\t\t\t\t\t//\t\tcState.inertia.x.release();\n\t\t\t\t\t\t\t//\t\tcState.inertia.y.release();\n\t\t\t\t\t\t\t//\t}\n\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( lastStartTm && !((lastStartTm > Date.now() - _.options.maxClickTm) && Math.abs(dY)\n\t\t\t\t\t\t\t< _.options.maxClickOffset && Math.abs(dX) < _.options.maxClickOffset) )// skip tap\n\t\t\t\t\t\t// &\n\t\t\t\t\t\t// click\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.cancelable && e.preventDefault();\n\t\t\t\t\t\t\t//console.log(\"prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//else {\n\t\t\t\t\t\t//console.log(\"not prevented\", Math.abs(dX), Math.abs(dY))\n\t\t\t\t\t\t//}\n\t\t\t\t\t\t//lastStartTm = 0;\n\t\t\t\t\t\tparents = parentsState = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnull,\n\t\t\t\t_.options.enableMouseDrag\n\t\t\t)\n\t\t\tthis._.doRegister = !!rootNode;\n\t\t}\n\t\telse {\n\t\t\tthis._.doRegister = true;\n\t\t}\n\t}\n\t\n\tgetProps() {\n\t\tlet props = this.props;\n\t\tprops     = { ...props };\n\t\tdelete props.Comp;\n\t\tdelete props.xAxis;\n\t\tdelete props.yAxis;\n\t\tdelete props.tweener;\n\t\tdelete props.forwardedRef;\n\t\treturn props;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    Comp,\n\t\t\t    forwardedRef,\n\t\t\t    items = [],\n\t\t    } = this.props;\n\t\tif ( forwardedRef ) {\n\t\t\t//this.root =  forwardedRef;\n\t\t}\n\t\treturn <Comp {...this.getProps()} ref={this.root}>{children}</Comp>;\n\t}\n}\nDraggable.div = ( props ) => {\n\treturn <Draggable {...props}/>;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport deepEqual from \"fast-deep-equal\";\nimport is        from \"is\";\nimport React     from 'react';\nimport shortid   from 'shortid';\n\nimport TweenerContext from \"./TweenerContext\";\n\nfunction setTarget( anims, target ) {\n\treturn anims.map(\n\t\ttween => ({\n\t\t\t...tween,\n\t\t\ttarget\n\t\t})\n\t)\n}\n\nexport default class Node extends React.Component {\n\t\n\tstatic propTypes = {};\n\tstate            = {};\n\t__tweenableId    = shortid.generate();\n\t\n\tcomponentWillUnmount() {\n\t\tif ( this._tweenAxisObj ) {\n\t\t\tObject.keys(this._tweenAxisObj)\n\t\t\t      .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\n\t\t}\n\t\tif ( this._currentTweener ) {\n\t\t\tthis._currentTweener.rmTweenRef(this.__tweenableId)\n\t\t\tthis._currentTweener.setRootRef(undefined);\n\t\t}\n\t\tdelete this._currentTweener;\n\t\tdelete this._tweenAxisObj;\n\t\tdelete this._previousScrollable;\n\t}\n\t\n\trender() {\n\t\tlet {\n\t\t\t    children,\n\t\t\t    id            = this.__tweenableId,\n\t\t\t    style, initial, pos, noRef, reset, tweener,\n\t\t\t    isRoot,\n\t\t\t    tweenLines,\n\t\t\t    tweenAxis     = tweenLines,\n\t\t\t    onClick       = children && children.props && children.props.onClick,\n\t\t\t    onDoubleClick = children && children.props && children.props.onDoubleClick\n\t\t    } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\tparentTweener => {//@todo : must be better method\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tparentTweener = tweener || parentTweener;\n\t\t\t\t\t\n\t\t\t\t\tif ( !parentTweener ) {\n\t\t\t\t\t\tconsole.error(\"No voodoo tweener found in the context, is there any parent with asTweener ?\")\n\t\t\t\t\t\treturn <React.Fragment/>;\n\t\t\t\t\t}\n\t\t\t\t\t//console.warn(\"render : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\tlet twRef = parentTweener.tweenRef(id, children.props && children.props.style, style || initial,\n\t\t\t\t\t                                   pos, noRef),\n\t\t\t\t\t    axisItemsChange;\n\t\t\t\t\t\n\t\t\t\t\t//console.warn(\"render2 : \", this.__tweenableId, this._currentTweener, parentTweener,\n\t\t\t\t\t// this._currentTweener !== parentTweener)\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( this._currentTweener !== parentTweener || this._previousScrollable !== tweenAxis ) {\n\t\t\t\t\t\taxisItemsChange = this._tweenAxis !== tweenAxis && !(this._tweenAxis && deepEqual(tweenAxis, this._tweenAxis));\n\t\t\t\t\t\tif ( this._currentTweener && axisItemsChange ) {\n\t\t\t\t\t\t\tthis._tweenAxisObj && Object.keys(this._tweenAxisObj)\n\t\t\t\t\t\t\t                            .forEach(axe => this._currentTweener.rmScrollableAnim(this._tweenAxisObj[axe], axe));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(twRef, axisItemsChange, this._tweenAxis, tweenAxis)\n\t\t\t\t\t\tif ( this._currentTweener && this._currentTweener !== parentTweener ) {\n\t\t\t\t\t\t\tthis._currentTweener.rmTweenRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( axisItemsChange ) {\n\t\t\t\t\t\t\tthis._tweenAxis = tweenAxis;\n\t\t\t\t\t\t\tif ( tweenAxis && is.array(tweenAxis) )\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = { scrollY: parentTweener.addScrollableAnim(setTarget(tweenAxis, id)) };\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis._tweenAxisObj = tweenAxis && Object.keys(tweenAxis)\n\t\t\t\t\t\t\t\t                                        .reduce(( h, axe ) => (h[axe] = parentTweener.addScrollableAnim(setTarget(tweenAxis[axe], id), axe), h), {});\n\t\t\t\t\t\t\ttwRef = parentTweener.tweenRef(id, children.props && children.props.style, style || initial,\n\t\t\t\t\t\t\t                               pos, noRef)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id, true) };\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( this.props.hasOwnProperty(\"isRoot\") ) {\n\t\t\t\t\t\t\tthis._currentTweener && this._currentTweener.setRootRef(undefined);\n\t\t\t\t\t\t\ttweener.setRootRef(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._currentTweener     = parentTweener;\n\t\t\t\t\t\tthis._previousScrollable = tweenAxis;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if ( twRef ) {\n\t\t\t\t\t\ttwRef.style = { ...parentTweener._updateTweenRef(id, true) };\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet refChild = React.Children.only(children);\n\t\t\t\t\t\n\t\t\t\t\tif ( refChild && React.isValidElement(refChild) ) {\n\t\t\t\t\t\trefChild      = React.cloneElement(\n\t\t\t\t\t\t\trefChild,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...twRef,\n\t\t\t\t\t\t\t\tonDoubleClick: onDoubleClick && (e => onDoubleClick(e, parentTweener)),\n\t\t\t\t\t\t\t\tonClick      : onClick && (e => onClick(e, parentTweener))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._lastRef = twRef;\n\t\t\t\t\t\treturn refChild;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.error(\"Invalid voodoo Node child : \", id)\n\t\t\t\t\t}\n\t\t\t\t\treturn <div>Invalid</div>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}\n\nNode.div = ( { children, className, ...props } ) => {\n\treturn <Node {...props}>\n\t\t<div className={className}>{children}</div>\n\t</Node>;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nconst TweenerContext = React.createContext(null);\nexport default TweenerContext","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React      from 'react';\nimport Axis       from './comps/Axis';\nimport context    from './comps/TweenerContext';\nimport Node       from './comps/Node';\nimport Draggable  from './comps/Draggable';\nimport tweener    from './spells/asTweener';\nimport child      from './spells/withTweener';\nimport dom        from './utils/dom.js';\nimport * as tools from './utils/tweenTools.js';\n\n@tweener\nclass Component extends React.Component {\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\nexport default {tweener, child, tools, Draggable, Component, Node, context, Axis, dom};","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as easingFn                                          from \"d3-ease\";\nimport deepEqual                                              from \"fast-deep-equal\";\nimport is                                                     from \"is\";\nimport React                                                  from \"react\";\nimport ReactDom                                               from \"react-dom\";\nimport TweenerContext                                         from \"../comps/TweenerContext\";\nimport {clearTweenableValue, deMuxLine, deMuxTween, muxToCss} from \"../utils/css\";\nimport tweenAxis                                              from \"../utils/CssTweenAxis\";\nimport domUtils                                               from \"../utils/dom\";\nimport Inertia                                                from '../utils/inertia';\n\n/**\n * @todo : clean & comments\n */\n\n\nlet isBrowserSide           = (new Function(\"try {return this===window;}catch(e){ return false;}\"))(),\n    isArray                 = is.array,\n    _live, lastTm, _running = [];\n\nconst SimpleObjectProto = ({}).constructor;\n\nconst Runner = {\n\trun  : function ( tl, ctx, duration, cb ) {\n\t\tlet apply = ( pos, size ) => tl.go(pos / size, ctx);\n\t\t_running.push({ apply, duration, cpos: 0, cb });\n\t\ttl.go(0, ctx, true);//reset tl\n\t\t\n\t\tif ( !_live ) {\n\t\t\t_live  = true;\n\t\t\tlastTm = Date.now();\n\t\t\t// console.log(\"TL runner On\");\n\t\t\tsetTimeout(this._tick, 16);\n\t\t}\n\t},\n\t_tick: function _tick() {\n\t\tlet i  = 0, o, tm = Date.now(), delta = tm - lastTm;\n\t\tlastTm = tm;\n\t\tfor ( ; i < _running.length; i++ ) {\n\t\t\t_running[i].cpos = Math.min(delta + _running[i].cpos, _running[i].duration);//cpos\n\t\t\t_running[i].apply(\n\t\t\t\t_running[i].cpos, _running[i].duration\n\t\t\t);\n\t\t\t// console.log(\"TL runner \",_running[i][3]);\n\t\t\tif ( _running[i].cpos == _running[i].duration ) {\n\t\t\t\t\n\t\t\t\t_running[i].cb && setTimeout(_running[i].cb);\n\t\t\t\t_running.splice(i, 1), i--;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tif ( _running.length )\n\t\t\tsetTimeout(_tick, 16);\n\t\telse {\n\t\t\t// console.log(\"TL runner Off\");\n\t\t\t_live = false;\n\t\t}\n\t},\n};\n\nclass TweenableComp extends React.Component {\n\t\n\tconstructor( props ) {\n\t\tsuper(...arguments);\n\t\tlet _                 = this._ = {\n\t\t\trefs       : {},\n\t\t\tmuxByTarget: {},\n\t\t};\n\t\t_.box                 = {\n\t\t\tx: 100,\n\t\t\ty: 100,\n\t\t\tz: 800\n\t\t};\n\t\tthis.__isTweener      = true;\n\t\t_._rafLoop            = this._rafLoop.bind(this);\n\t\t_.rootRef             = this.props.forwardedRef || React.createRef();\n\t\t_.options             = { enableMouseScroll: true, ...(props.tweenerOptions || {}) };\n\t\t_.tweenRefCSS         = {};\n\t\t_.tweenRefs           = {};\n\t\t_.tweenRefMaps        = {};\n\t\t_.iMapOrigin          = {};\n\t\t_.tweenRefInitialData = {};\n\t\t_.tweenEnabled        = true;\n\t\t_.tweenRefOrigin      = {};\n\t\t_.tweenRefOriginCss   = {};\n\t\t_.muxDataByTarget     = _.muxDataByTarget || {};\n\t\t_.tweenRefDemuxed     = _.tweenRefDemuxed || {};\n\t\t_.tweenRefTargets     = _.tweenRefTargets || [];\n\t\t_.runningAnims        = _.runningAnims || [];\n\t\t\n\t\t_.scrollHook    = [];\n\t\t_.activeInertia = [];\n\t\tisBrowserSide && window.addEventListener(\n\t\t\t\"resize\",\n\t\t\tthis._.onResize = ( e ) => {//@todo\n\t\t\t\tthis._updateBox();\n\t\t\t\tthis._updateTweenRefs();\n\t\t\t\t_.rootRef?.current?.windowDidResize?.(e);\n\t\t\t});\n\t}\n\t\n\taxes = {};\n\t\n\t// ------------------------------------------------------------\n\t// -------------------- TweenRefs utils -----------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Register tweenable element\n\t * return its current style\n\t * @param id\n\t * @param iStyle\n\t * @param iMap\n\t * @param pos\n\t * @param noref\n\t * @param mapReset\n\t * @returns {style,ref}\n\t */\n\ttweenRef( id, iStyle = {}, iMap = {}, pos, noref, mapReset ) {// ref initial style\n\t\t\n\t\t\n\t\tlet _            = this._,\n\t\t    tweenableMap = {};\n\t\t\n\t\tlet initials = {};\n\t\tif ( !_.tweenRefs[id] )\n\t\t\t_.tweenRefTargets.push(id);\n\t\t\n\t\t//debugger\n\t\t//console.warn('ref ', id, { ...iMap })\n\t\t\n\t\tif ( _.tweenRefs[id] && (\n\t\t\tmapReset\n\t\t\t|| (_.iMapOrigin[id] !== iMap && !deepEqual(iMap, _.iMapOrigin[id]))\n\t\t\t|| (_.tweenRefOriginCss[id] !== iStyle && !deepEqual(iStyle, _.tweenRefOriginCss[id]))\n\t\t) ) {\n\t\t\t// hot switch initial values\n\t\t\t//console.warn('ref exist & style is !==', id, iStyle,\n\t\t\t//             _.tweenRefOriginCss[id], mapReset)\n\t\t\t_.iMapOrigin[id]        = iMap;\n\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\tiStyle                  = iStyle || {};\n\t\t\tiMap                    = iMap || {};\n\t\t\t\n\t\t\t\n\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id], false, true) };\n\t\t\t\n\t\t\t//console.log(\"update ref\", id)\n\t\t\t\n\t\t\t// minus initial values\n\t\t\tObject.keys(_.tweenRefOrigin[id])\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] -= _.tweenRefOrigin[id][key])\n\t\t\t      );\n\t\t\t// set defaults values in case of\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] = is.number(_.tweenRefMaps[id][key])\n\t\t\t\t                                        ? _.tweenRefMaps[id][key]\n\t\t\t\t                                        : initials[key])\n\t\t\t      );\n\t\t\t// add new initial values\n\t\t\tObject.keys(tweenableMap)\n\t\t\t      .forEach(\n\t\t\t\t      key => (_.tweenRefMaps[id][key] += tweenableMap[key])\n\t\t\t      );\n\t\t\t\n\t\t\tObject.keys(_.tweenRefOrigin[id])// unset\n\t\t\t      .forEach(\n\t\t\t\t      key => {\n\t\t\t\t\t      clearTweenableValue(key, key, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t      }\n\t\t\t      );\n\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t\n\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\tthis._updateTweenRef(id, true);\n\t\t}\n\t\telse if ( !_.tweenRefs[id] ) {\n\t\t\t//console.log(\"init ref\", id)\n\t\t\t\n\t\t\t_.iMapOrigin[id] = iMap;\n\t\t\tiStyle           = iStyle || {};\n\t\t\tiMap             = iMap || {};\n\t\t\t\n\t\t\t_.tweenRefs[id]       = true;\n\t\t\t_.muxByTarget[id]     = _.muxByTarget[id] || {};\n\t\t\t_.muxDataByTarget[id] = _.muxDataByTarget[id] || {};\n\t\t\t\n\t\t\t_.tweenRefOriginCss[id] = iStyle;\n\t\t\t\n\t\t\t_.tweenRefMaps[id] = _.tweenRefMaps[id] || {};\n\t\t\tif ( _.tweenRefOrigin[id] ) {\n\t\t\t\t//debugger\n\t\t\t\t// minus initial values from axis pre init\n\t\t\t\t//Object.keys(_.tweenRefOrigin[id])\n\t\t\t\t//      .forEach(\n\t\t\t\t//\t      key => (_.tweenRefMaps[id][key] -= _.tweenRefOrigin[id][key])\n\t\t\t\t//      );\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id], false, true) };\n\t\t\t\t\n\t\t\t\t//// set defaults values in case of\n\t\t\t\tObject.keys(initials)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = is.number(_.tweenRefMaps[id][key])\n\t\t\t\t\t                                        ? _.tweenRefMaps[id][key] - initials[key]\n\t\t\t\t\t                                        : 0)\n\t\t\t\t      );\n\t\t\t\t//// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] += tweenableMap[key])\n\t\t\t\t      );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tiStyle = { ...iStyle, ...deMuxTween(iMap, tweenableMap, initials, _.muxDataByTarget[id], _.muxByTarget[id]) };\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// init / reset or get the tweenable view\n\t\t\t\ttweenableMap = Object.assign({}, initials, tweenableMap || {});\n\t\t\t\t\n\t\t\t\t// set defaults values in case of\n\t\t\t\t// add new initial values\n\t\t\t\tObject.keys(tweenableMap)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      key => (_.tweenRefMaps[id][key] = (_.tweenRefMaps[id][key] || 0) + tweenableMap[key])\n\t\t\t\t      );\n\t\t\t}\n\t\t\t_.tweenRefOrigin[id] = { ...tweenableMap };\n\t\t\t_.tweenRefCSS[id]    = iStyle;\n\t\t\ttweenableMap         = _.tweenRefMaps[id];\n\t\t\tmuxToCss(tweenableMap, iStyle, _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\t//console.log(\"maj ref\", id)\n\t\t\t\n\t\t\tmuxToCss(_.tweenRefMaps[id], _.tweenRefCSS[id], _.muxByTarget[id], _.muxDataByTarget[id], _.box);\n\t\t}\n\t\t//console.log('tweenRef::tweenRef:519: ', id, { ..._.muxDataByTarget[id] }, { ..._.tweenRefCSS[id] });\n\t\tif ( noref )\n\t\t\treturn {\n\t\t\t\tstyle: { ..._.tweenRefCSS[id] }\n\t\t\t};\n\t\telse\n\t\t\treturn {\n\t\t\t\tstyle: { ..._.tweenRefCSS[id] },\n\t\t\t\tref  : node => (_.refs[id] = node)\n\t\t\t};\n\t}\n\t\n\t/**\n\t * Delete tweenable element\n\t * @param id\n\t */\n\trmTweenRef( id ) {\n\t\tif ( this._.tweenRefs[id] ) {\n\t\t\tthis._.tweenRefTargets.splice(this._.tweenRefTargets.indexOf(id), 1);\n\t\t\tdelete this._.tweenRefs[id];\n\t\t\tdelete this._.muxByTarget[id];\n\t\t\tdelete this._.muxDataByTarget[id];\n\t\t\tdelete this._.iMapOrigin[id];\n\t\t\tdelete this._.tweenRefOrigin[id];\n\t\t\tdelete this._.tweenRefCSS[id];\n\t\t\tdelete this._.tweenRefMaps[id];\n\t\t\tdelete this._.refs[id];\n\t\t}\n\t}\n\t\n\t/**\n\t * Reset tweenRefs\n\t * @param targets\n\t */\n\tresetTweenable( ...targets ) {\n\t\tlet _ = this._;\n\t\ttargets.forEach(\n\t\t\t( t ) => {\n\t\t\t\tthis.tweenRef(t, _.tweenRefOriginCss[t], _.iMapOrigin[t], null, null, true)\n\t\t\t}\n\t\t);\n\t\tthis._updateTweenRefs();\n\t}\n\t\n\t/**\n\t * Update tweenRefs style ( anims & axis will still update the ref )\n\t * @param target\n\t * @param style\n\t * @param postPone\n\t * @returns {*}\n\t */\n\tupdateRefStyle( target, style, postPone ) {\n\t\tlet _ = this._, initials = {}, pureCss;\n\t\tif ( isArray(target) && isArray(style) )\n\t\t\treturn target.map(( m, i ) => this.updateRefStyle(m, style[i], postPone));\n\t\tif ( isArray(target) )\n\t\t\treturn target.map(( m ) => this.updateRefStyle(m, style, postPone));\n\t\t\n\t\t//if ( !this._.tweenRefCSS )\n\t\tpureCss = deMuxTween(style, _.tweenRefMaps[target], initials, _.muxDataByTarget[target], _.muxByTarget[target]);\n\t\tObject.assign(_.tweenRefCSS[target], pureCss);\n\t\tObject.assign(_.tweenRefOriginCss[target], pureCss);\n\t\tmuxToCss(_.tweenRefMaps[target], _.tweenRefCSS[target], _.muxByTarget[target], _.muxDataByTarget[target], _.box);\n\t\tthis._updateTweenRef(target, true);\n\t}\n\t\n\t/**\n\t * Retrieve the tween ref dom node\n\t * @param id\n\t * @returns {*}\n\t */\n\tgetTweenableRef( id ) {\n\t\treturn this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]);\n\t}\n\t\n\t/**\n\t * Get the root dom node of the tweener element\n\t * @returns {*}\n\t */\n\tgetRootNode() {\n\t\treturn this._.rootRef && this.getTweenableRef(this._.rootRef) || ReactDom.findDOMNode(this);\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// -------------------- Pushable anims ------------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Push anims\n\t * @param anim\n\t * @param then\n\t * @param skipInit\n\t * @returns {tweenAxis}\n\t */\n\tpushAnim( anim, then, keepResults = true ) {\n\t\tlet sl,\n\t\t    initial,\n\t\t    _        = this._,\n\t\t    initials = {},\n\t\t    fail;\n\t\t\n\t\tif ( isArray(anim) ) {\n\t\t\tsl = anim;\n\t\t}\n\t\telse {\n\t\t\tsl      = anim.anims;\n\t\t\tinitial = anim.initial;\n\t\t}\n\t\t\n\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\t// tweenLine, initials, data, demuxers\n\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\tsl = new tweenAxis(sl, this._.tweenRefMaps);\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      id => (\n\t\t\t\t\t      this._.tweenRefMaps[id] &&\n\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t      }) || (fail = console.warn(\"react-voodoo : Can't find tween target \", id, \" in \", TweenableComp.displayName) || true)\n\t\t\t\t      )\n\t\t\t      )\n\t\t}\n\t\tif ( fail )\n\t\t\treturn;\n\t\t\n\t\t\n\t\treturn new Promise(\n\t\t\tresolve => {\n\t\t\t\t\n\t\t\t\t// start timer launch @todo\n\t\t\t\tsl.run(this._.tweenRefMaps, () => {\n\t\t\t\t\tlet i = this._.runningAnims.indexOf(sl);\n\t\t\t\t\tif ( i != -1 )\n\t\t\t\t\t\tthis._.runningAnims.splice(i, 1);\n\t\t\t\t\t//console.log( _.muxDataByTarget)\n\t\t\t\t\tObject.keys(initials)// unset\n\t\t\t\t\t      .forEach(\n\t\t\t\t\t\t      id => {\n\t\t\t\t\t\t\t      Object.keys(initials[id])// unset\n\t\t\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t\t\t            // todo\n\t\t\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id], keepResults)\n\t\t\t\t\t\t\t\t            })\n\t\t\t\t\t\t      });\n\t\t\t\t\tsl.destroy();\n\t\t\t\t\tresolve(sl);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis._.runningAnims.push(sl);\n\t\t\t\t\n\t\t\t\tif ( !this._.live ) {\n\t\t\t\t\tthis._.live = true;\n\t\t\t\t\trequestAnimationFrame(this._._rafLoop = this._._rafLoop || this._rafLoop.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t).then(sl => (then && then(sl)));\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * Update tweenRef raw tweened values\n\t * @param id\n\t * @param map\n\t * @param reset\n\t */\n\tapplyTweenState( id, map, reset ) {\n\t\tlet tmap = {}, initials = {};\n\t\tdeMuxTween(map, tmap, initials, this._.muxDataByTarget[id], this._.muxByTarget[id], true)\n\t\tObject.keys(tmap).map(\n\t\t\t( p ) => this._.tweenRefMaps[id][p] = (!reset && this._.tweenRefMaps[id][p] || initials[p]) + tmap[p]\n\t\t);\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// ------------------ Scrollable axes -------------------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Will init / update a scrollable axis\n\t * @param axe\n\t * @param _inertia\n\t * @param _scrollableArea\n\t * @param _scrollableBounds\n\t * @param _scrollableWindow\n\t * @param defaultPosition\n\t * @param scrollFirst\n\t * @param reset\n\t */\n\tinitAxis( axe, {\n\t\tinertia         : _inertia,\n\t\tscrollableArea  : _scrollableArea = 0,\n\t\tscrollableBounds: _scrollableBounds,\n\t\tscrollableWindow: _scrollableWindow,\n\t\tdefaultPosition,\n\t\tscrollFirst\n\t}, reset ) {\n\t\t\n\t\t\n\t\tlet _                = this._,\n\t\t    dim              = this.axes[axe],\n\t\t    scrollableBounds = _scrollableBounds,\n\t\t    scrollPos        = !reset && dim\n\t\t                       ? dim.scrollPos\n\t\t                       : defaultPosition || scrollableBounds && scrollableBounds.min || 0,\n\t\t    scrollableArea   = Math.max(dim && dim.scrollableArea || 0, _scrollableArea),\n\t\t    scrollableWindow = Math.max(dim && dim.scrollableWindow || 0, _scrollableWindow),\n\t\t    targetPos        = dim ? dim.targetPos : scrollPos,\n\t\t    inertia          = (\n\t\t\t    dim ? dim.inertia : new Inertia({// todo mk pure\n\t\t\t\t                                    disabled: !_inertia,\n\t\t\t\t                                    ...(_inertia || {}),\n\t\t\t\t                                    value   : scrollPos\n\t\t\t                                    })),\n\t\t    nextDescr        = {\n\t\t\t    //...(_inertia || {}),\n\t\t\t    scrollFirst,\n\t\t\t    tweenAxis: dim && dim.tweenAxis || [],\n\t\t\t    scrollPos,\n\t\t\t    targetPos,\n\t\t\t    inertia,\n\t\t\t    scrollableWindow,\n\t\t\t    scrollableBounds,\n\t\t\t    scrollableArea\n\t\t    };\n\t\t\n\t\tthis.axes[axe] = nextDescr;\n\t\t!_inertia && (inertia._.disabled = true);\n\t\t(_inertia) && inertia && (inertia._.wayPoints = _inertia.wayPoints);\n\t\t(_inertia) && inertia && !inertia.active && (inertia._.pos = scrollPos);\n\t\tif ( inertia && scrollableBounds )\n\t\t\tinertia.setBounds?.(scrollableBounds.min, scrollableBounds.max);\n\t\telse\n\t\t\tinertia && inertia.setBounds?.(0, scrollableArea)\n\t}\n\t\n\t_getAxis( axe = \"scrollY\" ) {\n\t\tlet _ = this._;\n\t\t\n\t\tthis.axes[axe] = this.axes[axe] || {\n\t\t\ttweenAxis       : [],\n\t\t\tscrollPos       : _.options.initialScrollPos && _.options.initialScrollPos[axe] || 0,\n\t\t\ttargetPos       : 0,\n\t\t\tscrollableWindow: 0,\n\t\t\tscrollableArea  : 0,\n\t\t\tinertia         : new Inertia({\n\t\t\t\t                              value: _.options.initialScrollPos && _.options.initialScrollPos[axe] || 0,\n\t\t\t\t                              ...(_.options.axes && _.options.axes[axe] && _.options.axes[axe].inertia || {})\n\t\t\t                              }),\n\t\t};\n\t\t\n\t\treturn this.axes[axe];\n\t}\n\t\n\t/**\n\t * Return axis infos\n\t */\n\tgetAxisState( axe ) {\n\t\tlet _ = this._, state = {};\n\t\tthis.axes && Object.keys(this.axes)\n\t\t                   .forEach(\n\t\t\t                   axe => (state[axe] = this.axes[axe].targetPos || this.axes[axe].scrollPos)\n\t\t                   );\n\t\treturn state;\n\t}\n\t\n\tgetScrollPos( axis = \"scrollY\" ) {\n\t\tlet _ = this._, state = {};\n\t\treturn this.axes[axis] ? this.axes[axis].targetPos || this.axes[axis].scrollPos : 0\n\t}\n\t\n\t/**\n\t * Do scroll an axis\n\t * @param newPos\n\t * @param ms\n\t * @param axe\n\t * @param ease\n\t * @returns {Promise<any | never>}\n\t */\n\tscrollTo( newPos, ms = 0, axe = \"scrollY\", ease ) {\n\t\tlet _ = this._;\n\t\treturn new Promise(\n\t\t\t(( resolve, reject ) => {\n\t\t\t\tif ( this.axes && this.axes[axe] ) {\n\t\t\t\t\tlet oldPos = this.axes[axe].targetPos,\n\t\t\t\t\t    setPos = pos => {\n\t\t\t\t\t\t    //console.log('TweenableComp::setPos:514: ',  newPos,pos, ms, axe);\n\t\t\t\t\t\t    pos                      = (~~(pos * 10000)) / 10000;\n\t\t\t\t\t\t    this.axes[axe].targetPos = this.axes[axe].scrollPos = pos;\n\t\t\t\t\t\t\n\t\t\t\t\t\t    this.axes?.[axe]?.inertia?.setPos(pos);\n\t\t\t\t\t\t    //this.axes[axe].inertia._doSnap()\n\t\t\t\t\t\t    if ( ~~pos !== oldPos )\n\t\t\t\t\t\t\t    _.rootRef?.current?.componentDidScroll?.(~~pos, axe);\n\t\t\t\t\t\t    this._updateTweenRefs()\n\t\t\t\t\t    };\n\t\t\t\t\t\n\t\t\t\t\tnewPos = Math.max(0, newPos);\n\t\t\t\t\tnewPos = Math.min(newPos, this.axes[axe].scrollableArea || 0);\n\t\t\t\t\t\n\t\t\t\t\tthis.axes[axe].targetPos = newPos;\n\t\t\t\t\t\n\t\t\t\t\tif ( !ms ) {\n\t\t\t\t\t\tthis.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\tsl => sl.goTo(newPos, _.tweenRefMaps)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetPos(newPos);\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._runScrollGoTo(axe, newPos, ms, easingFn[ease], setPos, resolve)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( !_.live ) {\n\t\t\t\t\t\t_.live = true;\n\t\t\t\t\t\trequestAnimationFrame(_._rafLoop);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})).then(\n\t\t\tp => {\n\t\t\t\tthis.axes?.[axe]?.inertia?._detectCurrentSnap();\n\t\t\t}\n\t\t)\n\t}\n\t\n\t/**\n\t * Add scrollable tween axis (scrollable anims) to a global axis\n\t * @param anim\n\t * @param axe\n\t * @param size\n\t * @returns {tweenAxis}\n\t */\n\taddScrollableAnim( anim, axe = \"scrollY\", size ) {\n\t\tlet sl,\n\t\t    _        = this._,\n\t\t    initials = {},\n\t\t    dim      = this._getAxis(axe);\n\t\t\n\t\tif ( isArray(anim) ) {\n\t\t\tsl = anim;\n\t\t}\n\t\telse {\n\t\t\tsl   = anim.anims;\n\t\t\tsize = anim.length;\n\t\t}\n\t\t\n\t\t//console.warn(\"add scrollable\")\n\t\tif ( !(sl instanceof tweenAxis) ) {\n\t\t\tsl = deMuxLine(sl, initials, this._.muxDataByTarget, this._.muxByTarget);\n\t\t\t\n\t\t\tsl          = new tweenAxis(sl, _.tweenRefMaps);\n\t\t\tsl.initials = initials;\n\t\t\t\n\t\t\tObject.keys(initials)\n\t\t\t      .forEach(\n\t\t\t\t      id => {\n\t\t\t\t\t      _.tweenRefOrigin[id] = _.tweenRefOrigin[id] || {};\n\t\t\t\t\t\n\t\t\t\t\t      _.tweenRefMaps[id] = _.tweenRefMaps[id] || {};\n\t\t\t\t\t      Object.assign(this._.tweenRefMaps[id], {\n\t\t\t\t\t\t      ...initials[id],\n\t\t\t\t\t\t      ...this._.tweenRefMaps[id]\n\t\t\t\t\t      })\n\t\t\t\t      }\n\t\t\t      )\n\t\t}\n\t\t\n\t\t\n\t\t// init scroll\n\t\tdim.tweenAxis.push(sl);\n\t\tdim.scrollPos      = dim.scrollPos || 0;\n\t\tdim.scrollableArea = dim.scrollableArea || 0;\n\t\tdim.scrollableArea = Math.max(dim.scrollableArea, sl.duration);\n\t\t\n\t\tif ( !dim.scrollableBounds )\n\t\t\tdim.inertia?.setBounds(0, dim.scrollableArea);\n\t\t\n\t\tsl.goTo(dim.scrollPos, this._.tweenRefMaps);\n\t\tthis._updateTweenRefs();\n\t\treturn sl;\n\t}\n\t\n\t/**\n\t * Remove a tweenAxis object from a component scrollable axis\n\t * @param sl\n\t * @param axe\n\t */\n\trmScrollableAnim( sl, axe = \"scrollY\" ) {\n\t\tlet _   = this._, found,\n\t\t    dim = this._getAxis(axe), twAxis;\n\t\tlet i   = dim.tweenAxis.indexOf(sl);\n\t\tif ( i !== -1 ) {\n\t\t\t\n\t\t\t//dim.tweenAxis[i].destroy();\n\t\t\tdim.tweenAxis.splice(i, 1);\n\t\t\tdim.scrollableArea = Math.max(...dim.tweenAxis.map(tl => tl.duration), 0);\n\t\t\tif ( !dim.scrollableBounds )\n\t\t\t\tdim.inertia?.setBounds(0, dim.scrollableArea || 0);\n\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps })\n\t\t\tsl.goTo(0, this._.tweenRefMaps);\n\t\t\t//console.warn(\"rm scrollable\", { ...this._.tweenRefMaps[\"card\"] })\n\t\t\t\n\t\t\tObject.keys(sl.initials)// unset\n\t\t\t      .forEach(\n\t\t\t\t      id => {\n\t\t\t\t\t      Object.keys(sl.initials[id])// unset\n\t\t\t\t\t            .forEach(\n\t\t\t\t\t\t            rkey => {\n\t\t\t\t\t\t\t            //debugger\n\t\t\t\t\t\t\t            clearTweenableValue(rkey, rkey, _.tweenRefMaps[id], _.tweenRefCSS[id], _.muxDataByTarget[id], _.muxByTarget[id])\n\t\t\t\t\t\t\t            //!_.tweenRefCSS[id] &&\n\t\t\t\t\t\t\t            //_.refs[id] && _.refs[id].style && _.refs[id].style[rkey] &&\n\t\t\t\t\t\t\t            // (_.refs[id].style[rkey] = null);\n\t\t\t\t\t\t            })\n\t\t\t\t      });\n\t\t\tdelete sl.initials;\n\t\t\tsl.destroy();\n\t\t\tfound = true;\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\t!found && console.warn(\"TweenAxis not found !\")\n\t}\n\t\n\t\n\t/**\n\t * @private fn to push scrollTo\n\t * @param axe\n\t * @param to\n\t * @param tm\n\t * @param easing\n\t * @param tick\n\t * @param cb\n\t * @private\n\t */\n\t_runScrollGoTo( axe, to, tm, easing = x => x, tick, cb ) {\n\t\tlet from   = this.axes[axe].scrollPos,\n\t\t    length = to - from;\n\t\t\n\t\t_running.push(\n\t\t\t{\n\t\t\t\tapply   : ( pos, max ) => {\n\t\t\t\t\tlet x = (from + (easing(pos / max)) * length);\n\t\t\t\t\tif ( this._.tweenEnabled ) {\n\t\t\t\t\t\t//console.log('TweenableComp::setPos:514: ', x);\n\t\t\t\t\t\tthis.axes[axe].tweenAxis.forEach(\n\t\t\t\t\t\t\tsl => sl.goTo(x, this._.tweenRefMaps)\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttick && tick(x);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tduration: tm,\n\t\t\t\tcpos    : 0,\n\t\t\t\tcb\n\t\t\t})\n\t\t;\n\t\t\n\t\tif ( !_live ) {\n\t\t\t_live  = true;\n\t\t\tlastTm = Date.now();\n\t\t\t// console.log(\"TL runner On\");\n\t\t\tsetTimeout(Runner._tick, 16);\n\t\t}\n\t}\n\t\n\t/**\n\t * Return scrollable parent node list basing a dom node\n\t * @param node\n\t * @returns {T[]}\n\t */\n\tgetScrollableNodes( node ) {\n\t\tlet scrollable = domUtils.findReactParents(node), _ = this._;\n\t\tscrollable     = _.rootRef &&\n\t\t\t_.rootRef.current &&\n\t\t\t_.rootRef.current.hookScrollableTargets &&\n\t\t\t_.rootRef.current.hookScrollableTargets(scrollable)\n\t\t\t|| scrollable;\n\t\t\n\t\treturn scrollable.map(\n\t\t\tid => (is.string(id)\n\t\t\t       ? this._.refs[id] && ReactDom.findDOMNode(this._.refs[id]) || this.refs[id] || document.getElementById(id)\n\t\t\t       : id));\n\t}\n\t\n\t/**\n\t * Hook to know if the composed element allow scrolling\n\t * @returns {boolean}\n\t */\n\tcomponentShouldScroll() {\n\t\tlet _ = this._;\n\t\treturn _.rootRef &&\n\t\t       _.rootRef.current &&\n\t\t       _.rootRef.current.componentShouldScroll ?\n\t\t       _.rootRef.current.componentShouldScroll(...arguments) : true\n\t}\n\t\n\t// ------------------------------------------------------------\n\t// --------------- Inertia & scroll modifiers -----------------\n\t// ------------------------------------------------------------\n\t\n\t/**\n\t * Retrieve updates from an axis inertia & apply them\n\t * @param dim\n\t * @param axe\n\t */\n\tapplyInertia( dim, axe ) {\n\t\tlet x = dim.inertia.update(), _ = this._;\n\t\t\n\t\tthis.axes[axe].tweenAxis.forEach(\n\t\t\tsl => {\n\t\t\t\tthis.axes[axe].targetPos = this.axes[axe].scrollPos = x;\n\t\t\t\tsl.goTo(x, this._.tweenRefMaps)\n\t\t\t}\n\t\t);\n\t\t//console.log(\"scroll at \" + x, axe, dim.inertia.active || dim.inertia.holding);\n\t\t//this.scrollTo(x, 0, axe);\n\t\t_.rootRef?.current?.componentDidScroll?.(x, axe);\n\t\tthis._updateTweenRefs()\n\t\tif ( dim.inertia.active || dim.inertia.holding ) {\n\t\t\tdim.inertiaFrame = setTimeout(this.applyInertia.bind(this, dim, axe), 33);\n\t\t}\n\t\telse {\n\t\t\tdim.inertiaFrame = null;\n\t\t\t//console.log(\"complete\");\n\t\t}\n\t}\n\t\n\t/**\n\t * Return true if at least 1 of this tweener axis have it's inertia active\n\t * @returns {boolean}\n\t */\n\tisInertiaActive() {//todo\n\t\tlet _ = this._, active = false;\n\t\tthis.axes &&\n\t\tObject.keys(this.axes)\n\t\t      .forEach(\n\t\t\t      axe => (active = active || this.axes[axe] && this.axes[axe].inertia.active)\n\t\t      );\n\t\treturn active;\n\t}\n\t\n\tdispatchScroll( delta, axe = \"scrollY\" ) {\n\t\tlet prevent,\n\t\t    dim    = this.axes[axe],\n\t\t    oldPos = dim && dim.scrollPos,\n\t\t    newPos = oldPos + delta;\n\t\t\n\t\tif ( dim && oldPos !== newPos ) {\n\t\t\t\n\t\t\tdim.inertia.dispatch(delta, 100);\n\t\t\t!dim.inertiaFrame && this.applyInertia(dim, axe);\n\t\t\t\n\t\t}\n\t\t\n\t\treturn prevent;\n\t}\n\t\n\tisAxisOut( axis, v, abs ) {\n\t\tlet _   = this._,\n\t\t    dim = this.axes && this.axes[axis],\n\t\t    pos = abs ? v : dim && (dim.scrollPos + v);\n\t\t\n\t\tpos = pos && Math.round(pos);\n\t\t\n\t\treturn !dim\n\t\t\t|| (\n\t\t\t\tdim.scrollableBounds\n\t\t\t\t?\n\t\t\t\t(pos <= dim.scrollableBounds.min || pos >= dim.scrollableBounds.max)\n\t\t\t\t:\n\t\t\t\t(pos <= 0 || pos >= dim.scrollableArea)\n\t\t\t);\n\t}\n\t\n\t_doDispatch( target, dx, dy, holding ) {\n\t\tlet style,\n\t\t    Comps,\n\t\t    headTarget = target,\n\t\t    nodeInertia,\n\t\t    i;\n\t\t\n\t\t// check if there scrollable stuff in dom targets\n\t\t// get all the parents components & dom node of an dom element ( from fibers )\n\t\t\n\t\tComps = this.getScrollableNodes(headTarget);\n\t\t//console.log(\"dispatching \", dx, dy, Comps);\n\t\tfor ( i = 0; i < Comps.length; i++ ) {\n\t\t\t// react comp with tweener support\n\t\t\tif ( Comps[i].__isTweener ) {\n\t\t\t\t//debugger\n\t\t\t\t//console.log(Comps[i], dx, dy, Comps[i].isAxisOut(\"scrollX\", dx), Comps[i].isAxisOut(\"scrollY\",\n\t\t\t\t// dy));\n\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollX\", dx) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollX\", dx)) ) {\n\t\t\t\t\tComps[i].dispatchScroll(dx, \"scrollX\", holding);\n\t\t\t\t\tdx = 0;\n\t\t\t\t}\n\t\t\t\tif ( !Comps[i].isAxisOut(\"scrollY\", dy) && (!Comps[i].componentShouldScroll || Comps[i].componentShouldScroll(\"scrollY\", dy)) ) {\n\t\t\t\t\tComps[i].dispatchScroll(dy, \"scrollY\", holding);\n\t\t\t\t\tdy = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// dom element\n\t\t\telse if ( is.element(Comps[i]) ) {\n\t\t\t\tstyle = getComputedStyle(Comps[i], null)\n\t\t\t\tif ( /(auto|scroll)/.test(\n\t\t\t\t\tstyle.getPropertyValue(\"overflow\")\n\t\t\t\t\t+ style.getPropertyValue(\"overflow-x\")\n\t\t\t\t\t+ style.getPropertyValue(\"overflow-y\")\n\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(dy < 0 && Comps[i].scrollTop !== 0)\n\t\t\t\t\t\t||\n\t\t\t\t\t\t(dy > 0 && Comps[i].scrollTop !== (Comps[i].scrollHeight - Comps[i].clientHeight))\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\t//nodeInertia.y.dispatch(dy * 10)\n\t\t\t\t\t\t//dy = 0;\n\t\t\t\t\t} // let the node do this scroll\n\t\t\t\t\t//if ( nodeInertia.x.isOutbound(dx) ) {\n\t\t\t\t\t//\tnodeInertia.x.dispatch(dx * 10)\n\t\t\t\t\t//\tdx = 0;\n\t\t\t\t\t//} // let the node do this scroll\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//headTarget = headTarget.parentNode;\n\t\t\t\t//if ( headTarget === document || headTarget === target )\n\t\t\t\t//\tbreak;\n\t\t\t}\n\t\t\tif ( !dx && !dy )\n\t\t\t\tbreak;\n\t\t}\n\t\tthis._updateNodeInertia();\n\t\tif ( !dx && !dy )\n\t\t\treturn true;\n\t}\n\t\n\t_activateNodeInertia( node ) {\n\t\tlet _ = this._,\n\t\t    i = _.activeInertia.findIndex(item => (item.target === node));\n\t\tif ( i === -1 ) {\n\t\t\t_.activeInertia.push(\n\t\t\t\t{\n\t\t\t\t\tinertia: {\n\t\t\t\t\t\tx: new Inertia({ max: node.scrollWidth - node.offsetLeft, value: node.scrollLeft }),\n\t\t\t\t\t\ty: new Inertia({ max: node.scrollHeight - node.offsetHeight, value: node.scrollTop })\n\t\t\t\t\t},\n\t\t\t\t\ttarget : node\n\t\t\t\t});\n\t\t\ti = _.activeInertia.length - 1;\n\t\t}\n\t\treturn _.activeInertia[i].inertia;\n\t\t\n\t}\n\t\n\t_updateNodeInertia = () => {\n\t\tlet _ = this._, current, ln = _.activeInertia.length;\n\t\t\n\t\tif ( this._inertiaRaf )\n\t\t\tcancelAnimationFrame(this._inertiaRaf);\n\t\t\n\t\tfor ( let i = 0; ln > i; i++ ) {\n\t\t\tcurrent = _.activeInertia[i];\n\t\t\tif ( current.inertia.x.active || current.inertia.x.holding ) {\n\t\t\t\tcurrent.target.scrollLeft = ~~current.inertia.x.update()\n\t\t\t}\n\t\t\tif ( current.inertia.y.active || current.inertia.y.holding ) {\n\t\t\t\tcurrent.target.scrollTop = ~~current.inertia.y.update()\n\t\t\t}\n\t\t\t\n\t\t\tif ( !current.inertia.x.active && !current.inertia.y.active && !current.inertia.x.holding && !current.inertia.y.holding ) {\n\t\t\t\t_.activeInertia.slice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tln--;\n\t\t\t}\n\t\t}\n\t\tif ( ln !== 0 )\n\t\t\tthis._inertiaRaf = requestAnimationFrame(this._updateNodeInertia)\n\t\telse this._inertiaRaf = null;\n\t}\n\t\n\t\n\t// ------------------------------------------------------------\n\t// --------------- Initialization & drawers -------------------\n\t// ------------------------------------------------------------\n\t\n\tsetRootRef( id ) {\n\t\tthis._.rootRef = id;\n\t}\n\t\n\t_updateBox() {\n\t\tlet node = this.getRootNode();\n\t\tif ( node ) {\n\t\t\tthis._.box.inited = true;\n\t\t\tthis._.box.x      = node.offsetWidth;\n\t\t\tthis._.box.y      = node.offsetHeight;\n\t\t}\n\t}\n\t\n\t_rafLoop() {\n\t\tthis._updateTweenRefs();\n\t\tif ( this._.runningAnims.length ) {\n\t\t\trequestAnimationFrame(this._._rafLoop);\n\t\t}\n\t\telse {\n\t\t\t//this._.live && console.log(\"RAF off\", this.constructor.displayName);\n\t\t\tthis._.live = false;\n\t\t}\n\t}\n\t\n\t_updateTweenRefs() {\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tfor ( let i = 0, target, node, style; i < this._.tweenRefTargets.length; i++ ) {\n\t\t\t\ttarget = this._.tweenRefTargets[i];\n\t\t\t\tstyle  = this._updateTweenRef(target);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_swap = {};\n\t\n\t_updateTweenRef( target, force ) {\n\t\tlet node, swap = this._swap, changes;\n\t\tthis._.tweenRefCSS[target] &&\n\t\tmuxToCss(this._.tweenRefMaps[target], swap, this._.muxByTarget[target], this._.muxDataByTarget[target], this._.box);\n\t\tnode = this.getTweenableRef(target);\n\t\tif ( node ) {\n\t\t\tfor ( let o in this._.tweenRefCSS[target] )\n\t\t\t\tif ( swap[o] === undefined ) {\n\t\t\t\t\tnode.style[o] = this._.tweenRefCSS[target][o];\n\t\t\t\t\t//\t\tnode.style[o] = null;\n\t\t\t\t\t//\t\tdelete this._.tweenRefCSS[target][o];\n\t\t\t\t}\n\t\t\tfor ( let o in swap )\n\t\t\t\tif ( this._.tweenRefCSS[target].hasOwnProperty(o) ) {\n\t\t\t\t\tif ( force || swap[o] !== this._.tweenRefCSS[target][o] ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tnode.style[o] = this._.tweenRefCSS[target][o] = swap[o];\n\t\t\t\t\t\t//if ( target == \"card\" ) console.log(target, o, node.style[o], swap[o]);\n\t\t\t\t\t\tchanges       = true;\n\t\t\t\t\t}\n\t\t\t\t\tdelete swap[o];\n\t\t\t\t}\n\t\t}\n\t\t//if ( !changes )\n\t\t//console.log('no changes', target, this._.tweenRefCSS[target], !!node, force)\n\t\treturn this._.tweenRefCSS[target];\n\t}\n\t\n\t\n\t// ------------------------------------------------------------\n\t// --------------- React Hooks --------------------------------\n\t// ------------------------------------------------------------\n\t\n\t\n\tcomponentWillUnmount() {\n\t\tlet node = this.getRootNode();\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tthis._.tweenEnabled = false;\n\t\t\twindow.removeEventListener(\"resize\", this._.onResize);\n\t\t\t\n\t\t\tObject.keys(this.axes).forEach(\n\t\t\t\taxe => {\n\t\t\t\t\tthis.axes[axe].inertiaFrame &&\n\t\t\t\t\tclearTimeout(this.axes[axe].inertiaFrame);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tsuper.componentWillUnmount && super.componentWillUnmount(...arguments);\n\t}\n\t\n\tcomponentDidMount() {\n\t\tlet _static = this.constructor;\n\t\t\n\t\tthis._.rendered = true;\n\t\tif ( this._.tweenEnabled ) {\n\t\t\t// debugger;\n\t\t\tthis._updateBox();\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\tif ( _static.scrollableAnim ) {\n\t\t\tif ( is.array(_static.scrollableAnim) )\n\t\t\t\tthis.addScrollableAnim(_static.scrollableAnim);\n\t\t\telse\n\t\t\t\tObject.keys(_static.scrollableAnim)\n\t\t\t\t      .forEach(\n\t\t\t\t\t      axe => this.addScrollableAnim(_static.scrollableAnim[axe], axe)\n\t\t\t\t      )\n\t\t}\n\t\t//if ( this._.doRegister || this.__isFirst ) {\n\t\t//\t\n\t\t//\tthis._.doRegister = false;\n\t\t//}\n\t\tsuper.componentDidMount && super.componentDidMount(...arguments);\n\t}\n\t\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\t\n\t\tif ( this._.tweenEnabled ) {\n\t\t\tthis._updateBox();\n\t\t\tthis._updateTweenRefs();\n\t\t}\n\t\tsuper.componentDidUpdate && super.componentDidUpdate(...arguments);\n\t}\n\t\n\trender() {\n\t\tconst { BaseComponent, oProps } = this.props;\n\t\treturn <TweenerContext.Consumer>\n\t\t\t{\n\t\t\t\tparentTweener => {\n\t\t\t\t\tthis._parentTweener = parentTweener;\n\t\t\t\t\treturn <TweenerContext.Provider value={this}>\n\t\t\t\t\t\t<BaseComponent {...oProps} ref={this._.rootRef} tweener={this}/>\n\t\t\t\t\t</TweenerContext.Provider>;\n\t\t\t\t}\n\t\t\t}\n\t\t</TweenerContext.Consumer>;\n\t}\n}\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function asTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    options       = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !BaseComponent ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn asTweener(BaseComponent, options)\n\t\t}\n\t}\n\t\n\toptions = {\n\t\twheelRatio    : 5,\n\t\tmaxClickTm    : 200,\n\t\tmaxClickOffset: 20,\n\t\t...options,\n\t};\n\t\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenableComp oProps={props} forwardedRef={ref} BaseComponent={BaseComponent}\n\t\t                      tweenerOptions={options}/>;\n\t});\n\twithRef.displayName = String.fromCharCode(0xD83E, 0xDDD9) + (BaseComponent.displayName || BaseComponent.name);\n\treturn withRef;\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from \"react\";\nimport is    from \"is\";\n\nimport TweenerContext from \"../comps/TweenerContext\";\n\n\nconst SimpleObjectProto = ({}).constructor;\n\n\n/**\n * asTweener decorator\n * @param argz\n * @returns {*}\n */\nexport default function withTweener( ...argz ) {\n\t\n\tlet BaseComponent = (!argz[0] || argz[0].prototype instanceof React.Component || argz[0] === React.Component) && argz.shift(),\n\t    opts          = (!argz[0] || argz[0] instanceof SimpleObjectProto) && argz.shift() || {};\n\t\n\tif ( !(BaseComponent && (BaseComponent.prototype instanceof React.Component || BaseComponent === React.Component)) ) {\n\t\treturn function ( BaseComponent ) {\n\t\t\treturn withTweener(BaseComponent, opts)\n\t\t}\n\t}\n\t\n\tclass TweenerToProps extends React.Component {\n\t\tstatic displayName = (BaseComponent.displayName || BaseComponent.name);\n\t\t\n\t\trender() {\n\t\t\treturn <TweenerContext.Consumer>\n\t\t\t\t{\n\t\t\t\t\ttweener => {\n\t\t\t\t\t\treturn <BaseComponent { ...this.props } tweener={ tweener } ref={ this.props.forwardedRef }/>;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</TweenerContext.Consumer>;\n\t\t}\n\t}\n\t\n\t\n\tlet withRef         = React.forwardRef(( props, ref ) => {\n\t\treturn <TweenerToProps { ...props } forwardedRef={ ref }/>;\n\t});\n\twithRef.displayName = TweenerToProps.displayName;\n\treturn withRef;\n}\n","/*\r\n *\r\n * Copyright (C) 2019 Nathanael Braun\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport is        from \"is\";\r\nimport tweenAxis from \"tween-axis\";\r\n//export default tweenAxis\r\nconst recyclableTweenAxis = [];\r\nexport default class CssTweenAxis extends tweenAxis {\r\n\t\r\n\tconstructor( cfg, scope ) {\r\n\t\tif ( recyclableTweenAxis.length ) {\r\n\t\t\tlet recyled   = recyclableTweenAxis.pop();\r\n\t\t\trecyled.scope = scope;\r\n\t\t\tif ( is.array(cfg) ) {\r\n\t\t\t\trecyled.localLength = 1;\r\n\t\t\t\trecyled.mount(cfg, scope);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ( cfg.Axis )\r\n\t\t\t\t\trecyled.mount(cfg.Axis, scope);\r\n\t\t\t}\r\n\t\t\treturn recyled;\r\n\t\t}\r\n\t\tsuper(...arguments)\r\n\t}\r\n\t\r\n\tdestroy() {\r\n\t\t\r\n\t\tthis.scope                  = undefined;\r\n\t\tthis.__marks.length         = 0;\r\n\t\tthis.__marksLength.length   = 0;\r\n\t\tthis.__marksKeys.length     = 0;\r\n\t\tthis.__processors.length    = 0;\r\n\t\tthis.__config.length        = 0;\r\n\t\tthis.__activeForks.length   = 0;\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\t\r\n\t\tthis.__activeProcess.length = 0;\r\n\t\tthis.__outgoing.length      = 0;\r\n\t\tthis.__incoming.length      = 0;\r\n\t\tthis.__cPos                 = 0;\r\n\t\tthis.duration               = 0;\r\n\t\tthis.__cIndex               = 0;\r\n\t\tthis.__cMaxKey              = 1;\r\n\t\trecyclableTweenAxis.push(this);\r\n\t}\r\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst props = {\n\t\"margin\"                     : { \"properties\": [\"marginTop\", \"marginRight\", \"marginBottom\", \"marginLeft\"] },\n\t\"marginBottom\"               : { \"types\": [\"length\"] },\n\t\"marginLeft\"                 : { \"types\": [\"length\"] },\n\t\"marginRight\"                : { \"types\": [\"length\"] },\n\t\"marginTop\"                  : { \"types\": [\"length\"] },\n\t\"padding\"                    : { \"properties\": [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\"] },\n\t\"paddingBottom\"              : { \"types\": [\"length\"] },\n\t\"paddingLeft\"                : { \"types\": [\"length\"] },\n\t\"paddingRight\"               : { \"types\": [\"length\"] },\n\t\"paddingTop\"                 : { \"types\": [\"length\"] },\n\t\"bottom\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"left\"                       : { \"types\": [\"length-percentage-calc\"] },\n\t\"right\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"top\"                        : { \"types\": [\"length-percentage-calc\"] },\n\t\"zIndex\"                     : { \"types\": [\"integer\"] },\n\t\"width\"                      : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"minWidth\"                   : { \"types\": [\"length-percentage-calc\"] },\n\t\"height\"                     : { \"types\": [\"length-percentage-calc\"] },\n\t\"maxHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"minHeight\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"lineHeight\"                 : { \"types\": [\"number\", \"length\"] },\n\t\"verticalAlign\"              : { \"types\": [\"length\"] },\n\t\"visibility\"                 : { \"types\": [\"visibility\"] },\n\t\"borderSpacing\"              : { \"types\": [\"length\"], \"multiple\": true },\n\t\"color\"                      : { \"types\": [\"color\"] },\n\t\"opacity\"                    : { \"types\": [\"number\"] },\n\t\"background\"                 : { \"properties\": [\"backgroundColor\", \"backgroundPosition\", \"backgroundSize\"] },\n\t\"backgroundColor\"            : { \"types\": [\"color\"] },\n\t\"backgroundPosition\"         : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"backgroundSize\"             : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"border\"                     : { \"properties\": [\"borderColor\", \"borderWidth\"] },\n\t\"borderBottom\"               : { \"properties\": [\"borderBottomColor\", \"borderBottomWidth\"] },\n\t\"borderLeft\"                 : { \"properties\": [\"borderLeftColor\", \"borderLeftWidth\"] },\n\t\"borderRight\"                : { \"properties\": [\"borderRightColor\", \"borderRightWidth\"] },\n\t\"borderTop\"                  : { \"properties\": [\"borderTopColor\", \"borderTopWidth\"] },\n\t\"borderColor\"                : { \"properties\": [\"borderTopColor\", \"borderRightColor\", \"borderBottomColor\", \"borderLeftColor\"] },\n\t\"borderWidth\"                : { \"properties\": [\"borderTopWidth\", \"borderRightWidth\", \"borderBottomWidth\", \"borderLeftWidth\"] },\n\t\"borderBottomColor\"          : { \"types\": [\"color\"] },\n\t\"borderLeftColor\"            : { \"types\": [\"color\"] },\n\t\"borderRightColor\"           : { \"types\": [\"color\"] },\n\t\"borderTopColor\"             : { \"types\": [\"color\"] },\n\t\"borderBottomWidth\"          : { \"types\": [\"length\"] },\n\t\"borderLeftWidth\"            : { \"types\": [\"length\"] },\n\t\"borderRightWidth\"           : { \"types\": [\"length\"] },\n\t\"borderTopWidth\"             : { \"types\": [\"length\"] },\n\t\"borderRadius\"               : { \"properties\": [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomRightRadius\", \"borderBottomLeftRadius\"] },\n\t\"borderTopLeftRadius\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderTopRightRadius\"       : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomRightRadius\"    : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"borderBottomLeftRadius\"     : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"boxShadow\"                  : { \"types\": [\"shadow-list\"] },\n\t\"caretColor\"                 : { \"types\": [\"color\"] },\n\t\"outline\"                    : { \"properties\": [\"outlineColor\", \"outlineWidth\"] },\n\t\"outlineColor\"               : { \"types\": [\"color\"] },\n\t\"outlineWidth\"               : { \"types\": [\"length\"] },\n\t\"outlineOffset\"              : { \"types\": [\"length\"] },\n\t\"flex\"                       : { \"properties\": [\"flexGrow\", \"flexShrink\", \"flexBasis\"] },\n\t\"flexGrow\"                   : { \"types\": [\"number\"] },\n\t\"flexShrink\"                 : { \"types\": [\"number\"] },\n\t\"flexBasis\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"order\"                      : { \"types\": [\"integer\"] },\n\t\"font\"                       : { \"properties\": [\"fontWeight\", \"fontStretch\", \"fontSize\", \"lineHeight\"] },\n\t\"fontWeight\"                 : { \"types\": [\"font-weight\"] },\n\t\"fontStretch\"                : { \"types\": [\"font-stretch\"] },\n\t\"fontSize\"                   : { \"types\": [\"length\"] },\n\t\"fontSizeAdjust\"             : { \"types\": [\"number\"] },\n\t\"gridTemplateColumns\"        : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplateRows\"           : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"gridTemplate\"               : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"grid\"                       : { \"properties\": [\"gridTemplateRows\", \"gridTemplateColumns\"] },\n\t\"gridRowGap\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridColumnGap\"              : { \"types\": [\"length-percentage-calc\"] },\n\t\"gridGap\"                    : { \"properties\": [\"gridRowGap\", \"gridColumnGap\"] },\n\t\"clip\"                       : { \"types\": [\"rectangle\"] },\n\t\"clipPath\"                   : { \"types\": [\"basic-shape\"] },\n\t\"mask\"                       : { \"properties\": [\"maskPosition\", \"maskSize\"] },\n\t\"maskPosition\"               : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"maskSize\"                   : { \"types\": [\"length-percentage-calc\"], \"multiple\": true, \"repeatable\": true },\n\t\"shapeOutside\"               : { \"types\": [\"basic-shape\"] },\n\t\"shapeMargin\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"shapeImageThreshold\"        : { \"types\": [\"number\"] },\n\t\"scrollPadding\"              : { \"properties\": [\"scrollPaddingTop\", \"scrollPaddingRight\", \"scrollPaddingBottom\", \"scrollPaddingLeft\"] },\n\t\"scrollPaddingTop\"           : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingRight\"         : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBottom\"        : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingLeft\"          : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlock\"         : { \"properties\": [\"scrollPaddingBlockStart\", \"scrollPaddingBlockEnd\"] },\n\t\"scrollPaddingBlockStart\"    : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingBlockEnd\"      : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInline\"        : { \"properties\": [\"scrollPaddingInlineStart\", \"scrollPaddingInlineEnd\"] },\n\t\"scrollPaddingInlineStart\"   : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollPaddingInlineEnd\"     : { \"types\": [\"length-percentage-calc\"] },\n\t\"scrollSnapMargin\"           : { \"properties\": [\"scrollSnapMarginTop\", \"scrollSnapMarginRight\", \"scrollSnapMarginBottom\", \"scrollSnapMarginLeft\"] },\n\t\"scrollSnapMarginTop\"        : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginRight\"      : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBottom\"     : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginLeft\"       : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlock\"      : { \"properties\": [\"scrollSnapMarginBlockStart\", \"scrollSnapMarginBlockEnd\"] },\n\t\"scrollSnapMarginBlockStart\" : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginBlockEnd\"   : { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInline\"     : { \"properties\": [\"scrollSnapMarginInlineStart\", \"scrollSnapMarginInlineEnd\"] },\n\t\"scrollSnapMarginInlineStart\": { \"types\": [\"length\"] },\n\t\"scrollSnapMarginInlineEnd\"  : { \"types\": [\"length\"] },\n\t\"textDecoration\"             : { \"properties\": [\"textDecorationColor\"] },\n\t\"textDecorationColor\"        : { \"types\": [\"color\"] },\n\t\"textEmphasis\"               : { \"properties\": [\"textEmphasisColor\"] },\n\t\"textEmphasisColor\"          : { \"types\": [\"color\"] },\n\t\"textShadow\"                 : { \"types\": [\"shadow-list\"] },\n\t\"columns\"                    : { \"properties\": [\"columnWidth\", \"columnCount\"] },\n\t\"columnWidth\"                : { \"types\": [\"length\"] },\n\t\"columnCount\"                : { \"types\": [\"integer\"] },\n\t\"columnGap\"                  : { \"types\": [\"length-percentage-calc\"] },\n\t\"columnRule\"                 : { \"properties\": [\"columnRuleColor\", \"columnRuleWidth\"] },\n\t\"columnRuleColor\"            : { \"types\": [\"color\"] },\n\t\"columnRuleWidth\"            : { \"types\": [\"length\"] },\n\t\"letterSpacing\"              : { \"types\": [\"length\"] },\n\t\"tabSize\"                    : { \"types\": [\"length\"] },\n\t\"textIndent\"                 : { \"types\": [\"length-percentage-calc\"] },\n\t\"wordSpacing\"                : { \"types\": [\"length-percentage-calc\"] },\n\t\"transform\"                  : { \"types\": [\"transform\"] },\n\t\"transformOrigin\"            : { \"types\": [\"length-percentage-calc\"], \"multiple\": true },\n\t\"perspective\"                : { \"types\": [\"length\"] },\n\t\"perspectiveOrigin\"          : { \"types\": [\"length-percentage-calc\"], \"multiple\": true }\n}\n\n//\n///**\n// * List of animatable types used by properties, with descriptions of how to interpolate each type.\n// * Data taken from https://www.w3.org/TR/css3-transitions/#animatable-types and some other W3C specs.\n// *\n// * @type {Object}\n// */\n//exports.types = {\n//\t'color'                 : {\n//\t\tname: 'color',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-color'\n//\t},\n//\t'length'                : {\n//\t\tname: 'length',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-length'\n//\t},\n//\t'percentage'            : {\n//\t\tname: 'percentage',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-percentage'\n//\t},\n//\t'length-percentage-calc': {\n//\t\tname: 'length, percentage, or calc',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-lpcalc'\n//\t},\n//\t'integer'               : {\n//\t\tname: 'integer',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-integer'\n//\t},\n//\t'font-weight'           : {\n//\t\tname: 'font weight',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-font-weight'\n//\t},\n//\t'number'                : {\n//\t\tname: 'number',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-number'\n//\t},\n//\t'rectangle'             : {\n//\t\tname: 'rectangle',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-rect'\n//\t},\n//\t'visibility'            : {\n//\t\tname: 'visibility',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-visibility'\n//\t},\n//\t'shadow-list'           : {\n//\t\tname: 'shadow list',\n//\t\thref: 'https://www.w3.org/TR/css3-transitions/#animtype-shadow-list'\n//\t},\n//\t// Other specs\n//\t'transform'             : {\n//\t\tname: 'transform',\n//\t\thref: 'https://www.w3.org/TR/css3-transforms/#interpolation-of-transforms'\n//\t},\n//\t'font-stretch'          : {\n//\t\tname: 'font stretch',\n//\t\thref: 'https://www.w3.org/TR/css3-fonts/#font-stretch-animation'\n//\t},\n//\t'basic-shape'           : {\n//\t\tname: 'basic shape',\n//\t\thref: 'https://www.w3.org/TR/css-shapes-1/#basic-shape-interpolation'\n//\t},\n//};\n//\n\nexport const units    = ['', 'deg', 'box', 'bz', 'bh', 'bw', 'deg', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'];\nexport const unitsRe  = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['\\\\w+', 'deg', 'bz', 'bh', 'bw', 'cap', 'ch', 'deg', 'em', 'ic', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\nexport const floatCut = ( v = 0 ) => Number(v.toFixed(3));\n\nexport function expandShorthandProperty( property, value, target = {} ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties,\n\t    values     = value.split(' ');\n\t\n\tif ( type.multiple )\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\ttarget[k] = values[i % values.length];\n\t\t\t}\n\t\t)\n\telse\n\t\tchildProps && childProps.forEach(\n\t\t\t( k, i ) => {\n\t\t\t\tif ( values[i] )\n\t\t\t\t\ttarget[k] = values[i];\n\t\t\t}\n\t\t)\n\treturn target;\n};\n\nexport function isShorthandProperty( property ) {\n\tlet type       = props[property],\n\t    childProps = type && type.properties;\n\treturn childProps && !!childProps.length;\n};\n\n\nexport function isValidDeclaration( property, value ) {\n\treturn !!props[property];\n};\n\n/**\n * Check if a CSS property can be animated\n * @param  {string} property CSS property name\n * @return {boolean}         True if the property can be animated\n */\nexport function canAnimate( property ) {\n\treturn props.hasOwnProperty(property);\n};\n\n/**\n * Get a definition of how a CSS property can be animated\n * @param  {string} property CSS property name\n * @param  {boolean} expand  Expand definitions for sub-properties, when available\n * @return {object}          Property definition, or null if it can't be animated\n */\nexport function getProperty( property, expand ) {\n\tif ( !exports.canAnimate(property) ) {\n\t\treturn null;\n\t}\n\tvar prop = props[property];\n\tvar ret  = { name: property };\n\tObject.keys(prop).forEach(function ( key ) {\n\t\tvar value = prop[key];\n\t\tif ( Array.isArray(value) ) {\n\t\t\tif ( key === 'properties' && expand ) {\n\t\t\t\tvalue = value.map(function ( subProp ) {\n\t\t\t\t\treturn exports.getProperty(subProp, expand);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = value.slice(); // clone\n\t\t\t}\n\t\t}\n\t\tret[key] = value;\n\t});\n\treturn ret;\n};\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/color\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                  from \"is\";\nimport {floatCut, unitsRe} from \"../cssUtils\";\n\nconst\n\tdefaultUnits = {\n\t\tblur      : 'px',\n\t\tbrightness: '%',\n\t\tcontrast  : '%',\n\t\tdropShadow: true,\n\t\tgrayscale : '%',\n\t\thueRotate : 'deg',\n\t\tinvert    : \"%\",\n\t\topacity   : \"%\",\n\t\tsaturate  : \"%\",\n\t\tsepia     : \"%\"\n\t};\nconst filters    = {};\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tconsole.log(\"dec\", twKey, path)\n\tif ( path.length === 4 ) {\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t\n\t\tif ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t//console.warn(\"free\", dataMap, path, tweenableMap[twKey])\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\tdelete tweenableMap[twKey];\n\t\t\tconsole.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]].length === 0 && !keepValues )\n\t\t\tdelete dataMap[path[0] + \"_\" + path[1] + \"_\" + path[2]];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t\n\tif ( data[\"filter_head\"] === key ) {\n\t\tlet filters = \"\";\n\t\tObject.keys(data[key]).forEach(\n\t\t\tfkey => {\n\t\t\t\tlet dkey        = key + '_' + fkey;\n\t\t\t\tdata[key][fkey] = true;\n\t\t\t\tfilters += fkey + \"(\" + floatCut(tweenable[dkey], 2) + data[dkey] + \") \";\n\t\t\t}\n\t\t)\n\t\ttarget.filter = filters;\n\t}\n\t\n}\n\n\nexport const mux = ( key, value, target, data, initials ) => {\n\t\n\tdata[\"filter_head\"] = data[\"filter_head\"] || key;\n\tdata[key]           = data[key] || {};\n\t//initials[key]       = 0;\n\t\n\tObject.keys(value).forEach(\n\t\tfkey => {\n\t\t\tlet fValue      = value[fkey],\n\t\t\t    dkey        = key + '_' + fkey,\n\t\t\t    match       = is.string(fValue) ? fValue.match(unitsRe) : false;\n\t\t\tdata[key][fkey] = true;\n\t\t\tinitials[dkey]  = 0;\n\t\t\tif ( match ) {\n\t\t\t\tif ( data[dkey] && data[dkey] !== match[2] ) {\n\t\t\t\t\tconsole.warn(\"Have != units on prop ! Ignore \", dkey, \"present:\" + data[dkey], \"new:\" + match[2]);\n\t\t\t\t\ttarget[dkey] = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdata[dkey]   = match[2];\n\t\t\t\t\ttarget[dkey] = parseFloat(match[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[dkey] = fValue;\n\t\t\t\tif ( !data[dkey] && fkey in defaultUnits )\n\t\t\t\t\tdata[dkey] = defaultUnits[fkey];\n\t\t\t}\n\t\t}\n\t)\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nexport * from \"./typed/shadow\";","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../cssUtils\";\n\nconst defaultUnits    = {\n\t      //matrix     : true,\n\t      //translate  : 'px',\n\t      translateX : 'px',\n\t      translateY : 'px',\n\t      translateZ : 'px',\n\t      scale      : '',\n\t      scaleZ     : '',\n\t      scaleX     : '',\n\t      scaleY     : '',\n\t      rotate     : 'deg',\n\t      //skew       : 'deg',\n\t      skewX      : 'deg',\n\t      skewY      : 'deg',\n\t      //matrix3d   : true,\n\t      //translate3d: true,\n\t      //scale3d    : true,\n\t      //rotate3d   : true,\n\t      rotateX    : 'deg',\n\t      rotateY    : 'deg',\n\t      rotateZ    : 'deg',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      translateX: 'x',\n\t      translateY: 'y',\n\t      translateZ: 'z',\n\t      rotateX   : 'x',\n\t      rotateY   : 'y',\n\t      rotateZ   : 'z',\n\t      left      : 'x',\n\t      right     : 'x',\n\t      top       : 'y',\n\t      bottom    : 'y',\n\t      width     : 'x',\n\t      height    : 'y',\n      }, defaultValue = {\n\t      //skew  : 1,\n\t      //skewX : 1,\n\t      //skewY : 1,\n\t      scale : 1,\n\t      scaleX: 1,\n\t      scaleY: 1,\n\t      scaleZ: 1\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length === 4 ) {\n\t\t//console.warn(\"dec\", twKey, dataMap[path[0]][path[1]][path[2]])\n\t\t// dec count on transform\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", twKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet transforms                                                 = \"\",\n\t    tmpValue                                                   = {};\n\tlet ti = 0, tmap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\ttmap = data[key][ti];\n\t\tfor ( fkey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey  = key + '_' + ti + '_' + fkey;\n\t\t\t\tvalue = \"\";\n\t\t\t\ty     = 0;\n\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t//console.log(\"mux \", key, dkey, unitKey)\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if ( !tweenable[unitKey] )\n\t\t\t\t\t\t//\tcontinue;\n\t\t\t\t\t\tiValue = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t//console.log(unitKey, tweenable[unitKey], iValue)\n\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\ty++;\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( y > 1 )\n\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\n\t\t\t\tif ( y > 0 )\n\t\t\t\t\ttransforms += fkey + \"(\" + (value || \"0\") + \") \";\n\t\t\t}\n\t}\n\ttarget.transform = transforms;\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey],\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = defaultValue[baseKey] || 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', realKey, data[key][unitKey], initials[realKey], noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\t\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, tmap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\ttmap     = value[ti];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in tmap )\n\t\t\tif ( tmap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue    = tmap[tFnKey];\n\t\t\t\tseenUnits = {};\n\t\t\t\tdkey      = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\t\n\t\t\t\t//console.warn(\"set \", key, dkey, noPropLock, baseData[tFnKey])\n\t\t\t\t\n\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t}\n\t\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\tlet value = !!(tweenable[key]);\n\treturn target ? target[key] = value : value;\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\tinitials[key] = defaultUnits[key] || 0;\n\ttarget[key]   = value === false ? 0 : 1;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport cssShadowParser            from \"css-box-shadow\";\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe, expandShorthandProperty} from \"../../cssUtils\";\nimport {bool, color}              from \"./(*).js\";\n\nconst defaultUnits  = {\n\t      perspective: 'px',\n      },\n      defaultBox    = {\n\t      translateX: 'x',\n      },\n      defaultMuxers = {\n\t      //blurRadius  : number,\n\t      inset: bool,\n\t      //offsetX     : number,\n\t      //offsetY     : number,\n\t      //spreadRadius: number,\n\t      color: color\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length > 2 ) {\n\t\t// dec count on transform\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\tif ( defaultMuxers[path[2]] ) {\n\t\t\tdefaultMuxers[path[2]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n\t\t\tif ( !dataMap[tmpKey] ) {\n\t\t\t\t//console.log(\"dec\", tmpKey, dataMap[path[0]][path[1]][path[2]])\n\t\t\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\t\tdelete dataMap[path[0]];\n\t\t\t\tdelete muxerMap[path[0]];\n\t\t\t\tdelete cssMap[path[0]];\n\t\t\t\t//console.log(\"delete color\", twKey)\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]])\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\t//tmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t// units\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", tmpKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !Object.keys(dataMap[path[0]][dataMap[path[0]].length - 1]).length )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet shadows                                                         = [],\n\t    tmpValue                                                        = {};\n\tlet ti = 0, shadowMap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\tshadowMap = data[key][ti];\n\t\ttmpValue  = {};\n\t\tfor ( fkey in shadowMap )\n\t\t\tif ( shadowMap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey = key + '_' + ti + '_' + fkey;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( defaultMuxers[fkey] ) {\n\t\t\t\t\tvalue = defaultMuxers[fkey].demux(dkey, tweenable, undefined, data, box);\n\t\t\t\t\t//continue;\n\t\t\t\t\t//console.log(dkey, tweenable[dkey])\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t\ty     = 0;\n\t\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t\tiValue  = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\t\ty++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( y > 1 )\n\t\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\ttmpValue[fkey] = (value || 0);\n\t\t\t}\n\t\tshadows.push(tmpValue);\n\t}\n\t\n\ttarget[key] = cssShadowParser.stringify(shadows);\n\t//console.log(key, shadows, target[key]);\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\tdebugger\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, shadowMap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\tshadowMap = value[ti];\n\t\tif ( is.string(shadowMap) )\n\t\t\tshadowMap = cssShadowParser.parse(shadowMap)[0];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in shadowMap ) {\n\t\t\tif ( shadowMap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue = shadowMap[tFnKey];\n\t\t\t\tdkey   = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\tif ( defaultMuxers[tFnKey] ) {\n\t\t\t\t\tdefaultMuxers[tFnKey].mux(dkey, fValue, target, data, initials, noPropLock, reOrder);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\tseenUnits = {};\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport rgba from \"color-rgba\";\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path   = twKey.split('_'),\n\t    tmpKey = path.slice(0, path.length - 1).join('_');\n\t\n\t//console.log(\"dec\", tmpKey, path, dataMap[twKey])\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\t//delete muxerMap[twKey];\n\t\t//delete cssMap[twKey];\n\t\t//console.log(\"delete\", twKey, path)\n\t}\n\tif ( !--dataMap[tmpKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\t//delete muxerMap[twKey];\n\t\t//delete cssMap[twKey];\n\t\t//console.log(\"delete\", tmpKey)\n\t}\n\t//}\n}\n\nexport function demux( key, tweenable, target, data ) {\n\tlet value = \"rgba(\" + tweenable[key + '_r'] + \", \" + tweenable[key + '_g'] + \", \" + tweenable[key + '_b'] + \", \" + tweenable[key + '_a'] + \")\";\n\treturn target ?\n\t       target[key] = value : value;\n}\n\nexport function mux( key, value, target, data, initials, noPropLock ) {\n\tlet vect = rgba(value);\n\t\n\tdata[key]        = data[key] || 0;\n\tdata[key + '_r'] = data[key + '_r'] || 0;\n\tdata[key + '_g'] = data[key + '_g'] || 0;\n\tdata[key + '_b'] = data[key + '_b'] || 0;\n\tdata[key + '_a'] = data[key + '_a'] || 0;\n\tif ( !noPropLock ) {\n\t\tdata[key] += 4;\n\t\tdata[key + '_r']++;\n\t\tdata[key + '_g']++;\n\t\tdata[key + '_b']++;\n\t\tdata[key + '_a']++;\n\t}\n\t\n\ttarget[key + '_r'] = vect[0];\n\ttarget[key + '_g'] = vect[1];\n\ttarget[key + '_b'] = vect[2];\n\ttarget[key + '_a'] = vect[3];\n\t\n\tinitials[key] = 0;\n\t\n\tinitials[key + '_r'] = 0;\n\tinitials[key + '_g'] = 0;\n\tinitials[key + '_b'] = 0;\n\tinitials[key + '_a'] = 1;\n\t\n\treturn demux;\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\ttarget[key] = ~~(tweenable[key]);// + defaultUnits[key];\n\t\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\t\n\tinitials[key] = 0;\n\ttarget[key]   = ~~value;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is          from \"is\";\nimport * as number from \"./number\";\n\nconst\n\talias = {\n\t\ttop   : '0%',\n\t\tbottom: '100%',\n\t\tcenter: '50%',\n\t\tleft  : '0%',\n\t\tright : '100%'\n\t};\n\nfunction demux( key, tweenable, target, data, box, offset ) {\n\t\n\tlet count = data[\"_\" + key], v = '', nowhere = {};\n\t\n\tfor ( let i = 0; i < count; i++ ) {\n\t\tnumber.demux(key + '_' + i, tweenable, nowhere, data, box, offset);\n\t\tv += nowhere[key + '_' + i] + ' ';\n\t}\n\t\n\ttarget[key] = v;\n}\n\n\nfunction release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\t//if ( path.length === 2 ) {\n\t//\tconsole.log(\"dec\", twKey, dataMap[path[0]][path[1]])\n\t//\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t//\t\tdelete tweenableMap[twKey];\n\t//\t\tdelete dataMap[path[0]][path[1]];\n\t//\t}\n\t//\n\t//\tif ( !keepValues )\n\t//\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t//\t\t\tdataMap[path[0]].pop();\n\t//\n\t//\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t//\t\tdelete dataMap[path[0]];\n\t//\t\tdelete muxerMap[path[0]];\n\t//\t\tdelete cssMap[path[0]];\n\t//\t\tconsole.log(\"delete\", path[0])\n\t//\t}\n\t//}\n\t//else {\n\t//console.log(\"wtf\", path)\n\t//}\n}\n\nexport default ( count ) => ({\n\tmux: ( key, value, target, data, initials, noPropLock ) => {\n\t\tlet values = value.split(' '), v;\n\t\t\n\t\tdata[key] = data[key] || 0;\n\t\tnoPropLock && data[key]++;\n\t\tdata[\"_\" + key] = count;\n\t\t\n\t\tfor ( let i = 0; i < count; i++ ) {\n\t\t\tv = values[i % values.length];\n\t\t\tv = is.string(v) && alias[v] || v;\n\t\t\tnumber.mux(key + '_' + i, v, target, data, initials, noPropLock)\n\t\t}\n\t\t\n\t\treturn demux;\n\t}, demux, release\n})","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../../cssUtils\";\n\nconst defaultUnits    = {\n\t      left       : 'px',\n\t      right      : 'px',\n\t      top        : 'px',\n\t      bottom     : 'px',\n\t      width      : 'px',\n\t      height     : 'px',\n\t      perspective: 'px',\n      },\n      defaultBox      = {\n\t      left  : 'x',\n\t      right : 'x',\n\t      top   : 'y',\n\t      bottom: 'y',\n\t      width : 'x',\n\t      height: 'y',\n      }, defaultValue = {\n\t      opacity: 0\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\t\n\tif ( path.length === 2 ) {\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]][path[1]], keepValues)\n\t\tif ( !--dataMap[path[0]][path[1]] && !keepValues ) {\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//dataMap[path[0]][path[1]] = undefined;\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tif ( cssMap ) delete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitKey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitKey] || defaultUnits[baseKey] || \"px\";\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t\t\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box, baseKey ) {\n\tlet value, i = 0, y, rKey;\n\t\n\tvalue = \"\";\n\t\n\t//if ( key==\"height\" )\n\t//\tdebugger;\n\t\n\tfor ( y = 0; y < data[key].length; y++ )\n\t\tif ( data[key][y] ) {\n\t\t\trKey = key + \"_\" + y;\n\t\t\tif ( tweenable[rKey] < 0 )\n\t\t\t\tvalue += (i ? \" - \" : \"-\") + demuxOne(y, -tweenable[rKey], baseKey || key, data, box);\n\t\t\telse\n\t\t\t\tvalue += (i ? \" + \" : \"\") + demuxOne(y, tweenable[rKey], baseKey || key, data, box);\n\t\t\ti++;\n\t\t}\n\tif ( i > 1 )\n\t\tvalue = \"calc(\" + value + \")\";\n\t\n\t//console.log(key, ':', value)\n\treturn target ? target[key] = value : value;\n}\n\nexport function muxer( key, value, target, data, initials, noPropLock ) {\n\t\n\tdata[key]     = data[key] || [];\n\tlet seenUnits = [];\n\tif ( is.array(value) ) {\n\t\tfor ( let i = 0; i < value.length; i++ ) {\n\t\t\tmuxOne(key, value[i] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t}\n\t}\n\telse {\n\t\tmuxOne(key, value || 0, target, data, initials, noPropLock)\n\t}\n\t\n\treturn demux;\n}\n\nexport function muxOne( key, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[key] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = defaultValue[key] || 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\n\nexport const mux = muxer;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst defaultUnits = { opacity: 1 };\nimport {floatCut} from \"../../cssUtils\";\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\t\n\tif ( !--dataMap[twKey] && !keepValues ) {\n\t\tdelete tweenableMap[twKey];\n\t\tdelete dataMap[twKey];\n\t\tdelete muxerMap[twKey];\n\t\tdelete cssMap[twKey];\n\t}\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\ttarget[key] = Math.min(1, Math.max(0, floatCut(tweenable[key])));\n}\n\n\nexport const mux = ( key, value, target, data, initials, noPropLock ) => {\n\t\n\t\n\tinitials[key] = defaultUnits[key] || 0;\n\ttarget[key]   = value;\n\tdata[key]     = data[key] || 0;\n\t!noPropLock && data[key]++;\n\t\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport cssShadowParser            from \"css-box-shadow\";\nimport is                         from \"is\";\nimport {floatCut, units, unitsRe} from \"../../cssUtils\";\nimport {bool, color}              from \"./(*).js\";\n\nconst defaultUnits  = {\n\t      perspective: 'px',\n      },\n      defaultBox    = {\n\t      translateX: 'x',\n      },\n      defaultMuxers = {\n\t      //blurRadius  : number,\n\t      inset: bool,\n\t      //offsetX     : number,\n\t      //offsetY     : number,\n\t      //spreadRadius: number,\n\t      color: color\n      };\n\nexport function release( twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tif ( path.length > 2 ) {\n\t\t// dec count on transform\n\t\t\n\t\ttmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\tif ( defaultMuxers[path[2]] ) {\n\t\t\tdefaultMuxers[path[2]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n\t\t\tif ( !dataMap[tmpKey] ) {\n\t\t\t\t//console.log(\"dec\", tmpKey, dataMap[path[0]][path[1]][path[2]])\n\t\t\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\t\tdelete dataMap[path[0]];\n\t\t\t\tdelete muxerMap[path[0]];\n\t\t\t\tdelete cssMap[path[0]];\n\t\t\t\t//console.log(\"delete color\", twKey)\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//console.log(\"dec\", twKey, dataMap[path[0]])\n\t\tif ( !--dataMap[path[0]][path[1]][path[2]] && !keepValues ) {\n\t\t\tdelete dataMap[path[0]][path[1]][path[2]];\n\t\t}\n\t\t//if ( Object.keys(dataMap[path[0]][path[1]]).length === 0 && !keepValues )\n\t\t//\tdelete dataMap[path[0]][path[1]];\n\t\t\n\t\t// free transform layers\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !dataMap[path[0]][dataMap[path[0]].length - 1] )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\t\n\t\t//tmpKey = path[0] + \"_\" + path[1] + \"_\" + path[2];\n\t\t// units\n\t\tif ( !--dataMap[tmpKey][path[3]] && !keepValues ) {\n\t\t\tdelete dataMap[tmpKey][path[3]];\n\t\t\t//dataMap[path[0]][path[3]] = undefined;\n\t\t\tdelete tweenableMap[twKey];\n\t\t\t//console.log(\"delete\", tmpKey)\n\t\t}\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[tmpKey].length && !dataMap[tmpKey][dataMap[tmpKey].length - 1] )\n\t\t\t\tdataMap[tmpKey].pop();\n\t\t\n\t\tif ( dataMap[tmpKey].length === 0 && !keepValues )\n\t\t\tdelete dataMap[tmpKey];\n\t\t\n\t\tif ( !keepValues )\n\t\t\twhile ( dataMap[path[0]].length && !Object.keys(dataMap[path[0]][dataMap[path[0]].length - 1]).length )\n\t\t\t\tdataMap[path[0]].pop();\n\t\t\n\t\tif ( dataMap[path[0]].length === 0 && !keepValues ) {\n\t\t\tdelete dataMap[path[0]];\n\t\t\tdelete muxerMap[path[0]];\n\t\t\tdelete cssMap[path[0]];\n\t\t\t//console.log(\"delete\", path[0])\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wtf\", path)\n\t}\n}\n\nexport function demuxOne( unitIndex, dkey, twVal, baseKey, data, box ) {\n\tlet value = twVal,\n\t    unit  = units[unitIndex] || defaultUnits[baseKey];\n\t\n\tif ( unit === 'box' ) {\n\t\tvalue = value * (box[defaultBox[baseKey]] || box.x);\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bw' ) {\n\t\tvalue = value * box.x;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'wh' ) {\n\t\tvalue = value * box.y;\n\t\tunit  = 'px';\n\t}\n\tif ( unit === 'bz' ) {\n\t\tvalue = value * box.z;\n\t\tunit  = 'px';\n\t}\n\t\n\tif ( unit === 'deg' )\n\t\tvalue = value % 360;\n\t\n\treturn unit ? floatCut(value) + unit : floatCut(value);\n}\n\nexport function demux( key, tweenable, target, data, box ) {\n\t//console.log(key)\n\tlet shadows                                                         = [],\n\t    tmpValue                                                        = {};\n\tlet ti = 0, shadowMap, fkey, unitKey, unitIndex, dkey, u, iValue, y = 0, value;\n\tfor ( ; ti < data[key].length; ti++ ) {\n\t\tshadowMap = data[key][ti];\n\t\ttmpValue  = {};\n\t\tfor ( fkey in shadowMap )\n\t\t\tif ( shadowMap.hasOwnProperty(fkey) ) {\n\t\t\t\tdkey = key + '_' + ti + '_' + fkey;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( defaultMuxers[fkey] ) {\n\t\t\t\t\tvalue = defaultMuxers[fkey].demux(dkey, tweenable, undefined, data, box);\n\t\t\t\t\t//continue;\n\t\t\t\t\t//console.log(dkey, tweenable[dkey])\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t\ty     = 0;\n\t\t\t\t\tfor ( unitIndex = 0; unitIndex < data[dkey].length; unitIndex++ )\n\t\t\t\t\t\tif ( data[dkey][unitIndex] ) {\n\t\t\t\t\t\t\tunitKey = dkey + \"_\" + unitIndex;\n\t\t\t\t\t\t\tiValue  = demuxOne(unitIndex, dkey, tweenable[unitKey], fkey, data, box);\n\t\t\t\t\t\t\tif ( y && iValue[0] === '-' )\n\t\t\t\t\t\t\t\tiValue = \" - \" + iValue.substr(1);\n\t\t\t\t\t\t\telse if ( y )\n\t\t\t\t\t\t\t\tiValue = \" + \" + iValue;\n\t\t\t\t\t\t\tvalue += iValue;\n\t\t\t\t\t\t\ty++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( y > 1 )\n\t\t\t\t\t\tvalue = \"calc(\" + value + \")\";\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\ttmpValue[fkey] = (value || 0);\n\t\t\t}\n\t\tshadows.push(tmpValue);\n\t}\n\t\n\ttarget[key] = cssShadowParser.stringify(shadows);\n\t//console.log(key, shadows, target[key]);\n\t\n}\n\nexport function muxOne( key, baseKey, value, target, data, initials, noPropLock, seenUnits ) {\n\t\n\tlet match   = is.string(value) ? value.match(unitsRe) : false,\n\t    unit    = match && match[2] || defaultUnits[baseKey] || \"px\",\n\t    unitKey = units.indexOf(unit),\n\t    realKey = unitKey !== -1 && (key + '_' + unitKey) || key;\n\t\n\tinitials[realKey]  = 0;\n\tdata[key][unitKey] = data[key][unitKey] || 0;\n\t//console.log(key, ':', data[key][unitKey], value, noPropLock)\n\t\n\tif ( seenUnits && seenUnits[unitKey] ) {\n\t\t//console.warn(key, ':', data[key][unitKey], value, noPropLock)\n\t\tif ( match ) {\n\t\t\ttarget[realKey] += parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] += parseFloat(value);\n\t\t}\n\t}\n\telse {\n\t\t\n\t\t!noPropLock && data[key][unitKey]++;\n\t\tif ( match ) {\n\t\t\ttarget[realKey] = parseFloat(match[1]);\n\t\t}\n\t\telse {\n\t\t\ttarget[realKey] = parseFloat(value);\n\t\t}\n\t\tif ( seenUnits ) seenUnits[unitKey] = true;\n\t}\n\t\n\treturn demux;\n};\nexport const mux = ( key, value, target, data, initials, noPropLock, reOrder ) => {\n\t\n\tdata[key] = data[key] || [];\n\t//initials[key] = 0;\n\t\n\tif ( !is.array(value) )\n\t\tvalue = [value];\n\tlet ti = 0, shadowMap, tFnKey, baseData, fValue, dkey, u, seenUnits;\n\tfor ( ; ti < value.length; ti++ ) {\n\t\tshadowMap = value[ti];\n\t\tif ( is.string(shadowMap) )\n\t\t\tshadowMap = cssShadowParser.parse(shadowMap)[0];\n\t\tbaseData = reOrder ? {} : { ...(data[key][ti] || {}) };\n\t\tfor ( tFnKey in shadowMap ) {\n\t\t\tif ( shadowMap.hasOwnProperty(tFnKey) ) {\n\t\t\t\tfValue = shadowMap[tFnKey];\n\t\t\t\tdkey   = key + '_' + ti + '_' + tFnKey;\n\t\t\t\t\n\t\t\t\tbaseData[tFnKey] = baseData[tFnKey] || data[key][ti] && data[key][ti][tFnKey] || 0;\n\t\t\t\t!noPropLock && baseData[tFnKey]++;\n\t\t\t\tif ( defaultMuxers[tFnKey] ) {\n\t\t\t\t\tdefaultMuxers[tFnKey].mux(dkey, fValue, target, data, initials, noPropLock, reOrder);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\tseenUnits = {};\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tdata[dkey] = data[dkey] || [];\n\t\t\t\t\tif ( is.array(fValue) ) {\n\t\t\t\t\t\tfor ( u = 0; u < fValue.length; u++ ) {\n\t\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue[u] || 0, target, data, initials, noPropLock, seenUnits)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmuxOne(dkey, tFnKey, fValue || 0, target, data, initials, noPropLock)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdata[key][ti] =\n\t\t\treOrder\n\t\t\t? { ...baseData, ...(data[key][ti] || {}), ...baseData }\n\t\t\t:\n\t\t\tbaseData;\n\t\t//console.log(key, reOrder, data[key][ti], baseData)\n\t}\n\treturn demux;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport {addCss}                                                           from \"../tweenTools\";\nimport {expandShorthandProperty, isShorthandProperty, isValidDeclaration} from \"./cssUtils\";\nimport cssDemuxers                                                        from \"./demux/(*).js\";\n\nimport {int, multi, number, ratio} from \"./demux/typed/(*).js\";\n\nconst cssDemux = {\n\t...cssDemuxers,\n\theight         : number,\n\twidth          : number,\n\ttop            : number,\n\tleft           : number,\n\tright          : number,\n\tbottom         : number,\n\tmarginTop      : number,\n\tmarginLeft     : number,\n\tmarginRight    : number,\n\tmarginBottom   : number,\n\tpaddingTop     : number,\n\tpaddingLeft    : number,\n\tpaddingRight   : number,\n\tpaddingBottom  : number,\n\tborderRadius   : number,\n\ttransformOrigin: multi(2),\n\tzIndex         : int,\n\topacity        : ratio,\n};\n\n\nexport function clearTweenableValue( cssKey, twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues ) {\n\tlet path = twKey.split('_'), tmpKey;// not optimal at all\n\tcssDemux[path[0]]\n\t&& cssDemux[path[0]].release(twKey, tweenableMap, cssMap, dataMap, muxerMap, keepValues)\n}\n\nexport function muxToCss( tweenable, css, demuxers, data, box ) {\n\tObject.keys(demuxers)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      demuxers[key].demux(key, tweenable, css, data, box)\n\t\t      }\n\t      )\n}\n\nexport function deMuxTween( tween, deMuxedTween, initials, data, demuxers, noPropLock, reOrder ) {\n\tlet fTween = {}, excluded = {};\n\tObject.keys(tween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] )\n\t\t\t\t      fTween[key] = tween[key];\n\t\t\t      else if ( isValidDeclaration(key, tween[key]) ) {\n\t\t\t\t      if ( isShorthandProperty(key) ) {\n\t\t\t\t\t      expandShorthandProperty(key, tween[key], fTween);\n\t\t\t\t      }\n\t\t\t\t      else fTween[key] = tween[key];\n\t\t\t      }\n\t\t\t      else excluded[key] = tween[key];\n\t\t      });\n\t\n\tObject.keys(fTween)\n\t      .forEach(\n\t\t      ( key ) => {\n\t\t\t      if ( cssDemux[key] ) {//key, value, target, data, initials\n\t\t\t\t      (demuxers[key] = cssDemux[key]).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t\t      }\n\t\t\t      else\n\t\t\t\t      (demuxers[key] = number).mux(key, fTween[key], deMuxedTween, data, initials, noPropLock, reOrder)\n\t\t      }\n\t      );\n\treturn excluded;\n}\n\nexport function deMuxLine( tweenLine, initials, data, demuxers, noPropLock ) {\n\tnoPropLock       = noPropLock && {};\n\tlet allPropsById = {},\n\t    twAxis       = tweenLine.reduce(\n\t\t    ( line, tween ) => {\n\t\t\t    let demuxedTween       = {};\n\t\t\t    demuxers[tween.target] = demuxers[tween.target] || {};\n\t\t\t    initials[tween.target] = initials[tween.target] || {};\n\t\t\t    data[tween.target]     = data[tween.target] || {};\n\t\t\t\n\t\t\t    if ( !tween.type || tween.type === \"Tween\" ) {\n\t\t\t\t    !noPropLock && addCss(allPropsById[tween.target] = allPropsById[tween.target] || {}, tween.apply);\n\t\t\t\t    //console.log(\"merged\", tween.apply)\n\t\t\t\t    deMuxTween(tween.apply, demuxedTween, initials[tween.target], data[tween.target], demuxers[tween.target], true);\n\t\t\t\t    line.push(\n\t\t\t\t\t    {\n\t\t\t\t\t\t    ...tween,\n\t\t\t\t\t\t    apply: demuxedTween\n\t\t\t\t\t    });\n\t\t\t    }\n\t\t\t    else line.push({ ...tween });\n\t\t\t    return line\n\t\t    },\n\t\t    []\n\t    );\n\t//console.log(allPropsById)\n\t!noPropLock && Object.keys(allPropsById)\n\t                     .forEach(\n\t\t                     id => deMuxTween(allPropsById[id], {}, {}, data[id], demuxers[id])\n\t                     )\n\t;\n\treturn twAxis;\n}","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\nlet\n\tis        = require('is'),\n\tisBrowser = typeof window !== 'undefined',\n\tisTouch   = isBrowser && (function is_touch_device() {\n\t\tvar prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n\t\tvar mq       = function ( query ) {\n\t\t\treturn window.matchMedia&&window.matchMedia(query).matches;\n\t\t}\n\t\t\n\t\tif ( ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch ) {\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t// include the 'heartz' as a way to have a non matching MQ to help terminate the join\n\t\t// https://git.io/vznFH\n\t\tvar query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n\t\treturn mq(query);\n\t}()),\n\t_dom      = isBrowser ? {\n\t\tprefix      : (/webkit/i).test(navigator.appVersion) ? 'webkit' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? 'Moz' :\n\t\t              (/trident/i).test(navigator.userAgent) ? 'ms' :\n\t\t              'opera' in window ? 'O' : '',\n\t\tdashedPrefix: (/webkit/i).test(navigator.appVersion) ? '-webkit-' :\n\t\t              (/firefox/i).test(navigator.userAgent) ? '-moz-' :\n\t\t              (/trident/i).test(navigator.userAgent) ? '-ms-' :\n\t\t              'opera' in window ? '-o-' : ''\n\t} : {\n\t\tprefix      : '',\n\t\tdashedPrefix: ''\n\t},\n\t__        = {\n\t\tonPageHided      : [],\n\t\tonPageShown      : [],\n\t\tdragging         : [],\n\t\tdragEnabled      : [],\n\t\tdragEnabledDesc  : [],\n\t\tfingers          : {},\n\t\tnbFingers        : 0,\n\t\tdragstartAnywhere: function ( e ) {\n\t\t\tlet o,\n\t\t\t    me            = __,\n\t\t\t    i             = me.dragEnabled.indexOf(this),\n\t\t\t    finger,\n\t\t\t    desc, fingers = [];\n\t\t\t\n\t\t\tif ( i === -1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//e.preventDefault();\n\t\t\t//e.stopPropagation();\n\t\t\t\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.addEvent(document,\n\t\t\t\t             {\n\t\t\t\t\t             'touchmove': me.dragAnywhere,\n\t\t\t\t\t             'mousemove': me.dragAnywhere,\n\t\t\t\t\t             'touchend' : me.dropAnywhere,\n\t\t\t\t\t             'mouseup'  : me.dropAnywhere,\n\t\t\t\t             });\n\t\t\t\tDom.addEvent(this,\n\t\t\t\t             {\n\t\t\t\t\t             'click': me.dropWithoutClick\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let t = 0, ln = fingers.length; t < ln; t++ ) {\n\t\t\t\tfinger = fingers[t];\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc = me.dragEnabledDesc[i];\n\t\t\t\t\n\t\t\t\tif ( desc.nbFingers ) continue;\n\t\t\t\t\n\t\t\t\tme.nbFingers++;\n\t\t\t\t\n\t\t\t\tme.fingers[finger.identifier] = me.fingers[finger.identifier] || [];\n\t\t\t\tme.fingers[finger.identifier].push(desc);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc.nbFingers++;\n\t\t\t\t\n\t\t\t\tdesc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\tdesc._startTs    = e.timeStamp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\n\t\t\t\tfor ( o = 0; o < desc.dragstart.length; o++ )\n\t\t\t\t\tdesc.dragstart[o][0].call(desc.dragstart[o][1] ||\n\t\t\t\t\t\t                          this, e, finger, desc);\n\t\t\t}\n\t\t},\n\t\tdragAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me              = __,\n\t\t\t    finger, fingers = [], stopped,\n\t\t\t    desc            = __.dragging[0];\n\t\t\t\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tdesc   = me.fingers[finger.identifier];\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\tif ( stopped ) {\n\t\t\t\t\t\t\tdesc._lastPos.x = desc._startPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\t\tdesc._lastPos.y = desc._startPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.drag.length; o++ )\n\t\t\t\t\t\t\tstopped = desc.drag[o][0].call(desc.drag[o][1] || this, e,\n\t\t\t\t\t\t\t                               finger,\n\t\t\t\t\t\t\t                               desc) === false;\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tdropWithoutClick : function ( e ) {\n\t\t\tif ( __.preventNextClick ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t__.preventNextClick = false;\n\t\t\t}\n\t\t\tDom.removeEvent(this,\n\t\t\t                {\n\t\t\t\t                'click': this.dropWithoutClick\n\t\t\t                });\n\t\t},\n\t\tdropAnywhere     : function ( e ) {\n\t\t\tlet o,\n\t\t\t    me = __, finger, fingers = [],\n\t\t\t    prevent;\n\t\t\t\n\t\t\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\t\t\tfingers = e.changedTouches\n\t\t\t}\n\t\t\telse fingers.push(e);\n\t\t\t\n\t\t\tfor ( let i = 0, ln = fingers.length; i < ln; i++ ) {\n\t\t\t\tfinger = fingers[i];\n\t\t\t\tme.nbFingers--;\n\t\t\t\tme.fingers[finger.identifier] &&\n\t\t\t\tme.fingers[finger.identifier].forEach(\n\t\t\t\t\tdesc => {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tdesc.nbFingers--;\n\t\t\t\t\t\tprevent         = prevent || desc.mouseDrag && (e.timeStamp - desc._startTs > 250);\n\t\t\t\t\t\tdesc._lastPos.x = _dom.prefix == 'MS' ? finger.x : finger.pageX;\n\t\t\t\t\t\tdesc._lastPos.y = _dom.prefix == 'MS' ? finger.y : finger.pageY;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor ( o = 0; o < desc.dropped.length; o++ )\n\t\t\t\t\t\t\tdesc.dropped[o][0].call(desc.dropped[o][1] ||\n\t\t\t\t\t\t\t\t                        this, e,\n\t\t\t\t\t\t\t                        finger, desc);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tme.fingers[finger.identifier] = null;\n\t\t\t}\n\t\t\tif ( prevent ) {\n\t\t\t\tme.preventNextClick = true;\n\t\t\t}\n\t\t\tif ( !me.nbFingers ) {\n\t\t\t\tDom.removeEvent(document,\n\t\t\t\t                {\n\t\t\t\t\t                'touchmove': me.dragAnywhere,\n\t\t\t\t\t                'mousemove': me.dragAnywhere,\n\t\t\t\t\t                'touchend' : me.dropAnywhere,\n\t\t\t\t\t                'mouseup'  : me.dropAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\tgetDraggable     : function ( node, mouseDrag ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i === -1 ) {\n\t\t\t\tthis.dragEnabled.push(node);\n\t\t\t\tthis.dragEnabledDesc.push(\n\t\t\t\t\tdesc = {\n\t\t\t\t\t\tmouseDrag,\n\t\t\t\t\t\tnbFingers: 0,\n\t\t\t\t\t\tlocks    : 0,\n\t\t\t\t\t\t_startPos: {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\t_lastPos : {\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdragstart: [],\n\t\t\t\t\t\tdrag     : [],\n\t\t\t\t\t\tdragEnd  : [],\n\t\t\t\t\t\tdropped  : []\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t//debugger;\n\t\t\t\tDom.addEvent(node,\n\t\t\t\t             {\n\t\t\t\t\t             'mousedown' : mouseDrag && this.dragstartAnywhere,\n\t\t\t\t\t             'touchstart': this.dragstartAnywhere\n\t\t\t\t             }, null, null, true);\n\t\t\t}\n\t\t\telse desc = this.dragEnabledDesc[i];\n\t\t\treturn desc;\n\t\t},\n\t\tfreeDraggable    : function ( node ) {\n\t\t\tlet i = this.dragEnabled.indexOf(node), desc;\n\t\t\tif ( i !== -1 ) {\n\t\t\t\tthis.dragEnabled.splice(i, 1);\n\t\t\t\tthis.dragEnabledDesc.splice(i, 1);\n\t\t\t\t\n\t\t\t\tDom.removeEvent(node,\n\t\t\t\t                {\n\t\t\t\t\t                'mousedown' : this.dragstartAnywhere,\n\t\t\t\t\t                'touchstart': this.dragstartAnywhere\n\t\t\t\t                });\n\t\t\t}\n\t\t},\n\t\taddOverflowEvent : function addFlowListener( element, fn ) {\n\t\t\t\n\t\t\tlet type = 'over', flow = type == 'over';\n\t\t\t\n\t\t\telement.addEventListener('OverflowEvent' in window ? 'overflowchanged' : type + 'flow',\n\t\t\t                         function ( e ) {\n\t\t\t\t                         if ( e.type == (type + 'flow') ||\n\t\t\t\t\t                         ((e.orient == 0 && e.horizontalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 1 && e.verticalOverflow == flow) ||\n\t\t\t\t\t\t                         (e.orient == 2 && e.horizontalOverflow == flow &&\n\t\t\t\t\t\t\t                         e.verticalOverflow == flow)) ) {\n\t\t\t\t\t                         return fn.call(this, e);\n\t\t\t\t                         }\n\t\t\t                         }, false);\n\t\t\t\n\t\t},\n\t\taddEvent         : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.addEventListener ) {\n\t\t\t\tnode.addEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t                 });\n\t\t\t}\n\t\t},\n\t\tremoveEvent      : function ( node, type, fn, bubble ) {\n\t\t\tif ( node.removeEventListener ) {\n\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t}\n\t\t\telse if ( node.attachEvent ) {\n\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t}\n\t\t},\n\t\trmDragFn         : function ( arr, fn, scope ) {\n\t\t\tfor ( let i = 0, ln = arr.length; i < ln; i++ ) {\n\t\t\t\tif ( arr[i][0] === fn )\n\t\t\t\t\treturn arr.splice(i, 1);\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Rm event : Listener not found !!\");\n\t\t},\n\t},\n\tDom       = {\n\t\taddEvent     : function ( node, type, fn, mouseDrag, bubble ) {\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) && type[o] )\n\t\t\t\t\t\tthis.addEvent(node, o, type[o], mouseDrag, bubble);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if ( type == 'dragstart' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dragstart.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'drag' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).drag.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse if ( type == 'dropped' ) {\n\t\t\t\t__.getDraggable(node, mouseDrag).dropped.push([fn, mouseDrag]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.addEventListener ) {\n\t\t\t\t\tnode.addEventListener(type, fn, { passive: false });\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.attachEvent('on' + type,\n\t\t\t\t\t                 fn.related = function ( e ) {\n\t\t\t\t\t\t                 return fn.call(node, e);\n\t\t\t\t\t                 });\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tremoveEvent  : function ( node, type, fn, scope, bubble ) {\n\t\t\tlet i, desc;\n\t\t\t\n\t\t\tif ( is.object(type) ) {\n\t\t\t\tfor ( let o in type )\n\t\t\t\t\tif ( type.hasOwnProperty(o) )\n\t\t\t\t\t\tthis.removeEvent(node, o, type[o], scope);\n\t\t\t\t\n\t\t\t}\n\t\t\telse if ( /^(drag|drop)/.test(type) ) {\n\t\t\t\tdesc = __.getDraggable(node);\n\t\t\t\t__.rmDragFn(desc[type], fn, scope);\n\t\t\t\tif ( !desc.dragstart.length\n\t\t\t\t\t&& !desc.drag.length\n\t\t\t\t\t&& !desc.dragEnd.length\n\t\t\t\t\t&& !desc.dropped.length )\n\t\t\t\t\t__.freeDraggable(node);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( node.removeEventListener ) {\n\t\t\t\t\tnode.removeEventListener(type, fn, bubble);\n\t\t\t\t}\n\t\t\t\telse if ( node.attachEvent ) {\n\t\t\t\t\tnode.detachEvent('on' + type, fn.related);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\toffset       : function ( elem ) {// @todo\n\t\t\tlet dims = { top: 0, left: 0, width: elem.offsetWidth, height: elem.offsetHeight };\n\t\t\twhile ( elem ) {\n\t\t\t\tdims.top  = dims.top + parseInt(elem.offsetTop);\n\t\t\t\tdims.left = dims.left + parseInt(elem.offsetLeft);\n\t\t\t\telem      = elem.offsetParent;\n\t\t\t}\n\t\t\treturn dims;\n\t\t},\n\t\taddWheelEvent: isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _addEventListener, _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( window.addEventListener ) {\n\t\t\t\t_addEventListener = \"addEventListener\";\n\t\t\t\t_rmEventListener  = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_addEventListener = \"attachEvent\";\n\t\t\t\t_rmEventListener  = \"detachEvent\";\n\t\t\t\tprefix            = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tconst addWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_addWheelListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_addWheelListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// Reasonable defaults\n\t\t\tlet PIXEL_STEP         = 10;\n\t\t\tlet LINE_HEIGHT        = 40;\n\t\t\tlet PAGE_HEIGHT        = 800;\n\t\t\t\n\t\t\tfunction normalizeWheel( /*object*/ event ) /*object*/ {\n\t\t\t\tlet sX = 0, sY = 0,       // spinX, spinY\n\t\t\t\t    pX         = 0, pY = 0;       // pixelX, pixelY\n\t\t\t\t\n\t\t\t\t// Legacy\n\t\t\t\tif ( 'detail' in event ) {\n\t\t\t\t\tsY = event.detail;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDelta' in event ) {\n\t\t\t\t\tsY = -event.wheelDelta / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaY' in event ) {\n\t\t\t\t\tsY = -event.wheelDeltaY / 120;\n\t\t\t\t}\n\t\t\t\tif ( 'wheelDeltaX' in event ) {\n\t\t\t\t\tsX = -event.wheelDeltaX / 120;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// side scrolling on FF with DOMMouseScroll\n\t\t\t\tif ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n\t\t\t\t\tsX = sY;\n\t\t\t\t\tsY = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpX = sX * PIXEL_STEP;\n\t\t\t\tpY = sY * PIXEL_STEP;\n\t\t\t\t\n\t\t\t\tif ( 'deltaY' in event ) {\n\t\t\t\t\tpY = event.deltaY;\n\t\t\t\t}\n\t\t\t\tif ( 'deltaX' in event ) {\n\t\t\t\t\tpX = event.deltaX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( (pX || pY) && event.deltaMode ) {\n\t\t\t\t\tif ( event.deltaMode == 1 ) {          // delta in LINE units\n\t\t\t\t\t\tpX *= LINE_HEIGHT;\n\t\t\t\t\t\tpY *= LINE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t\telse {                             // delta in PAGE units\n\t\t\t\t\t\tpX *= PAGE_HEIGHT;\n\t\t\t\t\t\tpY *= PAGE_HEIGHT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Fall-back if spin cannot be determined\n\t\t\t\tif ( pX && !sX ) {\n\t\t\t\t\tsX = (pX < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\tif ( pY && !sY ) {\n\t\t\t\t\tsY = (pY < 1) ? -1 : 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tspinX : sX,\n\t\t\t\t\tspinY : sY,\n\t\t\t\t\tpixelX: pX,\n\t\t\t\t\tpixelY: pY\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tfunction _addWheelListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_addEventListener](prefix + eventName, callback._wheelList = function ( originalEvent ) {\n\t\t\t\t\t!originalEvent && (originalEvent = window.event);\n\t\t\t\t\t\n\t\t\t\t\t// create a normalized event object\n\t\t\t\t\tlet event = {\n\t\t\t\t\t\t// keep a ref to the original event object\n\t\t\t\t\t\toriginalEvent : originalEvent,\n\t\t\t\t\t\ttarget        : originalEvent.target || originalEvent.srcElement,\n\t\t\t\t\t\ttype          : \"wheel\",\n\t\t\t\t\t\tdeltaMode     : originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n\t\t\t\t\t\tdeltaX        : 0,\n\t\t\t\t\t\tdelatZ        : 0,\n\t\t\t\t\t\tpreventDefault: function () {\n\t\t\t\t\t\t\toriginalEvent.preventDefault ?\n\t\t\t\t\t\t\toriginalEvent.preventDefault() :\n\t\t\t\t\t\t\toriginalEvent.returnValue = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnormalized    : normalizeWheel(originalEvent)\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// calculate deltaY (and deltaX) according to the event\n\t\t\t\t\tif ( support == \"mousewheel\" ) {\n\t\t\t\t\t\tevent.deltaY = -1 / 40 * originalEvent.wheelDelta;\n\t\t\t\t\t\t// Webkit also support wheelDeltaX\n\t\t\t\t\t\t//                            originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 *\n\t\t\t\t\t\t// originalEvent.wheelDeltaX );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" && _dom.prefix == \"Moz\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 3;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( support == \"wheel\" ) {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY / 100;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tevent.deltaY = originalEvent.deltaY;\n\t\t\t\t\t}\n\t\t\t\t\t//                        if (typeof originalEvent.wheelDeltaY !== 'number')\n\t\t\t\t\t//                            event.wheelDeltaY = originalEvent.deltaY/100;\n\t\t\t\t\t\n\t\t\t\t\t//                        event.wheelDelta = deltaY*120;\n\t\t\t\t\t\n\t\t\t\t\t// it's time to fire the callback\n\t\t\t\t\treturn callback.call(scope || this, event);\n\t\t\t\t\t\n\t\t\t\t}, useCapture || false);\n\t\t\t}\n\t\t\t\n\t\t\treturn addWheelListener;\n\t\t})(window, document),\n\t\trmWheelEvent : isBrowser && (function ( window, document ) {\n\t\t\t\n\t\t\tlet prefix = \"\", _rmEventListener, onwheel, support;\n\t\t\t\n\t\t\t// detect event model\n\t\t\tif ( addEventListener ) {\n\t\t\t\t_rmEventListener = \"removeEventListener\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_rmEventListener = \"detachEvent\";\n\t\t\t\tprefix           = \"on\";\n\t\t\t}\n\t\t\t\n\t\t\t// detect available wheel event\n\t\t\tsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n\t\t\t          document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n\t\t\t          \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\t\t\t\n\t\t\tlet rmWheelListener = function ( elem, callback, scope, useCapture ) {\n\t\t\t\t_EventListener(elem, support, callback, scope, useCapture);\n\t\t\t\t\n\t\t\t\t// handle MozMousePixelScroll in older Firefox\n\t\t\t\tif ( support == \"DOMMouseScroll\" ) {\n\t\t\t\t\t_EventListener(elem, \"MozMousePixelScroll\", callback, scope, useCapture);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tfunction _EventListener( elem, eventName, callback, scope, useCapture ) {\n\t\t\t\telem[_rmEventListener](prefix + eventName, callback._wheelList);\n\t\t\t}\n\t\t\t\n\t\t\treturn rmWheelListener;\n\t\t})(window, document),\n\t\t\n\t\t\n\t\t/**\n\t\t * Find the react component that generate element dom node\n\t\t * @param element\n\t\t * @returns {[React.Component]}\n\t\t */\n\t\tfindReactParents( element ) {\n\t\t\tlet fiberNode, comps = [element];\n\t\t\tfor ( const key in element ) {\n\t\t\t\t\n\t\t\t\tif ( key.startsWith('__reactInternalInstance$') ) {\n\t\t\t\t\tfiberNode = element[key];\n\t\t\t\t\twhile ( fiberNode.return ) {\n\t\t\t\t\t\tif ( fiberNode.stateNode && !comps.includes(fiberNode.stateNode) )\n\t\t\t\t\t\t\tcomps.push(fiberNode.stateNode)\n\t\t\t\t\t\tfiberNode = fiberNode.return;\n\t\t\t\t\t}\n\t\t\t\t\treturn comps;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn element.parentNode && this.findReactParents(element.parentNode);\n\t\t}\n\t\t\n\t};\nexport default Dom;","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst is       = require('is'),\n      easingFn = require('d3-ease'),\n      signOf   = function sign( x ) {\n\t      return typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? x : NaN : NaN;\n      },\n      abs      = Math.abs,\n      floor    = Math.floor,\n      round    = Math.round,\n      min      = Math.min,\n      max      = Math.max,\n      floatCut = ( v = 0 ) => v.toFixed(3),\n      consts   = {\n\t      velocityResetTm: 150,\n\t      clickTm        : 250\n      };\n\n// this is a mess\n\n\n/**\n * Predict the inertia\n * @param _\n */\nexport function applyInertia( _ ) {\n\tlet velSign = signOf(_.lastVelocity);\n\t\n\tif ( _.disabled ) {\n\t\t// calc momentum distance...\n\t\t// get nb loop needed to get vel < .05\n\t\t_.loopsTarget = 0;\n\t\t\n\t\t// get velocity sum basing on nb loops needed\n\t\t_.loopsVelSum    = 0;\n\t\t// deduce real dist of momentum\n\t\t_.targetDist     = 0;\n\t\t_.targetDuration = 0;\n\t}\n\telse {\n\t\t// get nb loop needed to get vel < .05\n\t\t_.loopsTarget = floor(Math.log(.05 / abs(_.lastVelocity)) / Math.log(.9));\n\t\t\n\t\t// get velocity sum basing on nb loops needed\n\t\t_.loopsVelSum    = (Math.pow(.9, _.loopsTarget) - abs(_.lastVelocity)) / (.9 - 1);\n\t\t// deduce real dist of momentum\n\t\t_.targetDist     = (_.loopsVelSum * _.refFPS * velSign) || 0;\n\t\t_.targetDuration = abs(_.loopsTarget * _.refFPS * velSign) || 0;\n\t\tconsole.log('applyInertia::applyInertia:67: ', _.targetDist, _.loopsVelSum, _.lastVelocity);\n\t}\n\t\n}\n\nconst inertiaByNode = {\n\tnodes  : [],\n\tinertia: []\n};\n/**\n * Main inertia class\n * @class Caipi slideshow\n * @type {module.exports}\n */\nexport default class Inertia {\n\tstatic config = {\n\t\tbounds      : true,\n\t\tsnapToBounds: true\n\t};\n\t\n\tconstructor( opt ) {\n\t\tlet _  = this._ = {};\n\t\t_.conf = {\n\t\t\t...this.constructor.config,\n\t\t\t...opt,\n\t\t\t//get lastInertiaPos() {\n\t\t\t//\treturn this._lastInertiaPos\n\t\t\t//},\n\t\t\t//set lastInertiaPos( v ) {\n\t\t\t//\tif ( v === NaN )\n\t\t\t//\t\tdebugger\n\t\t\t//\tthis._lastInertiaPos = v;\n\t\t\t//}\n\t\t};\n\t\t\n\t\tthis.active           = false;\n\t\t_.pos                 = opt.value || 0;\n\t\t_.refFPS              = 16;\n\t\t_.min                 = opt.min || 0;\n\t\t_.max                 = opt.max || 0;\n\t\t_.currentStop         = 0;\n\t\t_.lastInertiaPos      = 0;\n\t\t_.stops               = _.conf.stops;\n\t\t_.disabled            = _.conf.disabled;\n\t\t_.wayPoints           = _.conf.wayPoints;\n\t\t_.inertiaFn           = easingFn.easePolyOut;\n\t\t_.targetWayPointIndex = 0;\n\t\t//console.log('Inertia::constructor:113: ');\n\t\tthis._detectCurrentSnap()\n\t\t\n\t}\n\t\n\tupdate( at = Date.now() ) {\n\t\tlet _   = this._, nextValue, loop;\n\t\tlet\n\t\t\tpos = _.inertiaFn((at - _.inertiaStartTm) / _.targetDuration) * _.targetDist;\n\t\t\n\t\tif ( !_.inertia ) {\n\t\t\t//if ( _.conf.shouldLoop ) {\n\t\t\t//\twhile ( (loop = _.conf.shouldLoop(_.pos, 0)) ) {\n\t\t\t//\t\tthis.teleport(loop);\n\t\t\t//\t}\n\t\t\t//}\n\t\t\treturn _.pos;\n\t\t}\n\t\tlet\n\t\t\tdelta        = pos - _.lastInertiaPos;\n\t\t_.lastInertiaPos = pos;\n\t\t\n\t\tif ( (at - _.inertiaStartTm) >= _.targetDuration ) {\n\t\t\t_.inertia        = this.active = false;\n\t\t\t_.lastInertiaPos = delta = 0;\n\t\t\t_.targetDist     = 0;\n\t\t\tif ( _.targetWayPoint ) {\n\t\t\t\tdelta                  = _.targetWayPoint.at - _.pos;\n\t\t\t\t//console.log(\"snap done \", _.targetWayPoint, _.pos + delta);\n\t\t\t\t_.currentWayPoint      = _.targetWayPoint;\n\t\t\t\t_.currentWayPointIndex = _.targetWayPointIndex;\n\t\t\t\t_.targetWayPoint       = null;\n\t\t\t\t_.targetWayPointIndex  = null;\n\t\t\t\t//_.lastSnapTm           = Date.now();\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.onInertiaEnd ) {\n\t\t\t\t_.conf.onInertiaEnd(_.pos, _.currentWayPoint)\n\t\t\t}\n\t\t}\n\t\t\n\t\tdelta     = delta || 0;\n\t\t//console.log(_.pos + delta);\n\t\tnextValue = _.pos + delta;\n\t\t\n\t\tif ( delta && _.conf.shouldLoop ) {\n\t\t\t\n\t\t\twhile ( (loop = _.conf.shouldLoop(nextValue, delta)) ) {\n\t\t\t\t//console.warn(\"loop update\", loop);\n\t\t\t\tnextValue += loop;\n\t\t\t\t//this.teleport(loop);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = nextValue;\n\t\t\n\t\treturn nextValue;\n\t}\n\t\n\tsetPos( pos ) {\n\t\tlet _            = this._, nextValue;\n\t\t_.inertia        = false;\n\t\tthis.active      = false;\n\t\t_.lastInertiaPos = 0;\n\t\t_.targetDist     = 0;\n\t\t_.pos            = pos;\n\t\tif ( _.conf.bounds ) {\n\t\t\t_.pos = max(_.pos, _.min);\n\t\t\t_.pos = min(_.pos, _.max);\n\t\t}\n\t}\n\t\n\tsetWayPoints( wayPoints ) {\n\t\tlet _       = this._, nextValue;\n\t\t_.wayPoints = wayPoints;\n\t\tthis._detectCurrentSnap();\n\t}\n\t\n\tteleport( loopDist ) {\n\t\tlet _ = this._, nextValue;\n\t\tif ( !_.inertia )\n\t\t\treturn _.pos += loopDist;\n\t\t\n\t\t//_.lastInertiaPos += loopDist;\n\t\t_.pos += loopDist\n\t\t//console.log(\"setPos\", _.lastInertiaPos);\n\t}\n\t\n\tdispatch( delta, tm = 500 ) {\n\t\tlet _   = this._,\n\t\t    now = Date.now(),\n\t\t    pos;\n\t\t\n\t\tthis.active = true;\n\t\t\n\t\t// if no inertia has started || if direction has change\n\t\tif ( !_.inertia || signOf(delta) !== signOf(_.targetDist) ) {\n\t\t\t_.inertia        = true;\n\t\t\t_.lastInertiaPos = 0;\n\t\t\t_.inertiaStartTm =\n\t\t\t\t_.inertiaLastTm = now;\n\t\t\t\n\t\t\t_.targetDist     = delta;\n\t\t\t_.targetDuration = tm;\n\t\t}\n\t\telse {\n\t\t\t//_.inertiaStartTm =\n\t\t\t//_.inertiaLastTm = now;\n\t\t\t//_.lastInertiaPos = 0;\n\t\t\t_.targetDist += delta;\n\t\t\t_.targetDuration += tm / 2;\n\t\t}\n\t\t//\n\t\t//if ( _.conf.maxJump ) {\n\t\t//\n\t\t//}\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\tthis._doSnap(signOf(delta), 750)\n\t}\n\t\n\t\n\t_detectCurrentSnap() {\n\t\tlet _   = this._,\n\t\t    pos = _.pos,\n\t\t    i;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( floatCut(_.wayPoints[i].at) === floatCut(pos) ) {\n\t\t\t\t\t_.currentWayPoint      = _.wayPoints[i];\n\t\t\t\t\t_.currentWayPointIndex = i;\n\t\t\t\t\t//console.warn(\"snap set\", i);\n\t\t\t\t\t\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t}\n\t}\n\t\n\t_doSnap( forceSnap, maxDuration = 2000 ) {\n\t\tlet _   = this._,\n\t\t    pos = _.targetDist + (_.pos - (_.lastInertiaPos || 0)),\n\t\t    target,\n\t\t    mid,\n\t\t    i,\n\t\t    i2;\n\t\t\n\t\tif ( _.wayPoints && _.wayPoints.length ) {\n\t\t\tfor ( i = 0; i < _.wayPoints.length; i++ )\n\t\t\t\tif ( _.wayPoints[i].at > pos )\n\t\t\t\t\tbreak;\n\t\t\t\n\t\t\tif ( i === _.wayPoints.length ) {\n\t\t\t\ti--\n\t\t\t}\n\t\t\telse if ( i === 0 ) {\n\t\t\t\ti = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmid = _.wayPoints[i - 1].at + (_.wayPoints[i].at - _.wayPoints[i - 1].at) / 2;\n\t\t\t\tif ( forceSnap ) forceSnap < 0 && i--;\n\t\t\t\telse if ( pos < mid ) i--;\n\t\t\t}\n\t\t\t\n\t\t\tif ( _.conf.maxJump && is.number(_.currentWayPointIndex) ) {\n\t\t\t\tlet d = (i - _.currentWayPointIndex);\n\t\t\t\t//console.log('Inertia::_doSnap:154: ', i, d);\n\t\t\t\tif ( abs(d) > _.conf.maxJump ) {\n\t\t\t\t\t//console.log('max: ', i, d);\n\t\t\t\t\ti = _.currentWayPointIndex + signOf(d) * _.conf.maxJump;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = _.wayPoints[i].at;\n\t\t\t\n\t\t\tif ( _.conf.willSnap ) {\n\t\t\t\t_.conf.willSnap(i, _.wayPoints[i]);\n\t\t\t}\n\t\t\t\n\t\t\t_.lastInertiaPos      = _.lastInertiaPos || 0;\n\t\t\ttarget                = target - (_.pos - _.lastInertiaPos);\n\t\t\t_.targetDuration      = max(50, min(maxDuration, abs((_.targetDuration / _.targetDist) * target))) || 0;\n\t\t\t//console.log(\"do snap\", i, target, _.targetDist, _.targetDuration);\n\t\t\t_.targetDist          = target;\n\t\t\t_.targetWayPoint      = _.wayPoints[i];\n\t\t\t_.targetWayPointIndex = i;\n\t\t}\n\t\telse {\n\t\t\ttarget = ~~(_.pos - _.lastInertiaPos);\n\t\t\t\n\t\t\tif ( !_.conf.infinite ) {\n\t\t\t\tif ( target > _.max ) {\n\t\t\t\t\ttarget           = _.max - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t\telse if ( target < _.min ) {\n\t\t\t\t\ttarget           = _.min - target;\n\t\t\t\t\t_.targetDuration = min(maxDuration, abs((_.targetDuration / _.targetDist) * target));\n\t\t\t\t\t_.targetDist     = target;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tsetBounds( min, max ) {\n\t\tlet _ = this._;\n\t\t//console.log('Inertia::setBounds:245: ', min, max);\n\t\t_.min = min;\n\t\t_.max = max;\n\t}\n\t\n\tstartMove() {\n\t\tlet _          = this._;\n\t\t_.baseTS       = _.startTS = Date.now();\n\t\t_.lastVelocity = _.lastIVelocity = 0;\n\t\t_.lastAccel    = 0;\n\t\t_.posDiff      = 0;\n\t\tthis.active    = true;\n\t\tthis.holding   = true;\n\t\t_.inertia      = false;\n\t}\n\t\n\tisInbound( nextPos ) {\n\t\tlet _     = this._, loop,\n\t\t    delta = _.lastHoldPos !== undefined ? nextPos - _.lastHoldPos : 0,\n\t\t    pos   = (_.targetDist || 0) + (_.pos - (_.lastInertiaPos || 0)) + delta;\n\t\t//if ( _.conf.infinite ) return false;\n\t\t//\n\t\t//if ( _.conf.shouldLoop ) {\n\t\t//\twhile ( (loop = _.conf.shouldLoop(nextValue)) ) {\n\t\t//!(pos >= _.min && pos <= _.max) && console.warn(\"out\", _.pos, pos, delta);\n\t\t//\t\tpos += loop;\n\t\t//\t}\n\t\t//}\n\t\t//console.log('Inertia::isInbound:359: ', pos, _.max);\n\t\treturn pos >= _.min && pos <= _.max;\n\t}\n\t\n\thold( nextPos ) {\n\t\tlet _     = this._,\n\t\t    delta = _.lastHoldPos !== undefined ? nextPos - _.lastHoldPos : 0,\n\t\t    loop;\n\t\t\n\t\t//_.holding     = true;\n\t\t_.lastHoldPos = nextPos;\n\t\tif ( delta && _.conf.shouldLoop ) {\n\t\t\t//while ( (loop = _.conf.shouldLoop(pos, delta)) ) {\n\t\t\tconsole.warn(\"loop\", loop);\n\t\t\t//\tpos += loop;\n\t\t\t//}\n\t\t\twhile ( (loop = _.conf.shouldLoop(_.pos, delta)) ) {\n\t\t\t\t//console.warn(\"loop\", loop);\n\t\t\t\t_.pos += loop;\n\t\t\t}\n\t\t}\n\t\tlet now          = Date.now(),//e.timeStamp,\n\t\t    sinceLastPos = (now - _.baseTS),\n\t\t    pos          = _.pos + delta,\n\t\t    iVel         = delta / sinceLastPos;\n\t\t\n\t\tif ( !sinceLastPos || !iVel )\n\t\t\treturn;\n\t\t//\tdebugger\n\t\tconsole.log(\"hold\", sinceLastPos, iVel);\n\t\t_.lastIVelocity       = iVel;\n\t\t_.lastVelocity        = (_.lastIVelocity * iVel) / iVel;\n\t\t_.baseTS              = now;\n\t\t_.targetDist          = 0;\n\t\t_.lastInertiaPos      = 0;\n\t\t// clear snap\n\t\t_.targetWayPoint      = undefined;\n\t\t_.targetWayPointIndex = undefined;\n\t\t\n\t\tif ( _.conf.bounds ) {\n\t\t\tif ( pos > _.max ) {\n\t\t\t\tpos = _.max// + min((pos - _.max) / 10, 10);\n\t\t\t}\n\t\t\telse if ( pos < _.min ) {\n\t\t\t\tpos = _.min// - min((_.min - pos) / 10, 10);\n\t\t\t}\n\t\t}\n\t\t\n\t\t_.pos = pos;\n\t\t\n\t}\n\t\n\trelease() {\n\t\tlet _       = this._,\n\t\t    velSign = signOf(_.lastVelocity);\n\t\t\n\t\tthis.holding = false;\n\t\t\n\t\t// calc momentum distance...\n\t\tapplyInertia(_);\n\t\t\n\t\t_.lastHoldPos = undefined;\n\t\t\n\t\t_.holding = false;\n\t\t\n\t\tif ( _.conf.bounds && _.conf.snapToBounds ) {\n\t\t\tif ( (_.pos + _.targetDist) > _.max ) {\n\t\t\t\t_.targetDist     = _.max - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t\telse if ( (_.pos + _.targetDist) < _.min ) {\n\t\t\t\t\n\t\t\t\t_.targetDist     = _.min - _.pos;\n\t\t\t\t_.targetDuration = abs(_.targetDist * 10);\n\t\t\t}\n\t\t}\n\t\t//else {\n\t\tif ( !_.targetDuration )\n\t\t\t_.targetDuration = 50;\n\t\t\n\t\t//console.log(_);\n\t\tthis.active      = true;\n\t\t_.inertia        = true;\n\t\t_.lastInertiaPos = 0;\n\t\t_.inertiaStartTm =\n\t\t\t_.inertiaLastTm = Date.now();\n\t\t//}\n\t\tthis._doSnap(null, 500)\n\t}\n}\n","/*\n *\n * Copyright (C) 2019 Nathanael Braun\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport is from \"is\";\n\nexport const re_cssValueWithUnit = new RegExp(\n\t\"([+-]?(?:[0-9]*[.])?[0-9]+)\\\\s*(\" +\n\t['box', 'bz', 'bh', 'bw', 'em', 'ex', '%', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'rem', 'vh', 'vw', 'vmin', 'vmax'].join('|')\n\t+ \")\"\n);\n\n/**\n * add any css val with it unit ( todo: optims&use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssAdd( val1, val2, ...argz ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\tif ( !is.array(val2) )\n\t\tval2 = [val2];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    units2             = val2.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 0;\n\t\tremap[units1[i][2]] += parseFloat(units1[i][1]);\n\t\ti++;\n\t}\n\ti = 0;\n\twhile ( i < units2.length ) {\n\t\tremap[units2[i][2]] = remap[units2[i][2]] || 0;\n\t\tremap[units2[i][2]] += parseFloat(units2[i][1]);\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn argz.length ? cssAdd(result, ...argz) : result;\n}\n\n/**\n * Multiply any css val with it unit ( todo: optims & use objects for multi unit\n * @param val1\n * @param val2\n * @returns {Array}\n */\nexport function cssMult( val1, val ) {\n\tif ( !is.array(val1) )\n\t\tval1 = [val1];\n\t\n\tlet units1             = val1.map(v => (v && v.match && v.match(re_cssValueWithUnit) || [, v || 0, 'px'])),\n\t    remap = {}, result = [], i;\n\t\n\ti = 0;\n\twhile ( i < units1.length ) {\n\t\tremap[units1[i][2]] = remap[units1[i][2]] || 1;\n\t\tremap[units1[i][2]] = parseFloat(units1[i][1]) * val;\n\t\ti++;\n\t}\n\tObject.keys(remap)\n\t      .forEach(\n\t\t      unit => (result.push(remap[unit] + unit))\n\t      );\n\treturn result;\n}\n\nexport function offset( items, start = 0 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom: item.from + start\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function scale( items, duration = 0, withOffset ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\t\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\titems = items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\tfrom    : (item.from / iDuration) * duration,\n\t\t\t\tduration: (item.duration / iDuration) * duration\n\t\t\t}\n\t\t)\n\t)\n\treturn withOffset ? offset(items, withOffset) : items\n}\n\nfunction inverseValues( v ) {\n\tif ( is.number(v) )\n\t\treturn -v;\n\tif ( is.object(v) )\n\t\treturn Object.keys(v).reduce(( h, key ) => (h[key] = inverseValues(v[key]), h), {});\n\tif ( is.array(v) )\n\t\treturn v.map(( item ) => (inverseValues(item)));\n\t\n\tlet values = v.split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig);\n\t\n\treturn values.map(\n\t\t( val, i ) => (i % 2 ? -parseFloat(val) : val)\n\t).join(\"\");\n}\n\nexport function reverse( items ) {\n\titems         = is.array(items) ? items : items && [items] || items;\n\t// get items current duration\n\tlet iDuration = 0;\n\titems.forEach(\n\t\titem => {\n\t\t\tiDuration = Math.max(iDuration, item.from + item.duration)\n\t\t}\n\t)\n\t\n\treturn items.map(\n\t\titem => {\n\t\t\titem =\n\t\t\t\t{\n\t\t\t\t\t...item,\n\t\t\t\t\tfrom: iDuration - (item.from + item.duration),\n\t\t\t\t\t...(item.apply ? { apply: inverseValues(item.apply) } : undefined)\n\t\t\t\t};\n\t\t\treturn item;\n\t\t}\n\t)\n}\n\nconst MultiCssProps = { \"transform\": true, \"filter\": true, \"textShadow\": true, \"boxShadow\": true }\n\nexport function addCss( target, ...sources ) {\n\tlet source = sources.shift();\n\t\n\tfor ( const key in source ) {\n\t\tif ( !source.hasOwnProperty(key) )\n\t\t\tcontinue;\n\t\t\n\t\tif ( MultiCssProps[key] ) {\n\t\t\tif ( !target[key] ) {\n\t\t\t\ttarget[key] = [];\n\t\t\t}\n\t\t\tif ( !is.array(source[key]) ) {\n\t\t\t\taddCss(target[key], [source[key]]);\n\t\t\t}\n\t\t\telse addCss(target[key], source[key]);\n\t\t}\n\t\telse {\n\t\t\t// adding units\n\t\t\tif ( is.array(source[key]) ) {\n\t\t\t\tif ( !target[key] ) {\n\t\t\t\t\ttarget[key] = [];\n\t\t\t\t}\n\t\t\t\tif ( !is.array(target[key]) ) {\n\t\t\t\t\ttarget[key] = [...source[key], target[key]];\n\t\t\t\t}\n\t\t\t\telse target[key].push(...source[key]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( !target[key] ) {\n\t\t\t\t\tif ( !is.object(source[key]) ) {\n\t\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttarget[key] = { ...source[key] };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if ( is.object(target[key]) && is.object(source[key]) ) {\n\t\t\t\t\taddCss(target[key], source[key]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//else target[key].push(...source[key]);\n\t\t\t\t\ttarget[key] = addAllType(target[key], source[key])\n\t\t\t\t\t//console.log(key, target[key])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\treturn sources.length && addCss(target, ...sources) || target;\n}\n\nfunction addAllType( v1, v2 ) {\n\tif ( !v1 )\n\t\treturn v2;\n\tif ( !v2 )\n\t\treturn v1;\n\tlet values1 = ('' + v1).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    values2 = ('' + v2).split(/(\\-?\\d+(?:\\.\\d+)?|\\-?\\.\\d+)/ig),\n\t    r       = values1.map(\n\t\t    ( val, i ) => (i % 2 ? parseFloat(val) + parseFloat(values2[i] || 0) : val)\n\t    ).filter(i => (i !== ''));\n\t\n\treturn r.length === 1 ? parseInt(r[0]) : r.join(\"\")\n}\n\nexport function extractCss( items, inverse ) {\n\tlet css = {};\n\titems   = is.array(items) ? items : items && [items] || items;\n\titems.forEach(\n\t\titem => {\n\t\t\taddCss(css, item.apply)\n\t\t}\n\t);\n\tif ( inverse )\n\t\tcss = inverseValues(css);\n\t\n\t\n\t//if ( inverse && css.hasOwnProperty('opacity') )\n\t//\tcss.opacity -= 1;\n\treturn css;\n}\n\nexport function target( items, target ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => (\n\t\t\t{\n\t\t\t\t...item,\n\t\t\t\ttarget\n\t\t\t}\n\t\t)\n\t)\n}\n\nexport function shiftTransforms( items, shift = 1 ) {\n\titems = is.array(items) ? items : items && [items] || items;\n\treturn items.map(\n\t\titem => {\n\t\t\tlet t = item.apply && item.apply.transform;\n\t\t\tif ( t ) {\n\t\t\t\tt = is.array(t) ? t : [t];\n\t\t\t\tfor ( let i = 0; i < shift; i++ )\n\t\t\t\t\tt.unshift({});\n\t\t\t\t\n\t\t\t\titem = { ...item, apply: { ...item.apply, transform: t } };\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t)\n}","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"d3-ease\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"is\");","module.exports = require(\"layer-pack/etc/utils/indexUtils.js\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"color-rgba\");","module.exports = require(\"tween-axis\");","module.exports = require(\"shortid\");","module.exports = require(\"css-box-shadow\");","module.exports = require(\"@babel/runtime/helpers/inheritsLoose\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");"],"sourceRoot":""}